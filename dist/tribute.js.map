{
  "version": 3,
  "sources": [
    "node_modules/browser-pack/_prelude.js",
    "src/Tribute.js",
    "src/TributeEvents.js",
    "src/TributeMenuEvents.js",
    "src/TributeRange.js",
    "src/TributeSearch.js",
    "src/index.js",
    "src/utils.js"
  ],
  "names": [],
  "mappings": "AAAA;;;;;;;;;;;ACAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;IAEM,O;AACF,2BAoBG;AAAA;;AAAA,+BAnBC,MAmBD;AAAA,YAnBC,MAmBD,+BAnBU,IAmBV;AAAA,+BAlBC,MAkBD;AAAA,YAlBC,MAkBD,+BAlBU,IAkBV;AAAA,oCAjBC,WAiBD;AAAA,YAjBC,WAiBD,oCAjBe,WAiBf;AAAA,gCAhBC,OAgBD;AAAA,YAhBC,OAgBD,gCAhBW,GAgBX;AAAA,yCAfC,gBAeD;AAAA,YAfC,gBAeD,yCAfoB,KAepB;AAAA,uCAdC,cAcD;AAAA,YAdC,cAcD,uCAdkB,IAclB;AAAA,yCAbC,gBAaD;AAAA,YAbC,gBAaD,yCAboB,IAapB;AAAA,+BAZC,MAYD;AAAA,YAZC,MAYD,+BAZU,KAYV;AAAA,iCAXC,QAWD;AAAA,YAXC,QAWD,iCAXY,OAWZ;AAAA,mCAVC,UAUD;AAAA,YAVC,UAUD,mCAVc,IAUd;AAAA,sCATC,aASD;AAAA,YATC,aASD,sCATiB,IASjB;AAAA,wCARC,eAQD;AAAA,YARC,eAQD,wCARmB,IAQnB;AAAA,yCAPC,mBAOD;AAAA,YAPC,mBAOD,yCAPuB,IAOvB;AAAA,oCANC,WAMD;AAAA,YANC,WAMD,oCANe,KAMf;AAAA,yCALC,iBAKD;AAAA,YALC,iBAKD,yCALqB,IAKrB;AAAA,qCAJC,YAID;AAAA,YAJC,YAID,qCAJgB,IAIhB;AAAA,yCAHC,iBAGD;AAAA,YAHC,iBAGD,yCAHqB,KAGrB;AAAA,mCAFC,UAED;AAAA,YAFC,UAED,mCAFc,EAEd;AAAA,sCADC,aACD;AAAA,YADC,aACD,sCADiB,IACjB;;AAAA;;AACC,aAAK,gBAAL,GAAwB,gBAAxB;AACA,aAAK,YAAL,GAAoB,CAApB;AACA,aAAK,OAAL,GAAe,EAAf;AACA,aAAK,UAAL,GAAkB,KAAlB;AACA,aAAK,QAAL,GAAgB,KAAhB;AACA,aAAK,aAAL,GAAqB,aAArB;AACA,aAAK,WAAL,GAAmB,WAAnB;AACA,aAAK,iBAAL,GAAyB,iBAAzB;AACA,aAAK,YAAL,GAAoB,YAApB;AACA,aAAK,gBAAL,GAAwB,KAAxB;AACA,aAAK,iBAAL,GAAyB,iBAAzB;;AAEA,YAAI,KAAK,gBAAT,EAA2B;AACvB,sBAAU,EAAV;AACA,0BAAc,KAAd;AACH;;AAED,YAAI,MAAJ,EAAY;AACR,iBAAK,UAAL,GAAkB,CAAC;AACf;AACA,yBAAS,OAFM;;AAIf;AACA,wBAAQ,MALO;;AAOf;AACA,6BAAa,WARE;;AAUf;AACA,gCAAgB,CAAC,kBAAkB,QAAQ,qBAA3B,EAAkD,IAAlD,CAAuD,IAAvD,CAXD;;AAaf;AACA,kCAAkB,CAAC,oBAAoB,QAAQ,uBAA7B,EAAsD,IAAtD,CAA2D,IAA3D,CAdH;;AAgBf;AACA,iCAAkB,aAAK;AACnB,wBAAI,OAAO,CAAP,KAAa,UAAjB,EAA6B;AACzB,+BAAO,EAAE,IAAF,CAAO,KAAP,CAAP;AACH;;AAED,2BAAO,mBAAmB,YAAY;AAAC,+BAAO,EAAP;AAAU,qBAAvB,CAAwB,IAAxB,CAA6B,KAA7B,CAA1B;AACH,iBANgB,CAMd,eANc,CAjBF;;AAyBf;AACA,wBAAQ,MA1BO;;AA4Bf;AACA,0BAAU,QA7BK;;AA+Bf;AACA,wBAAQ,MAhCO;;AAkCf,qCAAqB,mBAlCN;;AAoCf,4BAAY,UApCG;;AAsCf,+BAAe;AAtCA,aAAD,CAAlB;AAwCH,SAzCD,MA0CK,IAAI,UAAJ,EAAgB;AACjB,gBAAI,KAAK,gBAAT,EACI,QAAQ,IAAR,CAAa,4DAAb;AACJ,iBAAK,UAAL,GAAkB,WAAW,GAAX,CAAe,gBAAQ;AACrC,uBAAO;AACH,6BAAS,KAAK,OAAL,IAAgB,OADtB;AAEH,4BAAQ,KAAK,MAAL,IAAe,MAFpB;AAGH,iCAAa,KAAK,WAAL,IAAoB,WAH9B;AAIH,oCAAgB,CAAC,KAAK,cAAL,IAAuB,QAAQ,qBAAhC,EAAuD,IAAvD,CAA4D,KAA5D,CAJb;AAKH,sCAAkB,CAAC,KAAK,gBAAL,IAAyB,QAAQ,uBAAlC,EAA2D,IAA3D,CAAgE,KAAhE,CALf;AAMH;AACA,qCAAkB,aAAK;AACnB,4BAAI,OAAO,CAAP,KAAa,UAAjB,EAA6B;AACzB,mCAAO,EAAE,IAAF,CAAO,KAAP,CAAP;AACH;;AAED,+BAAO,IAAP;AACH,qBANgB,CAMd,eANc,CAPd;AAcH,4BAAQ,KAAK,MAAL,IAAe,MAdpB;AAeH,8BAAU,KAAK,QAAL,IAAiB,QAfxB;AAgBH,4BAAQ,KAAK,MAhBV;AAiBH,yCAAqB,KAAK,mBAjBvB;AAkBH,gCAAY,KAAK,UAAL,IAAmB,UAlB5B;AAmBH,mCAAe,KAAK,aAAL,IAAsB;AAnBlC,iBAAP;AAqBH,aAtBiB,CAAlB;AAuBH,SA1BI,MA2BA;AACD,kBAAM,IAAI,KAAJ,CAAU,oCAAV,CAAN;AACH;;AAED,YAAI,sBAAJ,CAAiB,IAAjB;AACA,YAAI,uBAAJ,CAAkB,IAAlB;AACA,YAAI,2BAAJ,CAAsB,IAAtB;AACA,YAAI,uBAAJ,CAAkB,IAAlB;AACH;;;;mCAmBU;AACP,mBAAO,KAAK,UAAL,CAAgB,GAAhB,CAAoB,kBAAU;AACjC,uBAAO,OAAO,OAAd;AACH,aAFM,CAAP;AAGH;;;+BAEM,E,EAAI;AACP,gBAAI,CAAC,EAAL,EAAS;AACL,sBAAM,IAAI,KAAJ,CAAU,gDAAV,CAAN;AACH;;AAED;AACA,gBAAI,OAAO,MAAP,KAAkB,WAAlB,IAAiC,cAAc,MAAnD,EAA2D;AACvD,qBAAK,GAAG,GAAH,EAAL;AACH;;AAED;AACA,gBAAI,GAAG,WAAH,KAAmB,QAAnB,IAA+B,GAAG,WAAH,KAAmB,cAAlD,IAAoE,GAAG,WAAH,KAAmB,KAA3F,EAAkG;AAC9F,oBAAI,SAAS,GAAG,MAAhB;AACA,qBAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,MAApB,EAA4B,EAAE,CAA9B,EAAiC;AAC7B,yBAAK,OAAL,CAAa,GAAG,CAAH,CAAb;AACH;AACJ,aALD,MAKO;AACH,qBAAK,OAAL,CAAa,EAAb;AACH;AACJ;;;gCAEO,E,EAAI;AACR,gBAAI,GAAG,YAAH,CAAgB,cAAhB,CAAJ,EAAqC;AACjC,wBAAQ,IAAR,CAAa,kCAAkC,GAAG,QAAlD;AACH;;AAED,iBAAK,cAAL,CAAoB,EAApB;AACA,iBAAK,MAAL,CAAY,IAAZ,CAAiB,EAAjB;AACA,eAAG,YAAH,CAAgB,cAAhB,EAAgC,IAAhC;AACH;;;uCAEc,O,EAAS;AACpB,gBAAI,QAAQ,UAAR,GAAqB,OAArB,CAA6B,QAAQ,QAArC,MAAmD,CAAC,CAAxD,EAA2D;AACvD,oBAAI,QAAQ,eAAZ,EAA6B;AACzB,4BAAQ,eAAR,GAA0B,IAA1B;AACH,iBAFD,MAEO;AACH,0BAAM,IAAI,KAAJ,CAAU,8BAA8B,QAAQ,QAAhD,CAAN;AACH;AACJ;AACJ;;;qCAEY;AACT,gBAAI,UAAU,KAAK,KAAL,CAAW,WAAX,GAAyB,aAAzB,CAAuC,KAAvC,CAAd;AAAA,gBACI,KAAK,KAAK,KAAL,CAAW,WAAX,GAAyB,aAAzB,CAAuC,IAAvC,CADT;;AAGA,oBAAQ,SAAR,GAAoB,mBAApB;AACA,oBAAQ,WAAR,CAAoB,EAApB;;AAEA,gBAAI,KAAK,aAAT,EAAwB;AACpB,uBAAO,KAAK,aAAL,CAAmB,WAAnB,CAA+B,OAA/B,CAAP;AACH;;AAED,mBAAO,KAAK,KAAL,CAAW,WAAX,GAAyB,IAAzB,CAA8B,WAA9B,CAA0C,OAA1C,CAAP;AACH;;;oCAEW,O,EAAS,Q,EAAU;AAAA;;AAC3B;AACA,gBAAI,KAAK,QAAL,IAAiB,KAAK,OAAL,CAAa,OAAb,KAAyB,OAA1C,IAAqD,KAAK,OAAL,CAAa,WAAb,KAA6B,KAAK,0BAA3F,EAAuH;AACrH;AACD;AACD,iBAAK,0BAAL,GAAkC,KAAK,OAAL,CAAa,WAA/C;;AAEA;AACA,gBAAI,CAAC,KAAK,IAAV,EAAgB;AACZ,qBAAK,IAAL,GAAY,KAAK,UAAL,EAAZ;AACA,wBAAQ,WAAR,GAAsB,KAAK,IAA3B;AACA,qBAAK,UAAL,CAAgB,IAAhB,CAAqB,KAAK,IAA1B;AACH;;AAED,iBAAK,QAAL,GAAgB,IAAhB;AACA,iBAAK,YAAL,GAAoB,CAApB;;AAEA,gBAAI,CAAC,KAAK,OAAL,CAAa,WAAlB,EAA+B;AAC3B,qBAAK,OAAL,CAAa,WAAb,GAA2B,EAA3B;AACH;;AAED,gBAAM,gBAAgB,SAAhB,aAAgB,CAAC,MAAD,EAAY;AAC9B;AACA,oBAAI,CAAC,OAAK,QAAV,EAAoB;AAChB;AACH;;AAED,oBAAI,QAAQ,OAAK,MAAL,CAAY,MAAZ,CAAmB,OAAK,OAAL,CAAa,WAAhC,EAA6C,MAA7C,EAAqD;AAC7D,yBAAK,OAAK,OAAL,CAAa,UAAb,CAAwB,UAAxB,CAAmC,GAAnC,IAA0C,QADc;AAE7D,0BAAM,OAAK,OAAL,CAAa,UAAb,CAAwB,UAAxB,CAAmC,IAAnC,IAA2C,SAFY;AAG7D,0BAAM,OAAK,OAAL,CAAa,UAAb,CAAwB,UAAxB,CAAmC,IAHoB;AAI7D,6BAAS,iBAAC,EAAD,EAAQ;AACb,4BAAI,OAAO,OAAK,OAAL,CAAa,UAAb,CAAwB,MAA/B,KAA0C,QAA9C,EAAwD;AACpD,mCAAO,GAAG,OAAK,OAAL,CAAa,UAAb,CAAwB,MAA3B,CAAP;AACH,yBAFD,MAEO,IAAI,OAAO,OAAK,OAAL,CAAa,UAAb,CAAwB,MAA/B,KAA0C,UAA9C,EAA0D;AAC7D,mCAAO,OAAK,OAAL,CAAa,UAAb,CAAwB,MAAxB,CAA+B,EAA/B,EAAmC,OAAK,OAAL,CAAa,WAAhD,CAAP;AACH,yBAFM,MAEA;AACH,kCAAM,IAAI,KAAJ,CAAU,8DAAV,CAAN;AACH;AACJ;AAZ4D,iBAArD,CAAZ;;AAeA,uBAAK,OAAL,CAAa,aAAb,GAA6B,KAA7B;;AAGA,oBAAI,KAAK,OAAK,IAAL,CAAU,aAAV,CAAwB,IAAxB,CAAT;;AAEA,uBAAK,KAAL,CAAW,mBAAX,CAA+B,QAA/B;;AAEA,oBAAI,CAAC,MAAM,MAAX,EAAmB;AACf,wBAAI,eAAe,IAAI,WAAJ,CAAgB,kBAAhB,EAAoC,EAAE,QAAQ,OAAK,IAAf,EAApC,CAAnB;AACA,2BAAK,OAAL,CAAa,OAAb,CAAqB,aAArB,CAAmC,YAAnC;AACA,wBAAK,OAAO,OAAK,OAAL,CAAa,UAAb,CAAwB,eAA/B,KAAmD,UAAnD,IAAiE,CAAC,OAAK,OAAL,CAAa,UAAb,CAAwB,eAAxB,EAAlE,IAA+G,CAAC,OAAK,OAAL,CAAa,UAAb,CAAwB,eAA7I,EAA8J;AAC1J,+BAAK,QAAL;AACH,qBAFD,MAEO;AACH,+BAAO,OAAK,OAAL,CAAa,UAAb,CAAwB,eAA/B,KAAmD,UAAnD,GAAgE,GAAG,SAAH,GAAe,OAAK,OAAL,CAAa,UAAb,CAAwB,eAAxB,EAA/E,GAA2H,GAAG,SAAH,GAAe,OAAK,OAAL,CAAa,UAAb,CAAwB,eAAlK;AACH;;AAED;AACH;;AAED,oBAAI,OAAK,OAAL,CAAa,UAAb,CAAwB,aAA5B,EAA2C;AACvC,4BAAQ,MAAM,KAAN,CAAY,CAAZ,EAAe,OAAK,OAAL,CAAa,UAAb,CAAwB,aAAvC,CAAR;AACH;;AAED,mBAAG,SAAH,GAAe,EAAf;AACA,oBAAI,WAAW,OAAK,KAAL,CAAW,WAAX,GAAyB,sBAAzB,EAAf;;AAEA,sBAAM,OAAN,CAAc,UAAC,IAAD,EAAO,KAAP,EAAiB;AAC3B,wBAAI,KAAK,OAAK,KAAL,CAAW,WAAX,GAAyB,aAAzB,CAAuC,IAAvC,CAAT;AACA,uBAAG,YAAH,CAAgB,YAAhB,EAA8B,KAA9B;AACA,uBAAG,gBAAH,CAAoB,WAApB,EAAiC,UAAC,CAAD,EAAO;AAAA,6CAClB,OAAK,aAAL,CAAmB,EAAE,MAArB,CADkB;AAAA;AAAA,4BAC/B,EAD+B;AAAA,4BAC3B,KAD2B;;AAEpC,4BAAI,EAAE,SAAF,KAAgB,CAApB,EAAuB;AACnB,mCAAK,MAAL,CAAY,WAAZ,CAAwB,KAAxB;AACH;AACJ,qBALD;AAMA,wBAAI,OAAK,YAAL,KAAsB,KAA1B,EAAiC;AAC/B,2BAAG,SAAH,GAAe,OAAK,OAAL,CAAa,UAAb,CAAwB,WAAvC;AACD;AACD,uBAAG,SAAH,GAAe,OAAK,OAAL,CAAa,UAAb,CAAwB,gBAAxB,CAAyC,IAAzC,CAAf;AACA,6BAAS,WAAT,CAAqB,EAArB;AACH,iBAdD;AAeA,mBAAG,WAAH,CAAe,QAAf;AACH,aA/DD;;AAiEA,gBAAI,OAAO,KAAK,OAAL,CAAa,UAAb,CAAwB,MAA/B,KAA0C,UAA9C,EAA0D;AACtD,qBAAK,OAAL,CAAa,UAAb,CAAwB,MAAxB,CAA+B,KAAK,OAAL,CAAa,WAA5C,EAAyD,aAAzD;AACH,aAFD,MAEO;AACH,8BAAc,KAAK,OAAL,CAAa,UAAb,CAAwB,MAAtC;AACH;AACJ;;;sCAEa,E,EAAI;AACd,gBAAI,CAAC,EAAL,EAAS,OAAO,EAAP;AACT,gBAAM,QAAQ,GAAG,YAAH,CAAgB,YAAhB,CAAd;AACA,mBAAO,CAAC,KAAD,GACH,KAAK,aAAL,CAAmB,GAAG,UAAtB,CADG,GAEH,CAAC,EAAD,EAAK,KAAL,CAFJ;AAGH;;;8CAEqB,O,EAAS,e,EAAiB;AAC5C,gBAAI,YAAY,SAAS,aAAzB,EAAwC;AACpC,qBAAK,eAAL,CAAqB,OAArB;AACH;;AAED,iBAAK,OAAL,CAAa,UAAb,GAA0B,KAAK,UAAL,CAAgB,mBAAmB,CAAnC,CAA1B;AACA,iBAAK,OAAL,CAAa,eAAb,GAA+B,IAA/B;AACA,iBAAK,OAAL,CAAa,OAAb,GAAuB,OAAvB;;AAEA,gBAAI,QAAQ,iBAAZ,EACI,KAAK,kBAAL,CAAwB,KAAK,OAAL,CAAa,UAAb,CAAwB,OAAhD,EADJ,KAGI,KAAK,aAAL,CAAmB,OAAnB,EAA4B,KAAK,OAAL,CAAa,UAAb,CAAwB,OAApD;;AAEJ,iBAAK,WAAL,CAAiB,OAAjB;AACH;;AAED;;;;wCACgB,E,EAAI;AAChB,eAAG,KAAH;AACA,gBAAI,OAAO,OAAO,YAAd,IAA8B,WAA9B,IACO,OAAO,SAAS,WAAhB,IAA+B,WAD1C,EACuD;AACnD,oBAAI,QAAQ,SAAS,WAAT,EAAZ;AACA,sBAAM,kBAAN,CAAyB,EAAzB;AACA,sBAAM,QAAN,CAAe,KAAf;AACA,oBAAI,MAAM,OAAO,YAAP,EAAV;AACA,oBAAI,eAAJ;AACA,oBAAI,QAAJ,CAAa,KAAb;AACH,aARD,MAQO,IAAI,OAAO,SAAS,IAAT,CAAc,eAArB,IAAwC,WAA5C,EAAyD;AAC5D,oBAAI,YAAY,SAAS,IAAT,CAAc,eAAd,EAAhB;AACA,0BAAU,iBAAV,CAA4B,EAA5B;AACA,0BAAU,QAAV,CAAmB,KAAnB;AACA,0BAAU,MAAV;AACH;AACJ;;AAED;;;;2CACmB,I,EAAM;AACrB,gBAAI,GAAJ,EAAS,KAAT,EAAgB,IAAhB;AACA,kBAAM,OAAO,YAAP,EAAN;AACA,oBAAQ,IAAI,UAAJ,CAAe,CAAf,CAAR;AACA,kBAAM,cAAN;AACA,gBAAI,WAAW,SAAS,cAAT,CAAwB,IAAxB,CAAf;AACA,kBAAM,UAAN,CAAiB,QAAjB;AACA,kBAAM,kBAAN,CAAyB,QAAzB;AACA,kBAAM,QAAN,CAAe,KAAf;AACA,gBAAI,eAAJ;AACA,gBAAI,QAAJ,CAAa,KAAb;AACH;;AAED;;;;sCACc,Q,EAAU,I,EAAM;AAC1B,gBAAI,YAAY,SAAS,SAAzB;AACA,gBAAI,WAAW,SAAS,cAAxB;;AAEA,gBAAI,QAAS,SAAS,KAAV,CAAiB,SAAjB,CAA2B,CAA3B,EAA8B,QAA9B,CAAZ;AACA,gBAAI,OAAQ,SAAS,KAAV,CAAiB,SAAjB,CAA2B,SAAS,YAApC,EAAkD,SAAS,KAAT,CAAe,MAAjE,CAAX;AACA,qBAAS,KAAT,GAAiB,QAAQ,IAAR,GAAe,IAAhC;AACA,uBAAW,WAAW,KAAK,MAA3B;AACA,qBAAS,cAAT,GAA0B,QAA1B;AACA,qBAAS,YAAT,GAAwB,QAAxB;AACA,qBAAS,KAAT;AACA,qBAAS,SAAT,GAAqB,SAArB;AACH;;;mCAEU;AACP,gBAAI,KAAK,IAAT,EAAe;AACX,qBAAK,IAAL,CAAU,KAAV,CAAgB,OAAhB,GAA0B,gBAA1B;AACA,qBAAK,QAAL,GAAgB,KAAhB;AACA,qBAAK,YAAL,GAAoB,CAApB;AACA,qBAAK,OAAL,GAAe,EAAf;AACH;AACJ;;;0CAEiB,K,EAAO,a,EAAe;AACpC,oBAAQ,SAAS,KAAT,CAAR;AACA,gBAAI,OAAO,KAAP,KAAiB,QAAjB,IAA6B,MAAM,KAAN,CAAjC,EAA+C;AAC/C,gBAAI,OAAO,KAAK,OAAL,CAAa,aAAb,CAA2B,KAA3B,CAAX;AACA,gBAAI,UAAU,KAAK,OAAL,CAAa,UAAb,CAAwB,cAAxB,CAAuC,IAAvC,CAAd;AACA,gBAAI,YAAY,IAAhB,EAAsB,KAAK,WAAL,CAAiB,OAAjB,EAA0B,aAA1B,EAAyC,IAAzC;AACzB;;;oCAEW,O,EAAS,a,EAAe,I,EAAM;AACtC,iBAAK,KAAL,CAAW,kBAAX,CAA8B,OAA9B,EAAuC,IAAvC,EAA6C,IAA7C,EAAmD,aAAnD,EAAkE,IAAlE;AACH;;;gCAEO,U,EAAY,S,EAAW,O,EAAS;AACpC,gBAAI,OAAO,WAAW,MAAlB,KAA6B,UAAjC,EAA6C;AACzC,sBAAM,IAAI,KAAJ,CAAU,kDAAV,CAAN;AACH,aAFD,MAEO,IAAI,CAAC,OAAL,EAAc;AACjB,2BAAW,MAAX,GAAoB,WAAW,MAAX,CAAkB,MAAlB,CAAyB,SAAzB,CAApB;AACH,aAFM,MAEA;AACH,2BAAW,MAAX,GAAoB,SAApB;AACH;AACJ;;;+BAEM,e,EAAiB,S,EAAW,O,EAAS;AACxC,gBAAI,QAAQ,SAAS,eAAT,CAAZ;AACA,gBAAI,OAAO,KAAP,KAAiB,QAArB,EAA+B,MAAM,IAAI,KAAJ,CAAU,uDAAV,CAAN;;AAE/B,gBAAI,aAAa,KAAK,UAAL,CAAgB,KAAhB,CAAjB;;AAEA,iBAAK,OAAL,CAAa,UAAb,EAAyB,SAAzB,EAAoC,OAApC;AACH;;;sCAEa,S,EAAW,O,EAAS;AAC9B,gBAAI,KAAK,QAAT,EAAmB;AACf,qBAAK,OAAL,CAAa,KAAK,OAAL,CAAa,UAA1B,EAAsC,SAAtC,EAAiD,OAAjD;AACH,aAFD,MAEO;AACH,sBAAM,IAAI,KAAJ,CAAU,+DAAV,CAAN;AACH;AACJ;;;+BAEM,E,EAAI;AACP,gBAAI,CAAC,EAAL,EAAS;AACL,sBAAM,IAAI,KAAJ,CAAU,gDAAV,CAAN;AACH;;AAED;AACA,gBAAI,OAAO,MAAP,KAAkB,WAAlB,IAAiC,cAAc,MAAnD,EAA2D;AACvD,qBAAK,GAAG,GAAH,EAAL;AACH;;AAED;AACA,gBAAI,GAAG,WAAH,KAAmB,QAAnB,IAA+B,GAAG,WAAH,KAAmB,cAAlD,IAAoE,GAAG,WAAH,KAAmB,KAA3F,EAAkG;AAC9F,oBAAI,SAAS,GAAG,MAAhB;AACA,qBAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,MAApB,EAA4B,EAAE,CAA9B,EAAiC;AAC7B,yBAAK,OAAL,CAAa,GAAG,CAAH,CAAb;AACH;AACJ,aALD,MAKO;AACH,qBAAK,OAAL,CAAa,EAAb;AACH;AACJ;;;gCAEO,E,EAAI;AAAA;;AACR,iBAAK,MAAL,CAAY,MAAZ,CAAmB,EAAnB;AACA,gBAAI,GAAG,WAAP,EAAoB;AAChB,qBAAK,UAAL,CAAgB,MAAhB,CAAuB,GAAG,WAA1B;AACH;;AAED,uBAAW,YAAM;AACb,mBAAG,eAAH,CAAmB,cAAnB;AACA,uBAAK,QAAL,GAAgB,KAAhB;AACA,oBAAI,GAAG,WAAP,EAAoB;AAChB,uBAAG,WAAH,CAAe,MAAf;AACH;AACJ,aAND;AAOH;;;8CAtU4B,I,EAAM;AACjC,gBAAI,OAAO,IAAP,KAAgB,WAApB,EAAiC,OAAO,IAAP;AACjC,gBAAI,KAAK,KAAL,CAAW,iBAAX,CAA6B,KAAK,OAAL,CAAa,OAA1C,CAAJ,EAAwD;AACpD,uBAAO,oCAAoC,KAAK,OAAL,CAAa,UAAb,CAAwB,OAAxB,GAAkC,KAAK,QAAL,CAAc,KAAK,OAAL,CAAa,UAAb,CAAwB,QAAtC,CAAtE,IAAyH,SAAhI;AACH;;AAED,mBAAO,KAAK,OAAL,CAAa,UAAb,CAAwB,OAAxB,GAAkC,KAAK,QAAL,CAAc,KAAK,OAAL,CAAa,UAAb,CAAwB,QAAtC,CAAzC;AACD;;;gDAE8B,S,EAAW;AACtC,mBAAO,UAAU,MAAjB;AACH;;;qCAEmB;AAChB,mBAAO,CAAC,UAAD,EAAa,OAAb,CAAP;AACH;;;;;;kBA0TU,O;;;;;;;;;;;;;;ICrcT,a;AACF,2BAAY,OAAZ,EAAqB;AAAA;;AACjB,aAAK,OAAL,GAAe,OAAf;AACA,aAAK,OAAL,CAAa,MAAb,GAAsB,IAAtB;AACH;;;;6BA2BI,O,EAAS;AACV,oBAAQ,YAAR,GAAuB,KAAK,OAAL,CAAa,IAAb,CAAkB,OAAlB,EAA2B,IAA3B,CAAvB;AACA,oBAAQ,UAAR,GAAqB,KAAK,KAAL,CAAW,IAAX,CAAgB,OAAhB,EAAyB,IAAzB,CAArB;AACA,oBAAQ,UAAR,GAAqB,KAAK,KAAL,CAAW,IAAX,CAAgB,OAAhB,EAAyB,IAAzB,CAArB;;AAEA,oBAAQ,gBAAR,CAAyB,SAAzB,EACI,QAAQ,YADZ,EAC0B,KAD1B;AAEA,oBAAQ,gBAAR,CAAyB,OAAzB,EACI,QAAQ,UADZ,EACwB,KADxB;AAEA,oBAAQ,gBAAR,CAAyB,OAAzB,EACI,QAAQ,UADZ,EACwB,KADxB;AAEH;;;+BAEM,O,EAAS;AACZ,oBAAQ,mBAAR,CAA4B,SAA5B,EACI,QAAQ,YADZ,EAC0B,KAD1B;AAEA,oBAAQ,mBAAR,CAA4B,OAA5B,EACI,QAAQ,UADZ,EACwB,KADxB;AAEA,oBAAQ,mBAAR,CAA4B,OAA5B,EACI,QAAQ,UADZ,EACwB,KADxB;;AAGA,mBAAO,QAAQ,YAAf;AACA,mBAAO,QAAQ,UAAf;AACA,mBAAO,QAAQ,UAAf;AACH;;;gCAEO,Q,EAAU,K,EAAO;AACrB,gBAAI,SAAS,gBAAT,CAA0B,KAA1B,CAAJ,EAAsC;AAClC,yBAAS,OAAT,CAAiB,QAAjB,GAA4B,KAA5B;AACA,yBAAS,OAAT,CAAiB,QAAjB;AACH;;AAED,gBAAI,UAAU,IAAd;AACA,qBAAS,YAAT,GAAwB,KAAxB;;AAEA,0BAAc,IAAd,GAAqB,OAArB,CAA6B,aAAK;AAC9B,oBAAI,EAAE,GAAF,KAAU,MAAM,OAApB,EAA6B;AACzB,6BAAS,YAAT,GAAwB,IAAxB;AACA,6BAAS,SAAT,GAAqB,EAAE,KAAF,CAAQ,WAAR,EAArB,EAA4C,KAA5C,EAAmD,OAAnD;AACH;AACJ,aALD;AAMH;;;8BAEK,Q,EAAU,K,EAAO;AACnB,qBAAS,UAAT,GAAsB,IAAtB;AACA,qBAAS,KAAT,CAAe,IAAf,CAAoB,IAApB,EAA0B,QAA1B,EAAoC,KAApC;AACH;;;8BAEK,Q,EAAU,K,EAAO;AACnB,oBAAQ,GAAR,CAAY,UAAZ;AACA,gBAAI,UAAU,SAAS,OAAvB;AACA,gBAAI,QAAQ,IAAR,IAAgB,QAAQ,IAAR,CAAa,QAAb,CAAsB,MAAM,MAA5B,CAApB,EAAyD;AACrD,oBAAI,KAAK,MAAM,MAAf;AACA,sBAAM,cAAN;AACA,sBAAM,eAAN;AACA,uBAAO,GAAG,QAAH,CAAY,WAAZ,OAA8B,IAArC,EAA2C;AACvC,yBAAK,GAAG,UAAR;AACA,wBAAI,CAAC,EAAD,IAAO,OAAO,QAAQ,IAA1B,EAAgC;AAC5B,8BAAM,IAAI,KAAJ,CAAU,8CAAV,CAAN;AACH;AACJ;AACD,wBAAQ,iBAAR,CAA0B,GAAG,YAAH,CAAgB,YAAhB,CAA1B,EAAyD,KAAzD;AACA,wBAAQ,QAAR;;AAEJ;AACC,aAdD,MAcO,IAAI,QAAQ,OAAR,CAAgB,OAAhB,IAA2B,CAAC,QAAQ,OAAR,CAAgB,eAAhD,EAAiE;AACpE,wBAAQ,OAAR,CAAgB,eAAhB,GAAkC,KAAlC;AACA,2BAAW;AAAA,2BAAM,QAAQ,QAAR,EAAN;AAAA,iBAAX;AACH;AACJ;;;8BAEK,Q,EAAU,K,EAAO;AACnB,gBAAI,SAAS,UAAb,EAAyB;AACrB,yBAAS,UAAT,GAAsB,KAAtB;AACH;AACD,qBAAS,eAAT,CAAyB,IAAzB;;AAEA,gBAAI,MAAM,OAAN,KAAkB,EAAtB,EAA0B;;AAE1B,gBAAI,CAAC,SAAS,OAAT,CAAiB,WAAlB,IAAiC,SAAS,OAAT,CAAiB,gBAAtD,EAAwE;AACpE,yBAAS,OAAT,CAAiB,gBAAjB,GAAoC,KAApC;AACA,yBAAS,YAAT,GAAwB,IAAxB;AACA,yBAAS,SAAT,GAAqB,OAArB,EAA8B,KAA9B,EAAqC,IAArC;AACA;AACH;;AAED,gBAAI,CAAC,SAAS,OAAT,CAAiB,QAAtB,EAAgC;AAC5B,oBAAI,SAAS,OAAT,CAAiB,gBAArB,EAAuC;AACnC,6BAAS,SAAT,GAAqB,WAArB,CAAiC,KAAjC,EAAwC,IAAxC,EAA8C,EAA9C;AACH,iBAFD,MAEO;AACH,wBAAI,UAAU,SAAS,UAAT,CAAoB,QAApB,EAA8B,IAA9B,EAAoC,KAApC,CAAd;;AAEA,wBAAI,MAAM,OAAN,KAAkB,CAAC,OAAvB,EAAgC;;AAEhC,wBAAI,UAAU,SAAS,OAAT,CAAiB,QAAjB,GAA4B,IAA5B,CAAiC,mBAAW;AACtD,+BAAO,QAAQ,UAAR,CAAmB,CAAnB,MAA0B,OAAjC;AACH,qBAFa,CAAd;;AAIA,wBAAI,OAAO,OAAP,KAAmB,WAAvB,EAAoC;AAChC,iCAAS,SAAT,GAAqB,WAArB,CAAiC,KAAjC,EAAwC,IAAxC,EAA8C,OAA9C;AACH;AACJ;AACJ;;AAED,gBAAI,CAAC,SAAS,OAAT,CAAiB,OAAjB,CAAyB,OAAzB,IAAoC,SAAS,OAAT,CAAiB,gBAAtD,KACG,SAAS,YAAT,KAA0B,KAD7B,IAEG,SAAS,OAAT,CAAiB,QAAjB,IAA6B,MAAM,OAAN,KAAkB,CAFtD,EAEyD;AACvD,yBAAS,OAAT,CAAiB,WAAjB,CAA6B,IAA7B,EAAmC,IAAnC;AACD;AACJ;;;yCAEgB,K,EAAO;AACpB,gBAAI,CAAC,KAAK,OAAL,CAAa,QAAlB,EAA4B,OAAO,KAAP;;AAE5B,gBAAI,KAAK,OAAL,CAAa,OAAb,CAAqB,WAArB,CAAiC,MAAjC,KAA4C,CAAhD,EAAmD;AAC/C,oBAAI,kBAAkB,KAAtB;AACA,8BAAc,IAAd,GAAqB,OAArB,CAA6B,aAAK;AAC9B,wBAAI,MAAM,OAAN,KAAkB,EAAE,GAAxB,EAA6B,kBAAkB,IAAlB;AAChC,iBAFD;;AAIA,uBAAO,CAAC,eAAR;AACH;;AAED,mBAAO,KAAP;AACH;;;mCAEU,Q,EAAU,E,EAAI,K,EAAO;AAC5B,gBAAI,aAAJ;AACA,gBAAI,UAAU,SAAS,OAAvB;AACA,gBAAI,OAAO,QAAQ,KAAR,CAAc,cAAd,CAA6B,KAA7B,EAAoC,QAAQ,gBAA5C,EAA8D,IAA9D,EAAoE,QAAQ,WAA5E,EAAyF,QAAQ,gBAAjG,CAAX;;AAEA,gBAAI,IAAJ,EAAU;AACN,uBAAO,KAAK,kBAAL,CAAwB,UAAxB,CAAmC,CAAnC,CAAP;AACH,aAFD,MAEO;AACH,uBAAO,KAAP;AACH;AACJ;;;wCAEe,E,EAAI;AAChB,iBAAK,OAAL,CAAa,OAAb,CAAqB,OAArB,GAA+B,EAA/B;AACA,gBAAI,OAAO,KAAK,OAAL,CAAa,KAAb,CAAmB,cAAnB,CAAkC,KAAlC,EAAyC,KAAK,OAAL,CAAa,gBAAtD,EAAwE,IAAxE,EAA8E,KAAK,OAAL,CAAa,WAA3F,EAAwG,KAAK,OAAL,CAAa,gBAArH,CAAX;;AAEA,gBAAI,IAAJ,EAAU;AACN,qBAAK,OAAL,CAAa,OAAb,CAAqB,YAArB,GAAoC,KAAK,mBAAzC;AACA,qBAAK,OAAL,CAAa,OAAb,CAAqB,WAArB,GAAmC,KAAK,WAAxC;AACA,qBAAK,OAAL,CAAa,OAAb,CAAqB,cAArB,GAAsC,KAAK,qBAA3C;AACH;AACJ;;;oCAEW;AAAA;;AACR,mBAAO;AACH,6BAAa,qBAAC,CAAD,EAAI,EAAJ,EAAQ,OAAR,EAAoB;AAC7B,wBAAI,UAAU,MAAK,OAAnB;AACA,4BAAQ,OAAR,CAAgB,OAAhB,GAA0B,OAA1B;;AAEA,wBAAI,iBAAiB,QAAQ,UAAR,CAAmB,IAAnB,CAAwB,gBAAQ;AACjD,+BAAO,KAAK,OAAL,KAAiB,OAAxB;AACH,qBAFoB,CAArB;;AAIA,4BAAQ,OAAR,CAAgB,UAAhB,GAA6B,cAA7B;AACA,wBAAI,QAAQ,UAAZ,EAAwB,QAAQ,WAAR,CAAoB,EAApB,EAAwB,IAAxB;AAC3B,iBAXE;AAYH,uBAAO,eAAC,CAAD,EAAI,EAAJ,EAAW;AACd;AACA,wBAAI,MAAK,OAAL,CAAa,QAAb,IAAyB,MAAK,OAAL,CAAa,OAAb,CAAqB,aAAlD,EAAiE;AAC7D,0BAAE,cAAF;AACA,0BAAE,eAAF;AACA,mCAAW,YAAM;AACb,kCAAK,OAAL,CAAa,iBAAb,CAA+B,MAAK,OAAL,CAAa,YAA5C,EAA0D,CAA1D;AACA,kCAAK,OAAL,CAAa,QAAb;AACH,yBAHD,EAGG,CAHH;AAIH;AACJ,iBAtBE;AAuBH,wBAAQ,gBAAC,CAAD,EAAI,EAAJ,EAAW;AACf,wBAAI,MAAK,OAAL,CAAa,QAAjB,EAA2B;AACvB,0BAAE,cAAF;AACA,0BAAE,eAAF;AACA,8BAAK,OAAL,CAAa,QAAb,GAAwB,KAAxB;AACA,8BAAK,OAAL,CAAa,QAAb;AACH;AACJ,iBA9BE;AA+BH,qBAAK,aAAC,CAAD,EAAI,EAAJ,EAAW;AACZ;AACA,0BAAK,SAAL,GAAiB,KAAjB,CAAuB,CAAvB,EAA0B,EAA1B;AACH,iBAlCE;AAmCH,uBAAO,eAAC,CAAD,EAAI,EAAJ,EAAW;AACd,wBAAI,MAAK,OAAL,CAAa,QAAjB,EAA2B;AACvB,4BAAI,MAAK,OAAL,CAAa,iBAAjB,EAAoC;AAChC,kCAAK,SAAL,GAAiB,KAAjB,CAAuB,CAAvB,EAA0B,EAA1B;AACH,yBAFD,MAEO,IAAI,CAAC,MAAK,OAAL,CAAa,WAAlB,EAA+B;AAClC,8BAAE,eAAF;AACA,uCAAW,YAAM;AACb,sCAAK,OAAL,CAAa,QAAb;AACA,sCAAK,OAAL,CAAa,QAAb,GAAwB,KAAxB;AACH,6BAHD,EAGG,CAHH;AAIH;AACJ;AACJ,iBA/CE;AAgDH,oBAAI,YAAC,CAAD,EAAI,EAAJ,EAAW;AACX;AACA,wBAAI,MAAK,OAAL,CAAa,QAAb,IAAyB,MAAK,OAAL,CAAa,OAAb,CAAqB,aAAlD,EAAiE;AAC7D,0BAAE,cAAF;AACA,0BAAE,eAAF;AACA,4BAAI,QAAQ,MAAK,OAAL,CAAa,OAAb,CAAqB,aAArB,CAAmC,MAA/C;AAAA,4BACI,WAAW,MAAK,OAAL,CAAa,YAD5B;;AAGA,4BAAI,QAAQ,QAAR,IAAoB,WAAW,CAAnC,EAAsC;AAClC,kCAAK,OAAL,CAAa,YAAb;AACA,kCAAK,WAAL;AACH,yBAHD,MAGO,IAAI,aAAa,CAAjB,EAAoB;AACzB,kCAAK,OAAL,CAAa,YAAb,GAA4B,QAAQ,CAApC;AACA,kCAAK,WAAL;AACA,kCAAK,OAAL,CAAa,IAAb,CAAkB,SAAlB,GAA8B,MAAK,OAAL,CAAa,IAAb,CAAkB,YAAhD;AACD;AACJ;AACJ,iBAjEE;AAkEH,sBAAM,cAAC,CAAD,EAAI,EAAJ,EAAW;AACb;AACA,wBAAI,MAAK,OAAL,CAAa,QAAb,IAAyB,MAAK,OAAL,CAAa,OAAb,CAAqB,aAAlD,EAAiE;AAC7D,0BAAE,cAAF;AACA,0BAAE,eAAF;AACA,4BAAI,QAAQ,MAAK,OAAL,CAAa,OAAb,CAAqB,aAArB,CAAmC,MAAnC,GAA4C,CAAxD;AAAA,4BACI,WAAW,MAAK,OAAL,CAAa,YAD5B;;AAGA,4BAAI,QAAQ,QAAZ,EAAsB;AAClB,kCAAK,OAAL,CAAa,YAAb;AACA,kCAAK,WAAL;AACH,yBAHD,MAGO,IAAI,UAAU,QAAd,EAAwB;AAC3B,kCAAK,OAAL,CAAa,YAAb,GAA4B,CAA5B;AACA,kCAAK,WAAL;AACA,kCAAK,OAAL,CAAa,IAAb,CAAkB,SAAlB,GAA8B,CAA9B;AACH;AACJ;AACJ,iBAnFE;AAoFH,wBAAQ,iBAAC,CAAD,EAAI,EAAJ,EAAW;AACf,wBAAI,MAAK,OAAL,CAAa,QAAb,IAAyB,MAAK,OAAL,CAAa,OAAb,CAAqB,WAArB,CAAiC,MAAjC,GAA0C,CAAvE,EAA0E;AACtE,8BAAK,OAAL,CAAa,QAAb;AACH,qBAFD,MAEO,IAAI,MAAK,OAAL,CAAa,QAAjB,EAA2B;AAC9B,8BAAK,OAAL,CAAa,WAAb,CAAyB,EAAzB;AACH;AACJ;AA1FE,aAAP;AA4FH;;;oCAEW,K,EAAO;AACf,gBAAI,MAAM,KAAK,OAAL,CAAa,IAAb,CAAkB,gBAAlB,CAAmC,IAAnC,CAAV;AAAA,gBACI,SAAS,IAAI,MAAJ,KAAe,CAD5B;;AAGA,gBAAI,KAAJ,EAAW,KAAK,OAAL,CAAa,YAAb,GAA4B,SAAS,KAAT,CAA5B;;AAEX,iBAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,MAApB,EAA4B,GAA5B,EAAiC;AAC7B,oBAAI,KAAK,IAAI,CAAJ,CAAT;AACA,oBAAI,MAAM,KAAK,OAAL,CAAa,YAAvB,EAAqC;AACjC,uBAAG,SAAH,CAAa,GAAb,CAAiB,KAAK,OAAL,CAAa,OAAb,CAAqB,UAArB,CAAgC,WAAjD;;AAEA,wBAAI,eAAe,GAAG,qBAAH,EAAnB;AACA,wBAAI,iBAAiB,KAAK,OAAL,CAAa,IAAb,CAAkB,qBAAlB,EAArB;;AAEA,wBAAI,aAAa,MAAb,GAAsB,eAAe,MAAzC,EAAiD;AAC7C,4BAAI,iBAAiB,aAAa,MAAb,GAAsB,eAAe,MAA1D;AACA,6BAAK,OAAL,CAAa,IAAb,CAAkB,SAAlB,IAA+B,cAA/B;AACH,qBAHD,MAGO,IAAI,aAAa,GAAb,GAAmB,eAAe,GAAtC,EAA2C;AAC9C,4BAAI,kBAAiB,eAAe,GAAf,GAAqB,aAAa,GAAvD;AACA,6BAAK,OAAL,CAAa,IAAb,CAAkB,SAAlB,IAA+B,eAA/B;AACH;AAEJ,iBAdD,MAcO;AACH,uBAAG,SAAH,CAAa,MAAb,CAAoB,KAAK,OAAL,CAAa,OAAb,CAAqB,UAArB,CAAgC,WAApD;AACH;AACJ;AACJ;;;sCAEa,I,EAAM,a,EAAe;AACjC,gBAAI,SAAS,KAAK,qBAAL,GAA6B,MAA1C;;AAEA,gBAAI,aAAJ,EAAmB;AACjB,oBAAI,QAAQ,KAAK,YAAL,IAAqB,KAAK,kBAAL,GAA0B,gBAA1B,CAA2C,IAA3C,CAAjC;AACA,uBAAO,SAAS,WAAW,MAAM,SAAjB,CAAT,GAAuC,WAAW,MAAM,YAAjB,CAA9C;AACD;;AAED,mBAAO,MAAP;AACD;;;+BAlTa;AACV,mBAAO,CAAC;AACJ,qBAAK,CADD;AAEJ,uBAAO;AAFH,aAAD,EAGJ;AACC,qBAAK,CADN;AAEC,uBAAO;AAFR,aAHI,EAMJ;AACC,qBAAK,EADN;AAEC,uBAAO;AAFR,aANI,EASJ;AACC,qBAAK,EADN;AAEC,uBAAO;AAFR,aATI,EAYJ;AACC,qBAAK,EADN;AAEC,uBAAO;AAFR,aAZI,EAeJ;AACC,qBAAK,EADN;AAEC,uBAAO;AAFR,aAfI,EAkBJ;AACC,qBAAK,EADN;AAEC,uBAAO;AAFR,aAlBI,CAAP;AAsBH;;;;;;kBA+RU,a;;;;;;;;;;;;;;IC5TT,iB;AACF,+BAAY,OAAZ,EAAqB;AAAA;;AACjB,aAAK,OAAL,GAAe,OAAf;AACA,aAAK,OAAL,CAAa,UAAb,GAA0B,IAA1B;AACA,aAAK,IAAL,GAAY,KAAK,OAAL,CAAa,IAAzB;AACH;;;;6BAEI,I,EAAM;AAAA;;AACP,iBAAK,cAAL,GAAsB,KAAK,OAAL,CAAa,MAAb,CAAoB,KAApB,CAA0B,IAA1B,CAA+B,IAA/B,EAAqC,IAArC,CAAtB;AACA,iBAAK,wBAAL,GAAgC,KAAK,QAAL,CAAc,YAAM;AAChD,oBAAI,MAAK,OAAL,CAAa,QAAjB,EAA2B;AACvB,0BAAK,OAAL,CAAa,WAAb,CAAyB,MAAK,OAAL,CAAa,OAAb,CAAqB,OAA9C,EAAuD,KAAvD;AACH;AACJ,aAJ+B,EAI7B,GAJ6B,EAIxB,KAJwB,CAAhC;AAKA,iBAAK,iBAAL,GAAyB,KAAK,QAAL,CAAc,YAAM;AACzC,oBAAI,MAAK,OAAL,CAAa,QAAjB,EAA2B;AACvB,0BAAK,OAAL,CAAa,KAAb,CAAmB,mBAAnB,CAAuC,IAAvC;AACH;AACJ,aAJwB,EAItB,GAJsB,EAIjB,KAJiB,CAAzB;;AAMA;AACA,iBAAK,OAAL,CAAa,aAAb,CAA2B,gBAA3B,CAA4C,eAA5C,EACI,KAAK,cADT,EACyB,KADzB;AAEA,iBAAK,OAAL,CAAa,aAAb,CAA2B,gBAA3B,CAA4C,WAA5C,EACI,KAAK,cADT,EACyB,KADzB;;AAGA,iBAAK,OAAL,CAAa,KAAb,CAAmB,SAAnB,GAA+B,gBAA/B,CAAgD,QAAhD,EAA0D,KAAK,iBAA/D;;AAEA,gBAAI,KAAK,aAAT,EAAwB;AACpB,qBAAK,aAAL,CAAmB,gBAAnB,CAAoC,QAApC,EAA8C,KAAK,wBAAnD,EAA6E,KAA7E;AACH,aAFD,MAEO;AACH,qBAAK,OAAL,CAAa,KAAb,CAAmB,SAAnB,GAA+B,gBAA/B,CAAgD,QAAhD,EAA0D,KAAK,wBAA/D;AACH;AAEJ;;;+BAEM,I,EAAM;AACT,iBAAK,OAAL,CAAa,KAAb,CAAmB,WAAnB,GAAiC,mBAAjC,CAAqD,WAArD,EACI,KAAK,cADT,EACyB,KADzB;AAEA,iBAAK,OAAL,CAAa,KAAb,CAAmB,WAAnB,GAAiC,mBAAjC,CAAqD,eAArD,EACI,KAAK,cADT,EACyB,KADzB;AAEA,iBAAK,OAAL,CAAa,KAAb,CAAmB,SAAnB,GAA+B,mBAA/B,CAAmD,QAAnD,EAA6D,KAAK,iBAAlE;;AAEA,gBAAI,KAAK,aAAT,EAAwB;AACpB,qBAAK,aAAL,CAAmB,mBAAnB,CAAuC,QAAvC,EAAiD,KAAK,wBAAtD,EAAgF,KAAhF;AACH,aAFD,MAEO;AACH,qBAAK,OAAL,CAAa,KAAb,CAAmB,SAAnB,GAA+B,mBAA/B,CAAmD,QAAnD,EAA6D,KAAK,wBAAlE;AACH;AACJ;;;iCAEQ,I,EAAM,I,EAAM,S,EAAW;AAAA;AAAA;;AAC5B,gBAAI,OAAJ;AACA,mBAAO,YAAM;AACT,oBAAI,UAAU,MAAd;AAAA,oBACI,OAAO,UADX;AAEA,oBAAI,QAAQ,SAAR,KAAQ,GAAM;AACd,8BAAU,IAAV;AACA,wBAAI,CAAC,SAAL,EAAgB,KAAK,KAAL,CAAW,OAAX,EAAoB,IAApB;AACnB,iBAHD;AAIA,oBAAI,UAAU,aAAa,CAAC,OAA5B;AACA,6BAAa,OAAb;AACA,0BAAU,WAAW,KAAX,EAAkB,IAAlB,CAAV;AACA,oBAAI,OAAJ,EAAa,KAAK,KAAL,CAAW,OAAX,EAAoB,IAApB;AAChB,aAXD;AAYH;;;;;;kBAIU,iB;;;;;;;;;;;;;;ACpEf;IACM,Y;AACF,0BAAY,OAAZ,EAAqB;AAAA;;AACjB,aAAK,OAAL,GAAe,OAAf;AACA,aAAK,OAAL,CAAa,KAAb,GAAqB,IAArB;AACH;;;;sCAEa;;AAEV,gBAAI,gBAAgB,IAApB;AACA,gBAAI,KAAK,OAAL,CAAa,OAAb,CAAqB,OAArB,IAAgC,KAAK,OAAL,CAAa,OAAb,CAAqB,OAArB,CAA6B,aAAjE,EACI,gBAAgB,KAAK,OAAL,CAAa,OAAb,CAAqB,OAArB,CAA6B,aAA7C;;AAEJ,gBAAI,KAAK,OAAL,CAAa,OAAb,CAAqB,OAArB,IAAgC,CAAC,KAAK,OAAL,CAAa,OAAb,CAAqB,OAArB,CAA6B,aAAlE,EACI,gBAAgB,KAAK,OAAL,CAAa,OAAb,CAAqB,OAArB,CAA6B,MAA7B,CAAoC,aAApC,CAAkD,KAAK,OAAL,CAAa,OAAb,CAAqB,OAArB,CAA6B,OAA7B,CAAqC,WAArC,GAAmD,aAArG,CAAhB;;AAEJ,gBAAI,aAAJ,EAAmB;AACf,uBAAO,aAAP;AACH;;AAED,mBAAO,QAAP;AACH;;;6CAEoB;AACjB,gBAAI,cAAc,KAAK,SAAL,EAAlB;;AAEA,mBAAO,YAAY,YAAZ,EAAP;AACH;;;oCAEW;AACR,gBAAI,MAAM,KAAK,WAAL,EAAV;AACA,gBAAI,cAAe,IAAI,WAAL,GAChB,IAAI,WADY,GAEhB,IAAI,YAFN;;AAIA,gBAAI,WAAJ,EAAiB;AACb,uBAAO,WAAP;AACH;;AAED,mBAAO,MAAP;AACH;;;4CAEmB,Q,EAAU;AAAA;;AAC1B,gBAAI,UAAU,KAAK,OAAL,CAAa,OAA3B;AAAA,gBACI,oBADJ;;AAGA,gBAAI,OAAO,KAAK,cAAL,CAAoB,KAApB,EAA2B,KAAK,OAAL,CAAa,gBAAxC,EAA0D,IAA1D,EAAgE,KAAK,OAAL,CAAa,WAA7E,EAA0F,KAAK,OAAL,CAAa,gBAAvG,CAAX;;AAEA,gBAAI,OAAO,IAAP,KAAgB,WAApB,EAAiC;;AAE7B,oBAAI,CAAC,KAAK,OAAL,CAAa,YAAlB,EAAgC;AAC5B,yBAAK,OAAL,CAAa,IAAb,CAAkB,KAAlB,CAAwB,OAAxB;AACA;AACH;;AAED,oBAAI,CAAC,KAAK,iBAAL,CAAuB,QAAQ,OAA/B,CAAL,EAA8C;AAC1C,kCAAc,KAAK,mCAAL,CAAyC,KAAK,OAAL,CAAa,OAAb,CAAqB,OAA9D,EACV,KAAK,eADK,CAAd;AAEH,iBAHD,MAIK;AACD,kCAAc,KAAK,+BAAL,CAAqC,KAAK,eAA1C,CAAd;AACH;;AAGD,qBAAK,OAAL,CAAa,IAAb,CAAkB,KAAlB,CAAwB,OAAxB,aAA0C,YAAY,GAAtD,wDACiC,YAAY,IAD7C,yDAEkC,YAAY,KAF9C,0DAGmC,YAAY,MAH/C;;AAQA,oBAAI,YAAY,IAAZ,KAAqB,MAAzB,EAAiC;AAC7B,yBAAK,OAAL,CAAa,IAAb,CAAkB,KAAlB,CAAwB,IAAxB,GAA+B,MAA/B;AACH;;AAED,oBAAI,YAAY,GAAZ,KAAoB,MAAxB,EAAgC;AAC5B,yBAAK,OAAL,CAAa,IAAb,CAAkB,KAAlB,CAAwB,GAAxB,GAA8B,MAA9B;AACH;;AAED,oBAAI,QAAJ,EAAc,KAAK,cAAL;;AAEd,2BAAW,YAAM;AACb,wBAAI,iBAAiB;AAClB,+BAAO,MAAK,OAAL,CAAa,IAAb,CAAkB,WADP;AAElB,gCAAQ,MAAK,OAAL,CAAa,IAAb,CAAkB;AAFR,qBAArB;AAIA,wBAAI,kBAAkB,MAAK,eAAL,CAAqB,WAArB,EAAkC,cAAlC,CAAtB;;AAEA,wBAAI,8BAA8B,MAAK,kBAAL,GAA0B,UAA1B,GAAuC,eAAe,KAAtD,KAAgE,gBAAgB,IAAhB,IAAwB,gBAAgB,KAAxG,CAAlC;AACA,wBAAI,4BAA4B,MAAK,kBAAL,GAA0B,WAA1B,GAAwC,eAAe,MAAvD,KAAkE,gBAAgB,GAAhB,IAAuB,gBAAgB,MAAzG,CAAhC;AACA,wBAAI,+BAA+B,yBAAnC,EAA8D;AAC1D,8BAAK,OAAL,CAAa,IAAb,CAAkB,KAAlB,CAAwB,OAAxB,GAAkC,eAAlC;AACA,8BAAK,mBAAL,CAAyB,QAAzB;AACH;AACJ,iBAbD,EAaG,CAbH;AAeH,aAjDD,MAiDO;AACH,qBAAK,OAAL,CAAa,IAAb,CAAkB,KAAlB,CAAwB,OAAxB,GAAkC,eAAlC;AACH;AACJ;;;sCAEa,a,EAAe,I,EAAM,M,EAAQ;AACvC,gBAAI,cAAJ;AACA,gBAAI,OAAO,aAAX;;AAEA,gBAAI,IAAJ,EAAU;AACN,qBAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,KAAK,MAAzB,EAAiC,GAAjC,EAAsC;AAClC,2BAAO,KAAK,UAAL,CAAgB,KAAK,CAAL,CAAhB,CAAP;AACA,wBAAI,SAAS,SAAb,EAAwB;AACpB;AACH;AACD,2BAAO,KAAK,MAAL,GAAc,MAArB,EAA6B;AACzB,kCAAU,KAAK,MAAf;AACA,+BAAO,KAAK,WAAZ;AACH;AACD,wBAAI,KAAK,UAAL,CAAgB,MAAhB,KAA2B,CAA3B,IAAgC,CAAC,KAAK,MAA1C,EAAkD;AAC9C,+BAAO,KAAK,eAAZ;AACH;AACJ;AACJ;AACD,gBAAI,MAAM,KAAK,kBAAL,EAAV;;AAEA,oBAAQ,KAAK,WAAL,GAAmB,WAAnB,EAAR;AACA,kBAAM,QAAN,CAAe,IAAf,EAAqB,MAArB;AACA,kBAAM,MAAN,CAAa,IAAb,EAAmB,MAAnB;AACA,kBAAM,QAAN,CAAe,IAAf;;AAEA,gBAAI;AACA,oBAAI,eAAJ;AACH,aAFD,CAEE,OAAO,KAAP,EAAc,CAAE;;AAElB,gBAAI,QAAJ,CAAa,KAAb;AACA,0BAAc,KAAd;AACH;;;2CAEkB,I,EAAM,mB,EAAqB,gB,EAAkB,a,EAAe,I,EAAM;AACjF,gBAAI,OAAO,KAAK,cAAL,CAAoB,IAApB,EAA0B,gBAA1B,EAA4C,mBAA5C,EAAiE,KAAK,OAAL,CAAa,WAA9E,EAA2F,KAAK,OAAL,CAAa,gBAAxG,CAAX;;AAEA,gBAAI,SAAS,SAAb,EAAwB;AACpB,oBAAI,UAAU,KAAK,OAAL,CAAa,OAA3B;AACA,oBAAI,eAAe,IAAI,WAAJ,CAAgB,kBAAhB,EAAoC;AACnD,4BAAQ;AACJ,8BAAM,IADF;AAEJ,kCAAU,OAFN;AAGJ,iCAAS,IAHL;AAIJ,+BAAO;AAJH;AAD2C,iBAApC,CAAnB;;AASA,oBAAI,CAAC,KAAK,iBAAL,CAAuB,QAAQ,OAA/B,CAAL,EAA8C;AAC1C,wBAAI,UAAU,KAAK,OAAL,CAAa,OAAb,CAAqB,OAAnC;AACA,wBAAI,aAAa,OAAO,KAAK,OAAL,CAAa,iBAApB,IAAyC,QAAzC,GACX,KAAK,OAAL,CAAa,iBADF,GAEX,GAFN;AAGA,4BAAQ,UAAR;AACA,wBAAI,WAAW,KAAK,eAApB;AACA,wBAAI,SAAS,KAAK,eAAL,GAAuB,KAAK,WAAL,CAAiB,MAAxC,GAAiD,WAAW,MAAzE;AACA,4BAAQ,KAAR,GAAgB,QAAQ,KAAR,CAAc,SAAd,CAAwB,CAAxB,EAA2B,QAA3B,IAAuC,IAAvC,GACZ,QAAQ,KAAR,CAAc,SAAd,CAAwB,MAAxB,EAAgC,QAAQ,KAAR,CAAc,MAA9C,CADJ;AAEA,4BAAQ,cAAR,GAAyB,WAAW,KAAK,MAAzC;AACA,4BAAQ,YAAR,GAAuB,WAAW,KAAK,MAAvC;AACH,iBAZD,MAYO;AACH;AACA,wBAAI,cAAa,OAAO,KAAK,OAAL,CAAa,iBAApB,IAAyC,QAAzC,GACX,KAAK,OAAL,CAAa,iBADF,GAEX,MAFN;AAGA,4BAAQ,WAAR;AACA,yBAAK,SAAL,CAAe,IAAf,EAAqB,KAAK,eAA1B,EACI,KAAK,eAAL,GAAuB,KAAK,WAAL,CAAiB,MAAxC,GAAiD,CAAC,KAAK,OAAL,CAAa,gBADnE;AAEH;;AAED,wBAAQ,OAAR,CAAgB,aAAhB,CAA8B,YAA9B;AACH;AACJ;;;kCAES,I,EAAM,Q,EAAU,M,EAAQ;AAC9B,gBAAI,cAAJ;AAAA,gBAAW,YAAX;AACA,kBAAM,KAAK,kBAAL,EAAN;AACA,oBAAQ,KAAK,WAAL,GAAmB,WAAnB,EAAR;AACA,kBAAM,QAAN,CAAe,IAAI,UAAnB,EAA+B,QAA/B;AACA,kBAAM,MAAN,CAAa,IAAI,UAAjB,EAA6B,MAA7B;AACA,kBAAM,cAAN;;AAEA,gBAAI,KAAK,KAAK,WAAL,GAAmB,aAAnB,CAAiC,KAAjC,CAAT;AACA,eAAG,SAAH,GAAe,IAAf;AACA,gBAAI,OAAO,KAAK,WAAL,GAAmB,sBAAnB,EAAX;AAAA,gBACI,aADJ;AAAA,gBACU,iBADV;AAEA,mBAAQ,OAAO,GAAG,UAAlB,EAA+B;AAC3B,2BAAW,KAAK,WAAL,CAAiB,IAAjB,CAAX;AACH;AACD,kBAAM,UAAN,CAAiB,IAAjB;;AAEA;AACA,gBAAI,QAAJ,EAAc;AACV,wBAAQ,MAAM,UAAN,EAAR;AACA,sBAAM,aAAN,CAAoB,QAApB;AACA,sBAAM,QAAN,CAAe,IAAf;AACA,oBAAI,eAAJ;AACA,oBAAI,QAAJ,CAAa,KAAb;AACH;AACJ;;;gDAEuB,O,EAAS;AAC7B,gBAAI,QAAQ,UAAR,KAAuB,IAA3B,EAAiC;AAC7B,uBAAO,CAAP;AACH;;AAED,iBAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,QAAQ,UAAR,CAAmB,UAAnB,CAA8B,MAAlD,EAA0D,GAA1D,EAA+D;AAC3D,oBAAI,OAAO,QAAQ,UAAR,CAAmB,UAAnB,CAA8B,CAA9B,CAAX;;AAEA,oBAAI,SAAS,OAAb,EAAsB;AAClB,2BAAO,CAAP;AACH;AACJ;AACJ;;;uDAE8B,G,EAAK;AAChC,gBAAI,MAAM,KAAK,kBAAL,EAAV;AACA,gBAAI,WAAW,IAAI,UAAnB;AACA,gBAAI,OAAO,EAAX;AACA,gBAAI,eAAJ;;AAEA,gBAAI,YAAY,IAAhB,EAAsB;AAClB,oBAAI,UAAJ;AACA,oBAAI,KAAK,SAAS,eAAlB;AACA,uBAAO,aAAa,IAAb,IAAqB,OAAO,MAAnC,EAA2C;AACvC,wBAAI,KAAK,uBAAL,CAA6B,QAA7B,CAAJ;AACA,yBAAK,IAAL,CAAU,CAAV;AACA,+BAAW,SAAS,UAApB;AACA,wBAAI,aAAa,IAAjB,EAAuB;AACnB,6BAAK,SAAS,eAAd;AACH;AACJ;AACD,qBAAK,OAAL;;AAEA;AACA,yBAAS,IAAI,UAAJ,CAAe,CAAf,EAAkB,WAA3B;;AAEA,uBAAO;AACH,8BAAU,QADP;AAEH,0BAAM,IAFH;AAGH,4BAAQ;AAHL,iBAAP;AAKH;AACJ;;;2DAEkC;AAC/B,gBAAI,UAAU,KAAK,OAAL,CAAa,OAA3B;AAAA,gBACI,OAAO,EADX;;AAGA,gBAAI,CAAC,KAAK,iBAAL,CAAuB,QAAQ,OAA/B,CAAL,EAA8C;AAC1C,oBAAI,gBAAgB,KAAK,OAAL,CAAa,OAAb,CAAqB,OAAzC;AACA,oBAAI,aAAJ,EAAmB;AACf,wBAAI,WAAW,cAAc,cAA7B;AACA,wBAAI,cAAc,KAAd,IAAuB,YAAY,CAAvC,EAA0C;AACtC,+BAAO,cAAc,KAAd,CAAoB,SAApB,CAA8B,CAA9B,EAAiC,QAAjC,CAAP;AACH;AACJ;AAEJ,aATD,MASO;AACH,oBAAI,eAAe,KAAK,kBAAL,GAA0B,UAA7C;;AAEA,oBAAI,gBAAgB,IAApB,EAA0B;AACtB,wBAAI,qBAAqB,aAAa,WAAtC;AACA,wBAAI,oBAAoB,KAAK,kBAAL,GAA0B,UAA1B,CAAqC,CAArC,EAAwC,WAAhE;;AAEA,wBAAI,sBAAsB,qBAAqB,CAA/C,EAAkD;AAC9C,+BAAO,mBAAmB,SAAnB,CAA6B,CAA7B,EAAgC,iBAAhC,CAAP;AACH;AACJ;AACJ;;AAED,mBAAO,IAAP;AACH;;;0CAEiB,I,EAAM;AACpB,mBAAO,KAAK,OAAL,CAAa,SAAb,EAAwB,GAAxB,CAAP,CADoB,CACiB;AACrC,gBAAI,aAAa,KAAK,KAAL,CAAW,GAAX,CAAjB;AACA,gBAAI,cAAc,WAAW,MAAX,GAAoB,CAAtC;AACA,mBAAO,WAAW,WAAX,EAAwB,IAAxB,EAAP;AACH;;;uCAEc,iB,EAAmB,gB,EAAkB,mB,EAAqB,W,EAAa,c,EAAgB;AAAA;;AAClG,gBAAI,MAAM,KAAK,OAAL,CAAa,OAAvB;AACA,gBAAI,iBAAJ;AAAA,gBAAc,aAAd;AAAA,gBAAoB,eAApB;;AAEA,gBAAI,CAAC,KAAK,iBAAL,CAAuB,IAAI,OAA3B,CAAL,EAA0C;AACtC,2BAAW,KAAK,OAAL,CAAa,OAAb,CAAqB,OAAhC;AACH,aAFD,MAEO;AACH,oBAAI,gBAAgB,KAAK,8BAAL,CAAoC,GAApC,CAApB;;AAEA,oBAAI,aAAJ,EAAmB;AACf,+BAAW,cAAc,QAAzB;AACA,2BAAO,cAAc,IAArB;AACA,6BAAS,cAAc,MAAvB;AACH;AACJ;;AAED,gBAAI,iBAAiB,KAAK,gCAAL,EAArB;AACA,gBAAI,2BAA2B,KAAK,iBAAL,CAAuB,cAAvB,CAA/B;;AAEA,gBAAI,cAAJ,EAAoB;AAChB,uBAAO;AACH,qCAAiB,eAAe,MAAf,GAAwB,yBAAyB,MAD/D;AAEH,iCAAa,wBAFV;AAGH,4CAAwB,QAHrB;AAIH,yCAAqB,IAJlB;AAKH,2CAAuB;AALpB,iBAAP;AAOH;;AAED,gBAAI,mBAAmB,SAAnB,IAAgC,mBAAmB,IAAvD,EAA6D;AACzD,oBAAI,2BAA2B,CAAC,CAAhC;AACA,oBAAI,oBAAJ;;AAEA,qBAAK,OAAL,CAAa,UAAb,CAAwB,OAAxB,CAAgC,kBAAU;AACtC,wBAAI,IAAI,OAAO,OAAf;AACA,wBAAI,MAAM,OAAO,mBAAP,GACN,OAAK,yBAAL,CAAgC,cAAhC,EAAgD,CAAhD,CADM,GAEN,eAAe,WAAf,CAA2B,CAA3B,CAFJ;;AAIA,wBAAI,MAAM,wBAAV,EAAoC;AAChC,mDAA2B,GAA3B;AACA,sCAAc,CAAd;AACA,8CAAsB,OAAO,mBAA7B;AACH;AACJ,iBAXD;;AAaA,oBAAI,4BAA4B,CAA5B,KAEI,6BAA6B,CAA7B,IACA,CAAC,mBADD,IAEA,YAAY,IAAZ,CACI,eAAe,SAAf,CACI,2BAA2B,CAD/B,EAEI,wBAFJ,CADJ,CAJJ,CAAJ,EAUE;AACE,wBAAI,wBAAwB,eAAe,SAAf,CAAyB,2BAA2B,CAApD,EACxB,eAAe,MADS,CAA5B;;AAGA,kCAAc,eAAe,SAAf,CAAyB,wBAAzB,EAAmD,2BAA2B,CAA9E,CAAd;AACA,wBAAI,mBAAmB,sBAAsB,SAAtB,CAAgC,CAAhC,EAAmC,CAAnC,CAAvB;AACA,wBAAI,eAAe,sBAAsB,MAAtB,GAA+B,CAA/B,KAEX,qBAAqB,GAArB,IACA,qBAAqB,MAHV,CAAnB;AAKA,wBAAI,gBAAJ,EAAsB;AAClB,gDAAwB,sBAAsB,IAAtB,EAAxB;AACH;;AAED,wBAAI,QAAQ,cAAc,SAAd,GAA0B,WAAtC;;AAEA,yBAAK,OAAL,CAAa,gBAAb,GAAgC,MAAM,IAAN,CAAW,qBAAX,CAAhC;;AAEA,wBAAI,CAAC,YAAD,KAAkB,qBAAqB,CAAE,MAAM,IAAN,CAAW,qBAAX,CAAzC,CAAJ,EAAkF;AAC9E,+BAAO;AACH,6CAAiB,wBADd;AAEH,yCAAa,qBAFV;AAGH,oDAAwB,QAHrB;AAIH,iDAAqB,IAJlB;AAKH,mDAAuB,MALpB;AAMH,gDAAoB;AANjB,yBAAP;AAQH;AACJ;AACJ;AACJ;;;kDAEyB,G,EAAK,I,EAAM;AACjC,gBAAI,cAAc,IAAI,KAAJ,CAAU,EAAV,EAAc,OAAd,GAAwB,IAAxB,CAA6B,EAA7B,CAAlB;AACA,gBAAI,QAAQ,CAAC,CAAb;;AAEA,iBAAK,IAAI,OAAO,CAAX,EAAc,MAAM,IAAI,MAA7B,EAAqC,OAAO,GAA5C,EAAiD,MAAjD,EAAyD;AACrD,oBAAI,YAAY,SAAS,IAAI,MAAJ,GAAa,CAAtC;AACA,oBAAI,eAAe,KAAK,IAAL,CAAU,YAAY,OAAO,CAAnB,CAAV,CAAnB;AACA,oBAAI,QAAQ,SAAS,YAAY,IAAZ,CAArB;;AAEA,oBAAI,UAAU,aAAa,YAAvB,CAAJ,EAA0C;AACtC,4BAAQ,IAAI,MAAJ,GAAa,CAAb,GAAiB,IAAzB;AACA;AACH;AACJ;;AAED,mBAAO,KAAP;AACH;;;0CAEiB,O,EAAS;AACvB,mBAAO,QAAQ,QAAR,KAAqB,OAArB,IAAgC,QAAQ,QAAR,KAAqB,UAA5D;AACH;;;wCAEe,W,EAAa,c,EAAgB;AACzC,gBAAI,eAAe,KAAK,kBAAL,EAAnB;AACA,gBAAI,cAAc,aAAa,UAA/B;AACA,gBAAI,eAAe,aAAa,WAAhC;AACA,gBAAI,MAAM,SAAS,eAAnB;AACA,gBAAI,aAAa,CAAC,aAAa,WAAb,IAA4B,IAAI,UAAjC,KAAgD,IAAI,UAAJ,IAAkB,CAAlE,CAAjB;AACA,gBAAI,YAAY,CAAC,aAAa,WAAb,IAA4B,IAAI,SAAjC,KAA+C,IAAI,SAAJ,IAAiB,CAAhE,CAAhB;;AAEA,gBAAI,UAAU,OAAO,YAAY,GAAnB,KAA2B,QAA3B,GAAsC,YAAY,GAAlD,GAAwD,YAAY,YAAZ,GAA2B,YAAY,MAAvC,GAAgD,eAAe,MAArI;AACA,gBAAI,YAAY,OAAO,YAAY,KAAnB,KAA6B,QAA7B,GAAwC,YAAY,KAApD,GAA4D,YAAY,IAAZ,GAAmB,eAAe,KAA9G;AACA,gBAAI,aAAa,OAAO,YAAY,MAAnB,KAA8B,QAA9B,GAAyC,YAAY,MAArD,GAA8D,YAAY,GAAZ,GAAkB,eAAe,MAAhH;AACA,gBAAI,WAAW,OAAO,YAAY,IAAnB,KAA4B,QAA5B,GAAuC,YAAY,IAAnD,GAA0D,aAAa,WAAb,GAA2B,YAAY,KAAvC,GAA+C,eAAe,KAAvI;;AAEA,mBAAO;AACH,qBAAK,UAAU,KAAK,KAAL,CAAW,SAAX,CADZ;AAEH,uBAAO,YAAY,KAAK,IAAL,CAAU,aAAa,WAAvB,CAFhB;AAGH,wBAAQ,aAAa,KAAK,IAAL,CAAU,YAAY,YAAtB,CAHlB;AAIH,sBAAM,WAAW,KAAK,KAAL,CAAW,UAAX;AAJd,aAAP;AAMH;;;4CAEmB;AAChB;AACA;AACA;AACA,gBAAI,aAAa;AACb,uBAAO,IADM;AAEb,wBAAQ;AAFK,aAAjB;;AAKA,iBAAK,OAAL,CAAa,IAAb,CAAkB,KAAlB,CAAwB,OAAxB;AAMD,uBAAW,KAAX,GAAmB,KAAK,OAAL,CAAa,IAAb,CAAkB,WAArC;AACA,uBAAW,MAAX,GAAoB,KAAK,OAAL,CAAa,IAAb,CAAkB,YAAtC;;AAEA,iBAAK,OAAL,CAAa,IAAb,CAAkB,KAAlB,CAAwB,OAAxB;;AAEA,mBAAO,UAAP;AACF;;;4DAEmC,O,EAAS,Q,EAAU,O,EAAS;AAC5D,gBAAI,aAAa,CAAC,WAAD,EAAc,WAAd,EAA2B,OAA3B,EAAoC,QAApC,EAA8C,WAA9C,EACb,WADa,EACA,gBADA,EACkB,kBADlB,EAEb,mBAFa,EAEQ,iBAFR,EAE2B,YAF3B,EAGb,cAHa,EAGG,eAHH,EAGoB,aAHpB,EAIb,WAJa,EAIA,aAJA,EAIe,YAJf,EAI6B,aAJ7B,EAKb,UALa,EAKD,gBALC,EAKiB,YALjB,EAK+B,YAL/B,EAMb,WANa,EAMA,eANA,EAMiB,YANjB,EAOb,gBAPa,EAOK,eAPL,EAOsB,aAPtB,CAAjB;;AAUA,gBAAI,YAAa,KAAK,kBAAL,GAA0B,eAA1B,KAA8C,IAA/D;;AAEA,gBAAI,MAAM,KAAK,WAAL,GAAmB,aAAnB,CAAiC,KAAjC,CAAV;AACA,gBAAI,EAAJ,GAAS,0CAAT;AACA,iBAAK,WAAL,GAAmB,IAAnB,CAAwB,WAAxB,CAAoC,GAApC;;AAEA,gBAAI,QAAQ,IAAI,KAAhB;AACA,gBAAI,WAAW,KAAK,kBAAL,GAA0B,gBAA1B,GAA6C,iBAAiB,OAAjB,CAA7C,GAAyE,QAAQ,YAAhG;;AAEA,kBAAM,UAAN,GAAmB,UAAnB;AACA,gBAAI,QAAQ,QAAR,KAAqB,OAAzB,EAAkC;AAC9B,sBAAM,QAAN,GAAiB,YAAjB;AACH;;AAED;AACA,kBAAM,QAAN,GAAiB,UAAjB;AACA,kBAAM,UAAN,GAAmB,QAAnB;;AAEA;AACA,uBAAW,OAAX,CAAmB,gBAAQ;AACvB,sBAAM,IAAN,IAAc,SAAS,IAAT,CAAd;AACH,aAFD;;AAIA,gBAAI,SAAJ,EAAe;AACX,sBAAM,KAAN,GAAkB,SAAS,SAAS,KAAlB,IAA2B,CAA7C;AACA,oBAAI,QAAQ,YAAR,GAAuB,SAAS,SAAS,MAAlB,CAA3B,EACI,MAAM,SAAN,GAAkB,QAAlB;AACP,aAJD,MAIO;AACH,sBAAM,QAAN,GAAiB,QAAjB;AACH;;AAED,gBAAI,WAAJ,GAAkB,QAAQ,KAAR,CAAc,SAAd,CAAwB,CAAxB,EAA2B,QAA3B,CAAlB;;AAEA,gBAAI,QAAQ,QAAR,KAAqB,OAAzB,EAAkC;AAC9B,oBAAI,WAAJ,GAAkB,IAAI,WAAJ,CAAgB,OAAhB,CAAwB,KAAxB,EAA+B,GAA/B,CAAlB;AACH;;AAED,gBAAI,OAAO,KAAK,WAAL,GAAmB,aAAnB,CAAiC,MAAjC,CAAX;AACA,iBAAK,WAAL,GAAmB,QAAQ,KAAR,CAAc,SAAd,CAAwB,QAAxB,KAAqC,GAAxD;AACA,gBAAI,WAAJ,CAAgB,IAAhB;;AAEA,gBAAI,OAAO,QAAQ,qBAAR,EAAX;AACA,gBAAI,MAAM,SAAS,eAAnB;AACA,gBAAI,aAAa,CAAC,KAAK,kBAAL,GAA0B,WAA1B,IAAyC,IAAI,UAA9C,KAA6D,IAAI,UAAJ,IAAkB,CAA/E,CAAjB;AACA,gBAAI,YAAY,CAAC,KAAK,kBAAL,GAA0B,WAA1B,IAAyC,IAAI,SAA9C,KAA4D,IAAI,SAAJ,IAAiB,CAA7E,CAAhB;;AAEA,gBAAI,cAAc;AACd,qBAAK,KAAK,GAAL,GAAW,SAAX,GAAuB,KAAK,SAA5B,GAAwC,SAAS,SAAS,cAAlB,CAAxC,GAA4E,SAAS,SAAS,QAAlB,CAA5E,GAA0G,QAAQ,SADzG;AAEd,sBAAM,KAAK,IAAL,GAAY,UAAZ,GAAyB,KAAK,UAA9B,GAA2C,SAAS,SAAS,eAAlB;AAFnC,aAAlB;;AAKA,gBAAI,cAAc,KAAK,kBAAL,GAA0B,UAA5C;AACA,gBAAI,eAAe,KAAK,kBAAL,GAA0B,WAA7C;;AAEA,gBAAI,iBAAiB,KAAK,iBAAL,EAArB;AACA,gBAAI,kBAAkB,KAAK,eAAL,CAAqB,WAArB,EAAkC,cAAlC,CAAtB;;AAEA,gBAAI,gBAAgB,KAApB,EAA2B;AACvB,4BAAY,KAAZ,GAAoB,cAAc,YAAY,IAA9C;AACA,4BAAY,IAAZ,GAAmB,MAAnB;AACH;;AAED,gBAAI,eAAe,KAAK,OAAL,CAAa,aAAb,GACb,KAAK,OAAL,CAAa,aAAb,CAA2B,YADd,GAEb,KAAK,WAAL,GAAmB,IAAnB,CAAwB,YAF9B;;AAIA,gBAAI,gBAAgB,MAApB,EAA4B;AACxB,oBAAI,aAAa,KAAK,OAAL,CAAa,aAAb,GACX,KAAK,OAAL,CAAa,aAAb,CAA2B,qBAA3B,EADW,GAEX,KAAK,WAAL,GAAmB,IAAnB,CAAwB,qBAAxB,EAFN;AAGA,oBAAI,uBAAuB,gBAAgB,eAAe,WAAW,GAA1C,CAA3B;;AAEA,4BAAY,MAAZ,GAAqB,wBAAwB,eAAe,KAAK,GAApB,GAA0B,KAAK,SAAvD,CAArB;AACA,4BAAY,GAAZ,GAAkB,MAAlB;AACH;;AAED,8BAAkB,KAAK,eAAL,CAAqB,WAArB,EAAkC,cAAlC,CAAlB;AACA,gBAAI,gBAAgB,IAApB,EAA0B;AACtB,4BAAY,IAAZ,GAAmB,cAAc,eAAe,KAA7B,GACb,aAAa,WAAb,GAA2B,eAAe,KAD7B,GAEb,UAFN;AAGA,uBAAO,YAAY,KAAnB;AACH;AACD,gBAAI,gBAAgB,GAApB,EAAyB;AACrB,4BAAY,GAAZ,GAAkB,eAAe,eAAe,MAA9B,GACZ,YAAY,YAAZ,GAA2B,eAAe,MAD9B,GAEZ,SAFN;AAGA,uBAAO,YAAY,MAAnB;AACH;;AAED,iBAAK,WAAL,GAAmB,IAAnB,CAAwB,WAAxB,CAAoC,GAApC;AACA,mBAAO,WAAP;AACH;;;wDAE+B,oB,EAAsB;AAClD,gBAAI,iBAAiB,GAArB;AACA,gBAAI,iBAAJ;AAAA,gBAAc,oBAAkB,IAAI,IAAJ,GAAW,OAAX,EAAlB,SAA0C,KAAK,MAAL,GAAc,QAAd,GAAyB,MAAzB,CAAgC,CAAhC,CAAxD;AACA,gBAAI,cAAJ;AACA,gBAAI,MAAM,KAAK,kBAAL,EAAV;AACA,gBAAI,YAAY,IAAI,UAAJ,CAAe,CAAf,CAAhB;;AAEA,oBAAQ,KAAK,WAAL,GAAmB,WAAnB,EAAR;AACA,kBAAM,QAAN,CAAe,IAAI,UAAnB,EAA+B,oBAA/B;AACA,kBAAM,MAAN,CAAa,IAAI,UAAjB,EAA6B,oBAA7B;;AAEA,kBAAM,QAAN,CAAe,KAAf;;AAEA;AACA,uBAAW,KAAK,WAAL,GAAmB,aAAnB,CAAiC,MAAjC,CAAX;AACA,qBAAS,EAAT,GAAc,QAAd;;AAEA,qBAAS,WAAT,CAAqB,KAAK,WAAL,GAAmB,cAAnB,CAAkC,cAAlC,CAArB;AACA,kBAAM,UAAN,CAAiB,QAAjB;AACA,gBAAI,eAAJ;AACA,gBAAI,QAAJ,CAAa,SAAb;;AAEA,gBAAI,OAAO,SAAS,qBAAT,EAAX;AACA,gBAAI,MAAM,SAAS,eAAnB;AACA,gBAAI,aAAa,CAAC,KAAK,kBAAL,GAA0B,WAA1B,IAAyC,IAAI,UAA9C,KAA6D,IAAI,UAAJ,IAAkB,CAA/E,CAAjB;AACA,gBAAI,YAAY,CAAC,KAAK,kBAAL,GAA0B,WAA1B,IAAyC,IAAI,SAA9C,KAA4D,IAAI,SAAJ,IAAiB,CAA7E,CAAhB;AACA,gBAAI,cAAc;AACd,sBAAM,KAAK,IAAL,GAAY,UADJ;AAEd,qBAAK,KAAK,GAAL,GAAW,SAAS,YAApB,GAAmC;AAF1B,aAAlB;AAIA,gBAAI,cAAc,KAAK,kBAAL,GAA0B,UAA5C;AACA,gBAAI,eAAe,KAAK,kBAAL,GAA0B,WAA7C;;AAEA,gBAAI,iBAAiB,KAAK,iBAAL,EAArB;AACA,gBAAI,kBAAkB,KAAK,eAAL,CAAqB,WAArB,EAAkC,cAAlC,CAAtB;;AAEA,gBAAI,gBAAgB,KAApB,EAA2B;AACvB,4BAAY,IAAZ,GAAmB,MAAnB;AACA,4BAAY,KAAZ,GAAoB,cAAc,KAAK,IAAnB,GAA0B,UAA9C;AACH;;AAED,gBAAI,eAAe,KAAK,OAAL,CAAa,aAAb,GACb,KAAK,OAAL,CAAa,aAAb,CAA2B,YADd,GAEb,KAAK,WAAL,GAAmB,IAAnB,CAAwB,YAF9B;;AAIA,gBAAI,gBAAgB,MAApB,EAA4B;AACxB,oBAAI,aAAa,KAAK,OAAL,CAAa,aAAb,GACX,KAAK,OAAL,CAAa,aAAb,CAA2B,qBAA3B,EADW,GAEX,KAAK,WAAL,GAAmB,IAAnB,CAAwB,qBAAxB,EAFN;AAGA,oBAAI,uBAAuB,gBAAgB,eAAe,WAAW,GAA1C,CAA3B;;AAEA,4BAAY,GAAZ,GAAkB,MAAlB;AACA,4BAAY,MAAZ,GAAqB,wBAAwB,eAAe,KAAK,GAA5C,CAArB;AACH;;AAED,8BAAkB,KAAK,eAAL,CAAqB,WAArB,EAAkC,cAAlC,CAAlB;AACA,gBAAI,gBAAgB,IAApB,EAA0B;AACtB,4BAAY,IAAZ,GAAmB,cAAc,eAAe,KAA7B,GACb,aAAa,WAAb,GAA2B,eAAe,KAD7B,GAEb,UAFN;AAGA,uBAAO,YAAY,KAAnB;AACH;AACD,gBAAI,gBAAgB,GAApB,EAAyB;AACrB,4BAAY,GAAZ,GAAkB,eAAe,eAAe,MAA9B,GACZ,YAAY,YAAZ,GAA2B,eAAe,MAD9B,GAEZ,SAFN;AAGA,uBAAO,YAAY,MAAnB;AACH;;AAED,qBAAS,UAAT,CAAoB,WAApB,CAAgC,QAAhC;AACA,mBAAO,WAAP;AACH;;;uCAEc,I,EAAM;AACjB,gBAAI,mBAAmB,EAAvB;AAAA,gBACI,mBADJ;AAEA,gBAAI,wBAAwB,GAA5B;AACA,gBAAI,IAAI,KAAK,IAAb;;AAEA,gBAAI,OAAO,CAAP,KAAa,WAAjB,EAA8B;;AAE9B,mBAAO,eAAe,SAAf,IAA4B,WAAW,MAAX,KAAsB,CAAzD,EAA4D;AACxD,6BAAa,EAAE,qBAAF,EAAb;;AAEA,oBAAI,WAAW,MAAX,KAAsB,CAA1B,EAA6B;AACzB,wBAAI,EAAE,UAAF,CAAa,CAAb,CAAJ;AACA,wBAAI,MAAM,SAAN,IAAmB,CAAC,EAAE,qBAA1B,EAAiD;AAC7C;AACH;AACJ;AACJ;;AAED,gBAAI,UAAU,WAAW,GAAzB;AACA,gBAAI,aAAa,UAAU,WAAW,MAAtC;;AAEA,gBAAI,UAAU,CAAd,EAAiB;AACb,qBAAK,kBAAL,GAA0B,QAA1B,CAAmC,CAAnC,EAAsC,KAAK,kBAAL,GAA0B,WAA1B,GAAwC,WAAW,GAAnD,GAAyD,gBAA/F;AACH,aAFD,MAEO,IAAI,aAAa,KAAK,kBAAL,GAA0B,WAA3C,EAAwD;AAC3D,oBAAI,OAAO,KAAK,kBAAL,GAA0B,WAA1B,GAAwC,WAAW,GAAnD,GAAyD,gBAApE;;AAEA,oBAAI,OAAO,KAAK,kBAAL,GAA0B,WAAjC,GAA+C,qBAAnD,EAA0E;AACtE,2BAAO,KAAK,kBAAL,GAA0B,WAA1B,GAAwC,qBAA/C;AACH;;AAED,oBAAI,UAAU,KAAK,kBAAL,GAA0B,WAA1B,IAAyC,KAAK,kBAAL,GAA0B,WAA1B,GAAwC,UAAjF,CAAd;;AAEA,oBAAI,UAAU,IAAd,EAAoB;AAChB,8BAAU,IAAV;AACH;;AAED,qBAAK,kBAAL,GAA0B,QAA1B,CAAmC,CAAnC,EAAsC,OAAtC;AACH;AACJ;;;;;;kBAIU,Y;;;;;;;;;;;;;;ACnpBf;IACM,a;AACF,2BAAY,OAAZ,EAAqB;AAAA;;AACjB,aAAK,OAAL,GAAe,OAAf;AACA,aAAK,OAAL,CAAa,MAAb,GAAsB,IAAtB;AACH;;;;qCAEY,O,EAAS,K,EAAO;AAAA;;AACzB,mBAAO,MAAM,MAAN,CAAa,kBAAU;AAC1B,uBAAO,MAAK,IAAL,CAAU,OAAV,EAAmB,MAAnB,CAAP;AACH,aAFM,CAAP;AAGH;;;6BAEI,O,EAAS,M,EAAQ;AAClB,mBAAO,KAAK,KAAL,CAAW,OAAX,EAAoB,MAApB,MAAgC,IAAvC;AACH;;;8BAEK,O,EAAS,M,EAAQ,I,EAAM;AACzB,mBAAO,QAAQ,EAAf;AACA,gBAAI,aAAa,CAAjB;AAAA,gBACI,SAAS,EADb;AAAA,gBAEI,MAAM,OAAO,MAFjB;AAAA,gBAGI,aAAa,CAHjB;AAAA,gBAII,YAAY,CAJhB;AAAA,gBAKI,MAAM,KAAK,GAAL,IAAY,EALtB;AAAA,gBAMI,OAAO,KAAK,IAAL,IAAa,EANxB;AAAA,gBAOI,gBAAgB,KAAK,aAAL,IAAsB,MAAtB,IAAgC,OAAO,WAAP,EAPpD;AAAA,gBAQI,WARJ;AAAA,gBAQQ,oBARR;;AAUA,gBAAI,KAAK,IAAT,EAAe;AACX,uBAAO,EAAC,UAAU,MAAX,EAAmB,OAAO,CAA1B,EAAP;AACH;;AAED,sBAAU,KAAK,aAAL,IAAsB,OAAtB,IAAiC,QAAQ,WAAR,EAA3C;;AAEA,gBAAI,eAAe,KAAK,QAAL,CAAc,aAAd,EAA6B,OAA7B,EAAsC,CAAtC,EAAyC,CAAzC,EAA4C,EAA5C,CAAnB;AACA,gBAAI,CAAC,YAAL,EAAmB;AACf,uBAAO,IAAP;AACH;AACD,mBAAO;AACH,0BAAU,KAAK,MAAL,CAAY,MAAZ,EAAoB,aAAa,KAAjC,EAAwC,GAAxC,EAA6C,IAA7C,CADP;AAEH,uBAAO,aAAa;AAFjB,aAAP;AAIH;;;iCAEQ,M,EAAQ,O,EAAS,W,EAAa,Y,EAAc,Y,EAAc;AAC/D;AACA,gBAAI,QAAQ,MAAR,KAAmB,YAAvB,EAAqC;;AAEjC;AACA,uBAAO;AACH,2BAAO,KAAK,cAAL,CAAoB,YAApB,CADJ;AAEH,2BAAO,aAAa,KAAb;AAFJ,iBAAP;AAIH;;AAED;AACA,gBAAI,OAAO,MAAP,KAAkB,WAAlB,IAAiC,QAAQ,MAAR,GAAiB,YAAjB,GAAgC,OAAO,MAAP,GAAgB,WAArF,EAAkG;AAC9F,uBAAO,SAAP;AACH;;AAED,gBAAI,IAAI,QAAQ,YAAR,CAAR;AACA,gBAAI,QAAQ,OAAO,OAAP,CAAe,CAAf,EAAkB,WAAlB,CAAZ;AACA,gBAAI,aAAJ;AAAA,gBAAU,aAAV;;AAEA,mBAAO,QAAQ,CAAC,CAAhB,EAAmB;AACf,6BAAa,IAAb,CAAkB,KAAlB;AACA,uBAAO,KAAK,QAAL,CAAc,MAAd,EAAsB,OAAtB,EAA+B,QAAQ,CAAvC,EAA0C,eAAe,CAAzD,EAA4D,YAA5D,CAAP;AACA,6BAAa,GAAb;;AAEA;AACA,oBAAI,CAAC,IAAL,EAAW;AACP,2BAAO,IAAP;AACH;;AAED,oBAAI,CAAC,IAAD,IAAS,KAAK,KAAL,GAAa,KAAK,KAA/B,EAAsC;AAClC,2BAAO,IAAP;AACH;;AAED,wBAAQ,OAAO,OAAP,CAAe,CAAf,EAAkB,QAAQ,CAA1B,CAAR;AACH;;AAED,mBAAO,IAAP;AACH;;;uCAEc,Y,EAAc;AACzB,gBAAI,QAAQ,CAAZ;AACA,gBAAI,OAAO,CAAX;;AAEA,yBAAa,OAAb,CAAqB,UAAC,KAAD,EAAQ,CAAR,EAAc;AAC/B,oBAAI,IAAI,CAAR,EAAW;AACP,wBAAI,aAAa,IAAI,CAAjB,IAAsB,CAAtB,KAA4B,KAAhC,EAAuC;AACnC,gCAAQ,OAAO,CAAf;AACH,qBAFD,MAGK;AACD,+BAAO,CAAP;AACH;AACJ;;AAED,yBAAS,IAAT;AACH,aAXD;;AAaA,mBAAO,KAAP;AACH;;;+BAEM,M,EAAQ,O,EAAS,G,EAAK,I,EAAM;AAC/B,gBAAI,WAAW,OAAO,SAAP,CAAiB,CAAjB,EAAoB,QAAQ,CAAR,CAApB,CAAf;;AAEA,oBAAQ,OAAR,CAAgB,UAAC,KAAD,EAAQ,CAAR,EAAc;AAC1B,4BAAY,MAAM,OAAO,KAAP,CAAN,GAAsB,IAAtB,GACR,OAAO,SAAP,CAAiB,QAAQ,CAAzB,EAA6B,QAAQ,IAAI,CAAZ,CAAD,GAAmB,QAAQ,IAAI,CAAZ,CAAnB,GAAoC,OAAO,MAAvE,CADJ;AAEH,aAHD;;AAKA,mBAAO,QAAP;AACH;;;+BAEM,O,EAAS,G,EAAK,I,EAAM;AAAA;;AACvB,mBAAO,QAAQ,EAAf;AACA,mBAAO,IACF,MADE,CACK,UAAC,IAAD,EAAO,OAAP,EAAgB,GAAhB,EAAqB,GAArB,EAA6B;AACjC,oBAAI,MAAM,OAAV;;AAEA,oBAAI,KAAK,OAAT,EAAkB;AACd,0BAAM,KAAK,OAAL,CAAa,OAAb,CAAN;;AAEA,wBAAI,CAAC,GAAL,EAAU;AAAE;AACR,8BAAM,EAAN;AACH;AACJ;;AAED,oBAAI,WAAW,OAAK,KAAL,CAAW,OAAX,EAAoB,GAApB,EAAyB,IAAzB,CAAf;;AAEA,oBAAI,YAAY,IAAhB,EAAsB;AAClB,yBAAK,KAAK,MAAV,IAAoB;AAChB,gCAAQ,SAAS,QADD;AAEhB,+BAAO,SAAS,KAFA;AAGhB,+BAAO,GAHS;AAIhB,kCAAU;AAJM,qBAApB;AAMH;;AAED,uBAAO,IAAP;AACH,aAxBE,EAwBA,EAxBA,EA0BN,IA1BM,CA0BD,UAAC,CAAD,EAAI,CAAJ,EAAU;AACZ,oBAAI,UAAU,EAAE,KAAF,GAAU,EAAE,KAA1B;AACA,oBAAI,OAAJ,EAAa,OAAO,OAAP;AACb,uBAAO,EAAE,KAAF,GAAU,EAAE,KAAnB;AACH,aA9BM,CAAP;AA+BH;;;;;;kBAGU,a;;;;;;;;;;ACnJf;;;;;;kBAEe,iB,EAPf;;;;;;;;;;ACAA,IAAI,CAAC,MAAM,SAAN,CAAgB,IAArB,EAA2B;AACvB,UAAM,SAAN,CAAgB,IAAhB,GAAuB,UAAS,SAAT,EAAoB;AACvC,YAAI,SAAS,IAAb,EAAmB;AACf,kBAAM,IAAI,SAAJ,CAAc,kDAAd,CAAN;AACH;AACD,YAAI,OAAO,SAAP,KAAqB,UAAzB,EAAqC;AACjC,kBAAM,IAAI,SAAJ,CAAc,8BAAd,CAAN;AACH;AACD,YAAI,OAAO,OAAO,IAAP,CAAX;AACA,YAAI,SAAS,KAAK,MAAL,KAAgB,CAA7B;AACA,YAAI,UAAU,UAAU,CAAV,CAAd;AACA,YAAI,KAAJ;;AAEA,aAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,MAApB,EAA4B,GAA5B,EAAiC;AAC7B,oBAAQ,KAAK,CAAL,CAAR;AACA,gBAAI,UAAU,IAAV,CAAe,OAAf,EAAwB,KAAxB,EAA+B,CAA/B,EAAkC,IAAlC,CAAJ,EAA6C;AACzC,uBAAO,KAAP;AACH;AACJ;AACD,eAAO,SAAP;AACH,KAnBD;AAoBH;;AAED,IAAI,UAAU,OAAO,OAAO,WAAd,KAA8B,UAA5C,EAAwD;AAAA,QAC7C,WAD6C,GACtD,SAAS,WAAT,CAAqB,KAArB,EAA4B,MAA5B,EAAoC;AAClC,iBAAS,UAAU;AACjB,qBAAS,KADQ;AAEjB,wBAAY,KAFK;AAGjB,oBAAQ;AAHS,SAAnB;AAKA,YAAI,MAAM,SAAS,WAAT,CAAqB,aAArB,CAAV;AACA,YAAI,eAAJ,CAAoB,KAApB,EAA2B,OAAO,OAAlC,EAA2C,OAAO,UAAlD,EAA8D,OAAO,MAArE;AACA,eAAO,GAAP;AACD,KAVqD;;AAYvD,QAAI,OAAO,OAAO,KAAd,KAAwB,WAA5B,EAAyC;AACvC,oBAAY,SAAZ,GAAwB,OAAO,KAAP,CAAa,SAArC;AACD;;AAEA,WAAO,WAAP,GAAqB,WAArB;AACD",
  "file": "generated.js",
  "sourceRoot": "",
  "sourcesContent": [
    "(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()",
    "import TributeUtils from \"./utils\";\r\nimport TributeEvents from \"./TributeEvents\";\r\nimport TributeMenuEvents from \"./TributeMenuEvents\";\r\nimport TributeRange from \"./TributeRange\";\r\nimport TributeSearch from \"./TributeSearch\";\r\n\r\nclass Tribute {\r\n    constructor({\r\n        values = null,\r\n        iframe = null,\r\n        selectClass = 'highlight',\r\n        trigger = '@',\r\n        autocompleteMode = false,\r\n        selectTemplate = null,\r\n        menuItemTemplate = null,\r\n        lookup = 'key',\r\n        fillAttr = 'value',\r\n        collection = null,\r\n        menuContainer = null,\r\n        noMatchTemplate = null,\r\n        requireLeadingSpace = true,\r\n        allowSpaces = false,\r\n        replaceTextSuffix = null,\r\n        positionMenu = true,\r\n        spaceSelectsMatch = false,\r\n        searchOpts = {},\r\n        menuItemLimit = null,\r\n    }) {\r\n        this.autocompleteMode = autocompleteMode\r\n        this.menuSelected = 0\r\n        this.current = {}\r\n        this.inputEvent = false\r\n        this.isActive = false\r\n        this.menuContainer = menuContainer\r\n        this.allowSpaces = allowSpaces\r\n        this.replaceTextSuffix = replaceTextSuffix\r\n        this.positionMenu = positionMenu\r\n        this.hasTrailingSpace = false;\r\n        this.spaceSelectsMatch = spaceSelectsMatch;\r\n\r\n        if (this.autocompleteMode) {\r\n            trigger = ''\r\n            allowSpaces = false\r\n        }\r\n\r\n        if (values) {\r\n            this.collection = [{\r\n                // symbol that starts the lookup\r\n                trigger: trigger,\r\n\r\n                // is it wrapped in an iframe\r\n                iframe: iframe,\r\n\r\n                // class applied to selected item\r\n                selectClass: selectClass,\r\n\r\n                // function called on select that retuns the content to insert\r\n                selectTemplate: (selectTemplate || Tribute.defaultSelectTemplate).bind(this),\r\n\r\n                // function called that returns content for an item\r\n                menuItemTemplate: (menuItemTemplate || Tribute.defaultMenuItemTemplate).bind(this),\r\n\r\n                // function called when menu is empty, disables hiding of menu.\r\n                noMatchTemplate: (t => {\r\n                    if (typeof t === 'function') {\r\n                        return t.bind(this)\r\n                    }\r\n\r\n                    return noMatchTemplate || function () {return ''}.bind(this)\r\n                })(noMatchTemplate),\r\n\r\n                // column to search against in the object\r\n                lookup: lookup,\r\n\r\n                // column that contains the content to insert by default\r\n                fillAttr: fillAttr,\r\n\r\n                // array of objects or a function returning an array of objects\r\n                values: values,\r\n\r\n                requireLeadingSpace: requireLeadingSpace,\r\n\r\n                searchOpts: searchOpts,\r\n\r\n                menuItemLimit: menuItemLimit,\r\n            }]\r\n        }\r\n        else if (collection) {\r\n            if (this.autocompleteMode)\r\n                console.warn('Tribute in autocomplete mode does not work for collections')\r\n            this.collection = collection.map(item => {\r\n                return {\r\n                    trigger: item.trigger || trigger,\r\n                    iframe: item.iframe || iframe,\r\n                    selectClass: item.selectClass || selectClass,\r\n                    selectTemplate: (item.selectTemplate || Tribute.defaultSelectTemplate).bind(this),\r\n                    menuItemTemplate: (item.menuItemTemplate || Tribute.defaultMenuItemTemplate).bind(this),\r\n                    // function called when menu is empty, disables hiding of menu.\r\n                    noMatchTemplate: (t => {\r\n                        if (typeof t === 'function') {\r\n                            return t.bind(this)\r\n                        }\r\n\r\n                        return null\r\n                    })(noMatchTemplate),\r\n                    lookup: item.lookup || lookup,\r\n                    fillAttr: item.fillAttr || fillAttr,\r\n                    values: item.values,\r\n                    requireLeadingSpace: item.requireLeadingSpace,\r\n                    searchOpts: item.searchOpts || searchOpts,\r\n                    menuItemLimit: item.menuItemLimit || menuItemLimit,\r\n                }\r\n            })\r\n        }\r\n        else {\r\n            throw new Error('[Tribute] No collection specified.')\r\n        }\r\n\r\n        new TributeRange(this)\r\n        new TributeEvents(this)\r\n        new TributeMenuEvents(this)\r\n        new TributeSearch(this)\r\n    }\r\n\r\n    static defaultSelectTemplate(item) {\r\n      if (typeof item === 'undefined') return null;\r\n      if (this.range.isContentEditable(this.current.element)) {\r\n          return '<span class=\"tribute-mention\">' + (this.current.collection.trigger + item.original[this.current.collection.fillAttr]) + '</span>';\r\n      }\r\n\r\n      return this.current.collection.trigger + item.original[this.current.collection.fillAttr];\r\n    }\r\n\r\n    static defaultMenuItemTemplate(matchItem) {\r\n        return matchItem.string\r\n    }\r\n\r\n    static inputTypes() {\r\n        return ['TEXTAREA', 'INPUT']\r\n    }\r\n\r\n    triggers() {\r\n        return this.collection.map(config => {\r\n            return config.trigger\r\n        })\r\n    }\r\n\r\n    attach(el) {\r\n        if (!el) {\r\n            throw new Error('[Tribute] Must pass in a DOM node or NodeList.')\r\n        }\r\n\r\n        // Check if it is a jQuery collection\r\n        if (typeof jQuery !== 'undefined' && el instanceof jQuery) {\r\n            el = el.get()\r\n        }\r\n\r\n        // Is el an Array/Array-like object?\r\n        if (el.constructor === NodeList || el.constructor === HTMLCollection || el.constructor === Array) {\r\n            let length = el.length\r\n            for (var i = 0; i < length; ++i) {\r\n                this._attach(el[i])\r\n            }\r\n        } else {\r\n            this._attach(el)\r\n        }\r\n    }\r\n\r\n    _attach(el) {\r\n        if (el.hasAttribute('data-tribute')) {\r\n            console.warn('Tribute was already bound to ' + el.nodeName)\r\n        }\r\n\r\n        this.ensureEditable(el)\r\n        this.events.bind(el)\r\n        el.setAttribute('data-tribute', true)\r\n    }\r\n\r\n    ensureEditable(element) {\r\n        if (Tribute.inputTypes().indexOf(element.nodeName) === -1) {\r\n            if (element.contentEditable) {\r\n                element.contentEditable = true\r\n            } else {\r\n                throw new Error('[Tribute] Cannot bind to ' + element.nodeName)\r\n            }\r\n        }\r\n    }\r\n\r\n    createMenu() {\r\n        let wrapper = this.range.getDocument().createElement('div'),\r\n            ul = this.range.getDocument().createElement('ul')\r\n\r\n        wrapper.className = 'tribute-container'\r\n        wrapper.appendChild(ul)\r\n\r\n        if (this.menuContainer) {\r\n            return this.menuContainer.appendChild(wrapper)\r\n        }\r\n\r\n        return this.range.getDocument().body.appendChild(wrapper)\r\n    }\r\n\r\n    showMenuFor(element, scrollTo) {\r\n        // Only proceed if menu isn't already shown for the current element & mentionText\r\n        if (this.isActive && this.current.element === element && this.current.mentionText === this.currentMentionTextSnapshot) {\r\n          return\r\n        }\r\n        this.currentMentionTextSnapshot = this.current.mentionText\r\n\r\n        // create the menu if it doesn't exist.\r\n        if (!this.menu) {\r\n            this.menu = this.createMenu()\r\n            element.tributeMenu = this.menu\r\n            this.menuEvents.bind(this.menu)\r\n        }\r\n\r\n        this.isActive = true\r\n        this.menuSelected = 0\r\n\r\n        if (!this.current.mentionText) {\r\n            this.current.mentionText = ''\r\n        }\r\n\r\n        const processValues = (values) => {\r\n            // Tribute may not be active any more by the time the value callback returns\r\n            if (!this.isActive) {\r\n                return\r\n            }\r\n\r\n            let items = this.search.filter(this.current.mentionText, values, {\r\n                pre: this.current.collection.searchOpts.pre || '<span>',\r\n                post: this.current.collection.searchOpts.post || '</span>',\r\n                skip: this.current.collection.searchOpts.skip,\r\n                extract: (el) => {\r\n                    if (typeof this.current.collection.lookup === 'string') {\r\n                        return el[this.current.collection.lookup]\r\n                    } else if (typeof this.current.collection.lookup === 'function') {\r\n                        return this.current.collection.lookup(el, this.current.mentionText)\r\n                    } else {\r\n                        throw new Error('Invalid lookup attribute, lookup must be string or function.')\r\n                    }\r\n                }\r\n            })\r\n\r\n            this.current.filteredItems = items\r\n\r\n\r\n            let ul = this.menu.querySelector('ul')\r\n\r\n            this.range.positionMenuAtCaret(scrollTo)\r\n\r\n            if (!items.length) {\r\n                let noMatchEvent = new CustomEvent('tribute-no-match', { detail: this.menu })\r\n                this.current.element.dispatchEvent(noMatchEvent)\r\n                if ( typeof this.current.collection.noMatchTemplate === 'function' && !this.current.collection.noMatchTemplate() || !this.current.collection.noMatchTemplate) {\r\n                    this.hideMenu()\r\n                } else {\r\n                    typeof this.current.collection.noMatchTemplate === 'function' ? ul.innerHTML = this.current.collection.noMatchTemplate() : ul.innerHTML = this.current.collection.noMatchTemplate\r\n                }\r\n\r\n                return\r\n            }\r\n\r\n            if (this.current.collection.menuItemLimit) {\r\n                items = items.slice(0, this.current.collection.menuItemLimit)\r\n            }\r\n\r\n            ul.innerHTML = ''\r\n            let fragment = this.range.getDocument().createDocumentFragment()\r\n\r\n            items.forEach((item, index) => {\r\n                let li = this.range.getDocument().createElement('li')\r\n                li.setAttribute('data-index', index)\r\n                li.addEventListener('mousemove', (e) => {\r\n                    let [li, index] = this._findLiTarget(e.target)\r\n                    if (e.movementY !== 0) {\r\n                        this.events.setActiveLi(index)\r\n                    }\r\n                })\r\n                if (this.menuSelected === index) {\r\n                  li.className = this.current.collection.selectClass\r\n                }\r\n                li.innerHTML = this.current.collection.menuItemTemplate(item)\r\n                fragment.appendChild(li)\r\n            })\r\n            ul.appendChild(fragment)\r\n        }\r\n\r\n        if (typeof this.current.collection.values === 'function') {\r\n            this.current.collection.values(this.current.mentionText, processValues)\r\n        } else {\r\n            processValues(this.current.collection.values)\r\n        }\r\n    }\r\n\r\n    _findLiTarget(el) {\r\n        if (!el) return []\r\n        const index = el.getAttribute('data-index');\r\n        return !index ?\r\n            this._findLiTarget(el.parentNode) :\r\n            [el, index]\r\n    }\r\n\r\n    showMenuForCollection(element, collectionIndex) {\r\n        if (element !== document.activeElement) {\r\n            this.placeCaretAtEnd(element)\r\n        }\r\n\r\n        this.current.collection = this.collection[collectionIndex || 0]\r\n        this.current.externalTrigger = true\r\n        this.current.element = element\r\n\r\n        if (element.isContentEditable)\r\n            this.insertTextAtCursor(this.current.collection.trigger)\r\n        else\r\n            this.insertAtCaret(element, this.current.collection.trigger)\r\n\r\n        this.showMenuFor(element)\r\n    }\r\n\r\n    // TODO: make sure this works for inputs/textareas\r\n    placeCaretAtEnd(el) {\r\n        el.focus();\r\n        if (typeof window.getSelection != \"undefined\"\r\n                && typeof document.createRange != \"undefined\") {\r\n            var range = document.createRange();\r\n            range.selectNodeContents(el);\r\n            range.collapse(false);\r\n            var sel = window.getSelection();\r\n            sel.removeAllRanges();\r\n            sel.addRange(range);\r\n        } else if (typeof document.body.createTextRange != \"undefined\") {\r\n            var textRange = document.body.createTextRange();\r\n            textRange.moveToElementText(el);\r\n            textRange.collapse(false);\r\n            textRange.select();\r\n        }\r\n    }\r\n\r\n    // for contenteditable\r\n    insertTextAtCursor(text) {\r\n        var sel, range, html;\r\n        sel = window.getSelection();\r\n        range = sel.getRangeAt(0);\r\n        range.deleteContents();\r\n        var textNode = document.createTextNode(text);\r\n        range.insertNode(textNode);\r\n        range.selectNodeContents(textNode)\r\n        range.collapse(false)\r\n        sel.removeAllRanges()\r\n        sel.addRange(range)\r\n    }\r\n\r\n    // for regular inputs\r\n    insertAtCaret(textarea, text) {\r\n        var scrollPos = textarea.scrollTop;\r\n        var caretPos = textarea.selectionStart;\r\n\r\n        var front = (textarea.value).substring(0, caretPos);\r\n        var back = (textarea.value).substring(textarea.selectionEnd, textarea.value.length);\r\n        textarea.value = front + text + back;\r\n        caretPos = caretPos + text.length;\r\n        textarea.selectionStart = caretPos;\r\n        textarea.selectionEnd = caretPos;\r\n        textarea.focus();\r\n        textarea.scrollTop = scrollPos;\r\n    }\r\n\r\n    hideMenu() {\r\n        if (this.menu) {\r\n            this.menu.style.cssText = 'display: none;'\r\n            this.isActive = false\r\n            this.menuSelected = 0\r\n            this.current = {}\r\n        }\r\n    }\r\n\r\n    selectItemAtIndex(index, originalEvent) {\r\n        index = parseInt(index)\r\n        if (typeof index !== 'number' || isNaN(index)) return\r\n        let item = this.current.filteredItems[index]\r\n        let content = this.current.collection.selectTemplate(item)\r\n        if (content !== null) this.replaceText(content, originalEvent, item)\r\n    }\r\n\r\n    replaceText(content, originalEvent, item) {\r\n        this.range.replaceTriggerText(content, true, true, originalEvent, item)\r\n    }\r\n\r\n    _append(collection, newValues, replace) {\r\n        if (typeof collection.values === 'function') {\r\n            throw new Error('Unable to append to values, as it is a function.')\r\n        } else if (!replace) {\r\n            collection.values = collection.values.concat(newValues)\r\n        } else {\r\n            collection.values = newValues\r\n        }\r\n    }\r\n\r\n    append(collectionIndex, newValues, replace) {\r\n        let index = parseInt(collectionIndex)\r\n        if (typeof index !== 'number') throw new Error('please provide an index for the collection to update.')\r\n\r\n        let collection = this.collection[index]\r\n\r\n        this._append(collection, newValues, replace)\r\n    }\r\n\r\n    appendCurrent(newValues, replace) {\r\n        if (this.isActive) {\r\n            this._append(this.current.collection, newValues, replace)\r\n        } else {\r\n            throw new Error('No active state. Please use append instead and pass an index.')\r\n        }\r\n    }\r\n\r\n    detach(el) {\r\n        if (!el) {\r\n            throw new Error('[Tribute] Must pass in a DOM node or NodeList.')\r\n        }\r\n\r\n        // Check if it is a jQuery collection\r\n        if (typeof jQuery !== 'undefined' && el instanceof jQuery) {\r\n            el = el.get()\r\n        }\r\n\r\n        // Is el an Array/Array-like object?\r\n        if (el.constructor === NodeList || el.constructor === HTMLCollection || el.constructor === Array) {\r\n            let length = el.length\r\n            for (var i = 0; i < length; ++i) {\r\n                this._detach(el[i])\r\n            }\r\n        } else {\r\n            this._detach(el)\r\n        }\r\n    }\r\n\r\n    _detach(el) {\r\n        this.events.unbind(el)\r\n        if (el.tributeMenu) {\r\n            this.menuEvents.unbind(el.tributeMenu)\r\n        }\r\n\r\n        setTimeout(() => {\r\n            el.removeAttribute('data-tribute')\r\n            this.isActive = false\r\n            if (el.tributeMenu) {\r\n                el.tributeMenu.remove()\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\nexport default Tribute;\r\n",
    "class TributeEvents {\r\n    constructor(tribute) {\r\n        this.tribute = tribute\r\n        this.tribute.events = this\r\n    }\r\n\r\n    static keys() {\r\n        return [{\r\n            key: 9,\r\n            value: 'TAB'\r\n        }, {\r\n            key: 8,\r\n            value: 'DELETE'\r\n        }, {\r\n            key: 13,\r\n            value: 'ENTER'\r\n        }, {\r\n            key: 27,\r\n            value: 'ESCAPE'\r\n        }, {\r\n            key: 32,\r\n            value: 'SPACE'\r\n        }, {\r\n            key: 38,\r\n            value: 'UP'\r\n        }, {\r\n            key: 40,\r\n            value: 'DOWN'\r\n        }]\r\n    }\r\n\r\n    bind(element) {\r\n        element.boundKeydown = this.keydown.bind(element, this);\r\n        element.boundKeyup = this.keyup.bind(element, this);\r\n        element.boundInput = this.input.bind(element, this);\r\n\r\n        element.addEventListener('keydown',\r\n            element.boundKeydown, false)\r\n        element.addEventListener('keyup',\r\n            element.boundKeyup, false)\r\n        element.addEventListener('input',\r\n            element.boundInput, false)\r\n    }\r\n\r\n    unbind(element) {\r\n        element.removeEventListener('keydown',\r\n            element.boundKeydown, false)\r\n        element.removeEventListener('keyup',\r\n            element.boundKeyup, false)\r\n        element.removeEventListener('input',\r\n            element.boundInput, false)\r\n\r\n        delete element.boundKeydown\r\n        delete element.boundKeyup\r\n        delete element.boundInput\r\n    }\r\n\r\n    keydown(instance, event) {\r\n        if (instance.shouldDeactivate(event)) {\r\n            instance.tribute.isActive = false\r\n            instance.tribute.hideMenu()\r\n        }\r\n\r\n        let element = this\r\n        instance.commandEvent = false\r\n\r\n        TributeEvents.keys().forEach(o => {\r\n            if (o.key === event.keyCode) {\r\n                instance.commandEvent = true\r\n                instance.callbacks()[o.value.toLowerCase()](event, element)\r\n            }\r\n        })\r\n    }\r\n\r\n    input(instance, event) {\r\n        instance.inputEvent = true\r\n        instance.keyup.call(this, instance, event)\r\n    }\r\n\r\n    click(instance, event) {\r\n        console.log('clickity')\r\n        let tribute = instance.tribute\r\n        if (tribute.menu && tribute.menu.contains(event.target)) {\r\n            let li = event.target\r\n            event.preventDefault()\r\n            event.stopPropagation()\r\n            while (li.nodeName.toLowerCase() !== 'li') {\r\n                li = li.parentNode\r\n                if (!li || li === tribute.menu) {\r\n                    throw new Error('cannot find the <li> container for the click')\r\n                }\r\n            }\r\n            tribute.selectItemAtIndex(li.getAttribute('data-index'), event)\r\n            tribute.hideMenu()\r\n\r\n        // TODO: should fire with externalTrigger and target is outside of menu\r\n        } else if (tribute.current.element && !tribute.current.externalTrigger) {\r\n            tribute.current.externalTrigger = false\r\n            setTimeout(() => tribute.hideMenu())\r\n        }\r\n    }\r\n\r\n    keyup(instance, event) {\r\n        if (instance.inputEvent) {\r\n            instance.inputEvent = false\r\n        }\r\n        instance.updateSelection(this)\r\n\r\n        if (event.keyCode === 27) return\r\n\r\n        if (!instance.tribute.allowSpaces && instance.tribute.hasTrailingSpace) {\r\n            instance.tribute.hasTrailingSpace = false;\r\n            instance.commandEvent = true;\r\n            instance.callbacks()[\"space\"](event, this);\r\n            return\r\n        }\r\n\r\n        if (!instance.tribute.isActive) {\r\n            if (instance.tribute.autocompleteMode) {\r\n                instance.callbacks().triggerChar(event, this, '')\r\n            } else {\r\n                let keyCode = instance.getKeyCode(instance, this, event)\r\n\r\n                if (isNaN(keyCode) || !keyCode) return\r\n\r\n                let trigger = instance.tribute.triggers().find(trigger => {\r\n                    return trigger.charCodeAt(0) === keyCode\r\n                })\r\n\r\n                if (typeof trigger !== 'undefined') {\r\n                    instance.callbacks().triggerChar(event, this, trigger)\r\n                }\r\n            }\r\n        }\r\n\r\n        if ((instance.tribute.current.trigger || instance.tribute.autocompleteMode)\r\n            && instance.commandEvent === false\r\n            || instance.tribute.isActive && event.keyCode === 8) {\r\n          instance.tribute.showMenuFor(this, true)\r\n        }\r\n    }\r\n\r\n    shouldDeactivate(event) {\r\n        if (!this.tribute.isActive) return false\r\n\r\n        if (this.tribute.current.mentionText.length === 0) {\r\n            let eventKeyPressed = false\r\n            TributeEvents.keys().forEach(o => {\r\n                if (event.keyCode === o.key) eventKeyPressed = true\r\n            })\r\n\r\n            return !eventKeyPressed\r\n        }\r\n\r\n        return false\r\n    }\r\n\r\n    getKeyCode(instance, el, event) {\r\n        let char\r\n        let tribute = instance.tribute\r\n        let info = tribute.range.getTriggerInfo(false, tribute.hasTrailingSpace, true, tribute.allowSpaces, tribute.autocompleteMode)\r\n\r\n        if (info) {\r\n            return info.mentionTriggerChar.charCodeAt(0)\r\n        } else {\r\n            return false\r\n        }\r\n    }\r\n\r\n    updateSelection(el) {\r\n        this.tribute.current.element = el\r\n        let info = this.tribute.range.getTriggerInfo(false, this.tribute.hasTrailingSpace, true, this.tribute.allowSpaces, this.tribute.autocompleteMode)\r\n\r\n        if (info) {\r\n            this.tribute.current.selectedPath = info.mentionSelectedPath\r\n            this.tribute.current.mentionText = info.mentionText\r\n            this.tribute.current.selectedOffset = info.mentionSelectedOffset\r\n        }\r\n    }\r\n\r\n    callbacks() {\r\n        return {\r\n            triggerChar: (e, el, trigger) => {\r\n                let tribute = this.tribute\r\n                tribute.current.trigger = trigger\r\n\r\n                let collectionItem = tribute.collection.find(item => {\r\n                    return item.trigger === trigger\r\n                })\r\n\r\n                tribute.current.collection = collectionItem\r\n                if (tribute.inputEvent) tribute.showMenuFor(el, true)\r\n            },\r\n            enter: (e, el) => {\r\n                // choose selection\r\n                if (this.tribute.isActive && this.tribute.current.filteredItems) {\r\n                    e.preventDefault()\r\n                    e.stopPropagation()\r\n                    setTimeout(() => {\r\n                        this.tribute.selectItemAtIndex(this.tribute.menuSelected, e)\r\n                        this.tribute.hideMenu()\r\n                    }, 0)\r\n                }\r\n            },\r\n            escape: (e, el) => {\r\n                if (this.tribute.isActive) {\r\n                    e.preventDefault()\r\n                    e.stopPropagation()\r\n                    this.tribute.isActive = false\r\n                    this.tribute.hideMenu()\r\n                }\r\n            },\r\n            tab: (e, el) => {\r\n                // choose first match\r\n                this.callbacks().enter(e, el)\r\n            },\r\n            space: (e, el) => {\r\n                if (this.tribute.isActive) {\r\n                    if (this.tribute.spaceSelectsMatch) {\r\n                        this.callbacks().enter(e, el)\r\n                    } else if (!this.tribute.allowSpaces) {\r\n                        e.stopPropagation();\r\n                        setTimeout(() => {\r\n                            this.tribute.hideMenu();\r\n                            this.tribute.isActive = false;\r\n                        }, 0);\r\n                    }\r\n                }\r\n            },\r\n            up: (e, el) => {\r\n                // navigate up ul\r\n                if (this.tribute.isActive && this.tribute.current.filteredItems) {\r\n                    e.preventDefault()\r\n                    e.stopPropagation()\r\n                    let count = this.tribute.current.filteredItems.length,\r\n                        selected = this.tribute.menuSelected\r\n\r\n                    if (count > selected && selected > 0) {\r\n                        this.tribute.menuSelected--\r\n                        this.setActiveLi()\r\n                    } else if (selected === 0) {\r\n                      this.tribute.menuSelected = count - 1\r\n                      this.setActiveLi()\r\n                      this.tribute.menu.scrollTop = this.tribute.menu.scrollHeight\r\n                    }\r\n                }\r\n            },\r\n            down: (e, el) => {\r\n                // navigate down ul\r\n                if (this.tribute.isActive && this.tribute.current.filteredItems) {\r\n                    e.preventDefault()\r\n                    e.stopPropagation()\r\n                    let count = this.tribute.current.filteredItems.length - 1,\r\n                        selected = this.tribute.menuSelected\r\n\r\n                    if (count > selected) {\r\n                        this.tribute.menuSelected++\r\n                        this.setActiveLi()\r\n                    } else if (count === selected) {\r\n                        this.tribute.menuSelected = 0\r\n                        this.setActiveLi()\r\n                        this.tribute.menu.scrollTop = 0\r\n                    }\r\n                }\r\n            },\r\n            delete: (e, el) => {\r\n                if (this.tribute.isActive && this.tribute.current.mentionText.length < 1) {\r\n                    this.tribute.hideMenu()\r\n                } else if (this.tribute.isActive) {\r\n                    this.tribute.showMenuFor(el)\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    setActiveLi(index) {\r\n        let lis = this.tribute.menu.querySelectorAll('li'),\r\n            length = lis.length >>> 0\r\n\r\n        if (index) this.tribute.menuSelected = parseInt(index);\r\n\r\n        for (let i = 0; i < length; i++) {\r\n            let li = lis[i]\r\n            if (i === this.tribute.menuSelected) {\r\n                li.classList.add(this.tribute.current.collection.selectClass);\r\n\r\n                let liClientRect = li.getBoundingClientRect();\r\n                let menuClientRect = this.tribute.menu.getBoundingClientRect();\r\n\r\n                if (liClientRect.bottom > menuClientRect.bottom) {\r\n                    let scrollDistance = liClientRect.bottom - menuClientRect.bottom;\r\n                    this.tribute.menu.scrollTop += scrollDistance\r\n                } else if (liClientRect.top < menuClientRect.top) {\r\n                    let scrollDistance = menuClientRect.top - liClientRect.top;\r\n                    this.tribute.menu.scrollTop -= scrollDistance\r\n                }\r\n\r\n            } else {\r\n                li.classList.remove(this.tribute.current.collection.selectClass);\r\n            }\r\n        }\r\n    }\r\n\r\n    getFullHeight(elem, includeMargin) {\r\n      let height = elem.getBoundingClientRect().height\r\n\r\n      if (includeMargin) {\r\n        let style = elem.currentStyle || this.getWindowSelection().getComputedStyle(elem)\r\n        return height + parseFloat(style.marginTop) + parseFloat(style.marginBottom)\r\n      }\r\n\r\n      return height\r\n    }\r\n\r\n}\r\n\r\nexport default TributeEvents;\r\n",
    "class TributeMenuEvents {\r\n    constructor(tribute) {\r\n        this.tribute = tribute\r\n        this.tribute.menuEvents = this\r\n        this.menu = this.tribute.menu\r\n    }\r\n\r\n    bind(menu) {\r\n        this.menuClickEvent = this.tribute.events.click.bind(null, this)\r\n        this.menuContainerScrollEvent = this.debounce(() => {\r\n            if (this.tribute.isActive) {\r\n                this.tribute.showMenuFor(this.tribute.current.element, false)\r\n            }\r\n        }, 300, false)\r\n        this.windowResizeEvent = this.debounce(() => {\r\n            if (this.tribute.isActive) {\r\n                this.tribute.range.positionMenuAtCaret(true)\r\n            }\r\n        }, 300, false)\r\n\r\n        // fixes IE11 issues with mousedown\r\n        this.tribute.menuContainer.addEventListener('MSPointerDown',\r\n            this.menuClickEvent, false)\r\n        this.tribute.menuContainer.addEventListener('mousedown',\r\n            this.menuClickEvent, false)\r\n\r\n        this.tribute.range.getWindow().addEventListener('resize', this.windowResizeEvent)\r\n\r\n        if (this.menuContainer) {\r\n            this.menuContainer.addEventListener('scroll', this.menuContainerScrollEvent, false)\r\n        } else {\r\n            this.tribute.range.getWindow().addEventListener('scroll', this.menuContainerScrollEvent)\r\n        }\r\n\r\n    }\r\n\r\n    unbind(menu) {\r\n        this.tribute.range.getDocument().removeEventListener('mousedown',\r\n            this.menuClickEvent, false)\r\n        this.tribute.range.getDocument().removeEventListener('MSPointerDown',\r\n            this.menuClickEvent, false)\r\n        this.tribute.range.getWindow().removeEventListener('resize', this.windowResizeEvent)\r\n\r\n        if (this.menuContainer) {\r\n            this.menuContainer.removeEventListener('scroll', this.menuContainerScrollEvent, false)\r\n        } else {\r\n            this.tribute.range.getWindow().removeEventListener('scroll', this.menuContainerScrollEvent)\r\n        }\r\n    }\r\n\r\n    debounce(func, wait, immediate) {\r\n        var timeout\r\n        return () => {\r\n            var context = this,\r\n                args = arguments\r\n            var later = () => {\r\n                timeout = null\r\n                if (!immediate) func.apply(context, args)\r\n            }\r\n            var callNow = immediate && !timeout\r\n            clearTimeout(timeout)\r\n            timeout = setTimeout(later, wait)\r\n            if (callNow) func.apply(context, args)\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport default TributeMenuEvents;\r\n",
    "// Thanks to https://github.com/jeff-collins/ment.io\r\nclass TributeRange {\r\n    constructor(tribute) {\r\n        this.tribute = tribute\r\n        this.tribute.range = this\r\n    }\r\n\r\n    getDocument() {\r\n\r\n        let ownerDocument = null;\r\n        if (this.tribute.current.element && this.tribute.current.element.ownerDocument)\r\n            ownerDocument = this.tribute.current.element.ownerDocument;\r\n\r\n        if (this.tribute.current.element && !this.tribute.current.element.ownerDocument)\r\n            ownerDocument = this.tribute.current.element.parent.querySelector(this.tribute.current.element.tagName.toLowerCase().ownerDocument);\r\n\r\n        if (ownerDocument) {\r\n            return ownerDocument;\r\n        }\r\n\r\n        return document;\r\n    }\r\n\r\n    getWindowSelection() {\r\n        let ownerWindow = this.getWindow();\r\n\r\n        return ownerWindow.getSelection();\r\n    }\r\n\r\n    getWindow() {\r\n        let doc = this.getDocument();\r\n        let ownerWindow = (doc.defaultView) ?\r\n          doc.defaultView :\r\n          doc.parentWindow;\r\n\r\n        if (ownerWindow) {\r\n            return ownerWindow;\r\n        }\r\n\r\n        return window;\r\n    }\r\n\r\n    positionMenuAtCaret(scrollTo) {\r\n        let context = this.tribute.current,\r\n            coordinates\r\n\r\n        let info = this.getTriggerInfo(false, this.tribute.hasTrailingSpace, true, this.tribute.allowSpaces, this.tribute.autocompleteMode)\r\n\r\n        if (typeof info !== 'undefined') {\r\n\r\n            if (!this.tribute.positionMenu) {\r\n                this.tribute.menu.style.cssText = `display: block;`\r\n                return\r\n            }\r\n\r\n            if (!this.isContentEditable(context.element)) {\r\n                coordinates = this.getTextAreaOrInputUnderlinePosition(this.tribute.current.element,\r\n                    info.mentionPosition)\r\n            }\r\n            else {\r\n                coordinates = this.getContentEditableCaretPosition(info.mentionPosition)\r\n            }\r\n\r\n\r\n            this.tribute.menu.style.cssText = `top: ${coordinates.top}px;\r\n                                     left: ${coordinates.left}px;\r\n                                     right: ${coordinates.right}px;\r\n                                     bottom: ${coordinates.bottom}px;\r\n                                     position: absolute;\r\n                                     z-index: 10000;\r\n                                     display: block;`\r\n\r\n            if (coordinates.left === 'auto') {\r\n                this.tribute.menu.style.left = 'auto'\r\n            }\r\n\r\n            if (coordinates.top === 'auto') {\r\n                this.tribute.menu.style.top = 'auto'\r\n            }\r\n\r\n            if (scrollTo) this.scrollIntoView()\r\n\r\n            setTimeout(() => {\r\n                let menuDimensions = {\r\n                   width: this.tribute.menu.offsetWidth,\r\n                   height: this.tribute.menu.offsetHeight\r\n                }\r\n                let menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions)\r\n\r\n                let menuIsOffScreenHorizontally = this.getWindowSelection().innerWidth > menuDimensions.width && (menuIsOffScreen.left || menuIsOffScreen.right)\r\n                let menuIsOffScreenVertically = this.getWindowSelection().innerHeight > menuDimensions.height && (menuIsOffScreen.top || menuIsOffScreen.bottom)\r\n                if (menuIsOffScreenHorizontally || menuIsOffScreenVertically) {\r\n                    this.tribute.menu.style.cssText = 'display: none'\r\n                    this.positionMenuAtCaret(scrollTo)\r\n                }\r\n            }, 0)\r\n\r\n        } else {\r\n            this.tribute.menu.style.cssText = 'display: none'\r\n        }\r\n    }\r\n\r\n    selectElement(targetElement, path, offset) {\r\n        let range\r\n        let elem = targetElement\r\n\r\n        if (path) {\r\n            for (var i = 0; i < path.length; i++) {\r\n                elem = elem.childNodes[path[i]]\r\n                if (elem === undefined) {\r\n                    return\r\n                }\r\n                while (elem.length < offset) {\r\n                    offset -= elem.length\r\n                    elem = elem.nextSibling\r\n                }\r\n                if (elem.childNodes.length === 0 && !elem.length) {\r\n                    elem = elem.previousSibling\r\n                }\r\n            }\r\n        }\r\n        let sel = this.getWindowSelection()\r\n\r\n        range = this.getDocument().createRange()\r\n        range.setStart(elem, offset)\r\n        range.setEnd(elem, offset)\r\n        range.collapse(true)\r\n\r\n        try {\r\n            sel.removeAllRanges()\r\n        } catch (error) {}\r\n\r\n        sel.addRange(range)\r\n        targetElement.focus()\r\n    }\r\n\r\n    replaceTriggerText(text, requireLeadingSpace, hasTrailingSpace, originalEvent, item) {\r\n        let info = this.getTriggerInfo(true, hasTrailingSpace, requireLeadingSpace, this.tribute.allowSpaces, this.tribute.autocompleteMode)\r\n\r\n        if (info !== undefined) {\r\n            let context = this.tribute.current\r\n            let replaceEvent = new CustomEvent('tribute-replaced', {\r\n                detail: {\r\n                    item: item,\r\n                    instance: context,\r\n                    context: info,\r\n                    event: originalEvent,\r\n                }\r\n            })\r\n\r\n            if (!this.isContentEditable(context.element)) {\r\n                let myField = this.tribute.current.element\r\n                let textSuffix = typeof this.tribute.replaceTextSuffix == 'string'\r\n                    ? this.tribute.replaceTextSuffix\r\n                    : ' '\r\n                text += textSuffix\r\n                let startPos = info.mentionPosition\r\n                let endPos = info.mentionPosition + info.mentionText.length + textSuffix.length\r\n                myField.value = myField.value.substring(0, startPos) + text +\r\n                    myField.value.substring(endPos, myField.value.length)\r\n                myField.selectionStart = startPos + text.length\r\n                myField.selectionEnd = startPos + text.length\r\n            } else {\r\n                // add a space to the end of the pasted text\r\n                let textSuffix = typeof this.tribute.replaceTextSuffix == 'string'\r\n                    ? this.tribute.replaceTextSuffix\r\n                    : '\\xA0'\r\n                text += textSuffix\r\n                this.pasteHtml(text, info.mentionPosition,\r\n                    info.mentionPosition + info.mentionText.length + !this.tribute.autocompleteMode)\r\n            }\r\n\r\n            context.element.dispatchEvent(replaceEvent)\r\n        }\r\n    }\r\n\r\n    pasteHtml(html, startPos, endPos) {\r\n        let range, sel\r\n        sel = this.getWindowSelection()\r\n        range = this.getDocument().createRange()\r\n        range.setStart(sel.anchorNode, startPos)\r\n        range.setEnd(sel.anchorNode, endPos)\r\n        range.deleteContents()\r\n\r\n        let el = this.getDocument().createElement('div')\r\n        el.innerHTML = html\r\n        let frag = this.getDocument().createDocumentFragment(),\r\n            node, lastNode\r\n        while ((node = el.firstChild)) {\r\n            lastNode = frag.appendChild(node)\r\n        }\r\n        range.insertNode(frag)\r\n\r\n        // Preserve the selection\r\n        if (lastNode) {\r\n            range = range.cloneRange()\r\n            range.setStartAfter(lastNode)\r\n            range.collapse(true)\r\n            sel.removeAllRanges()\r\n            sel.addRange(range)\r\n        }\r\n    }\r\n\r\n    getNodePositionInParent(element) {\r\n        if (element.parentNode === null) {\r\n            return 0\r\n        }\r\n\r\n        for (var i = 0; i < element.parentNode.childNodes.length; i++) {\r\n            let node = element.parentNode.childNodes[i]\r\n\r\n            if (node === element) {\r\n                return i\r\n            }\r\n        }\r\n    }\r\n\r\n    getContentEditableSelectedPath(ctx) {\r\n        let sel = this.getWindowSelection()\r\n        let selected = sel.anchorNode\r\n        let path = []\r\n        let offset\r\n\r\n        if (selected != null) {\r\n            let i\r\n            let ce = selected.contentEditable\r\n            while (selected !== null && ce !== 'true') {\r\n                i = this.getNodePositionInParent(selected)\r\n                path.push(i)\r\n                selected = selected.parentNode\r\n                if (selected !== null) {\r\n                    ce = selected.contentEditable\r\n                }\r\n            }\r\n            path.reverse()\r\n\r\n            // getRangeAt may not exist, need alternative\r\n            offset = sel.getRangeAt(0).startOffset\r\n\r\n            return {\r\n                selected: selected,\r\n                path: path,\r\n                offset: offset\r\n            }\r\n        }\r\n    }\r\n\r\n    getTextPrecedingCurrentSelection() {\r\n        let context = this.tribute.current,\r\n            text = ''\r\n\r\n        if (!this.isContentEditable(context.element)) {\r\n            let textComponent = this.tribute.current.element;\r\n            if (textComponent) {\r\n                let startPos = textComponent.selectionStart\r\n                if (textComponent.value && startPos >= 0) {\r\n                    text = textComponent.value.substring(0, startPos)\r\n                }\r\n            }\r\n\r\n        } else {\r\n            let selectedElem = this.getWindowSelection().anchorNode\r\n\r\n            if (selectedElem != null) {\r\n                let workingNodeContent = selectedElem.textContent\r\n                let selectStartOffset = this.getWindowSelection().getRangeAt(0).startOffset\r\n\r\n                if (workingNodeContent && selectStartOffset >= 0) {\r\n                    text = workingNodeContent.substring(0, selectStartOffset)\r\n                }\r\n            }\r\n        }\r\n\r\n        return text\r\n    }\r\n\r\n    getLastWordInText(text) {\r\n        text = text.replace(/\\u00A0/g, ' '); // https://stackoverflow.com/questions/29850407/how-do-i-replace-unicode-character-u00a0-with-a-space-in-javascript\r\n        let wordsArray = text.split(' ')\r\n        let worldsCount = wordsArray.length - 1\r\n        return wordsArray[worldsCount].trim()\r\n    }\r\n\r\n    getTriggerInfo(menuAlreadyActive, hasTrailingSpace, requireLeadingSpace, allowSpaces, isAutocomplete) {\r\n        let ctx = this.tribute.current\r\n        let selected, path, offset\r\n\r\n        if (!this.isContentEditable(ctx.element)) {\r\n            selected = this.tribute.current.element\r\n        } else {\r\n            let selectionInfo = this.getContentEditableSelectedPath(ctx)\r\n\r\n            if (selectionInfo) {\r\n                selected = selectionInfo.selected\r\n                path = selectionInfo.path\r\n                offset = selectionInfo.offset\r\n            }\r\n        }\r\n\r\n        let effectiveRange = this.getTextPrecedingCurrentSelection()\r\n        let lastWordOfEffectiveRange = this.getLastWordInText(effectiveRange)\r\n\r\n        if (isAutocomplete) {\r\n            return {\r\n                mentionPosition: effectiveRange.length - lastWordOfEffectiveRange.length,\r\n                mentionText: lastWordOfEffectiveRange,\r\n                mentionSelectedElement: selected,\r\n                mentionSelectedPath: path,\r\n                mentionSelectedOffset: offset\r\n            }\r\n        }\r\n\r\n        if (effectiveRange !== undefined && effectiveRange !== null) {\r\n            let mostRecentTriggerCharPos = -1\r\n            let triggerChar\r\n\r\n            this.tribute.collection.forEach(config => {\r\n                let c = config.trigger\r\n                let idx = config.requireLeadingSpace ?\r\n                    this.lastIndexWithLeadingSpace (effectiveRange, c) :\r\n                    effectiveRange.lastIndexOf(c)\r\n\r\n                if (idx > mostRecentTriggerCharPos) {\r\n                    mostRecentTriggerCharPos = idx\r\n                    triggerChar = c\r\n                    requireLeadingSpace = config.requireLeadingSpace\r\n                }\r\n            })\r\n\r\n            if (mostRecentTriggerCharPos >= 0 &&\r\n                (\r\n                    mostRecentTriggerCharPos === 0 ||\r\n                    !requireLeadingSpace ||\r\n                    /[\\xA0\\s]/g.test(\r\n                        effectiveRange.substring(\r\n                            mostRecentTriggerCharPos - 1,\r\n                            mostRecentTriggerCharPos)\r\n                    )\r\n                )\r\n            ) {\r\n                let currentTriggerSnippet = effectiveRange.substring(mostRecentTriggerCharPos + 1,\r\n                    effectiveRange.length)\r\n\r\n                triggerChar = effectiveRange.substring(mostRecentTriggerCharPos, mostRecentTriggerCharPos + 1)\r\n                let firstSnippetChar = currentTriggerSnippet.substring(0, 1)\r\n                let leadingSpace = currentTriggerSnippet.length > 0 &&\r\n                    (\r\n                        firstSnippetChar === ' ' ||\r\n                        firstSnippetChar === '\\xA0'\r\n                    )\r\n                if (hasTrailingSpace) {\r\n                    currentTriggerSnippet = currentTriggerSnippet.trim()\r\n                }\r\n\r\n                let regex = allowSpaces ? /[^\\S ]/g : /[\\xA0\\s]/g;\r\n\r\n                this.tribute.hasTrailingSpace = regex.test(currentTriggerSnippet);\r\n\r\n                if (!leadingSpace && (menuAlreadyActive || !(regex.test(currentTriggerSnippet)))) {\r\n                    return {\r\n                        mentionPosition: mostRecentTriggerCharPos,\r\n                        mentionText: currentTriggerSnippet,\r\n                        mentionSelectedElement: selected,\r\n                        mentionSelectedPath: path,\r\n                        mentionSelectedOffset: offset,\r\n                        mentionTriggerChar: triggerChar\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    lastIndexWithLeadingSpace(str, char) {\r\n        let reversedStr = str.split('').reverse().join('')\r\n        let index = -1\r\n\r\n        for (let cidx = 0, len = str.length; cidx < len; cidx++) {\r\n            let firstChar = cidx === str.length - 1\r\n            let leadingSpace = /\\s/.test(reversedStr[cidx + 1])\r\n            let match = char === reversedStr[cidx]\r\n\r\n            if (match && (firstChar || leadingSpace)) {\r\n                index = str.length - 1 - cidx\r\n                break\r\n            }\r\n        }\r\n\r\n        return index\r\n    }\r\n\r\n    isContentEditable(element) {\r\n        return element.nodeName !== 'INPUT' && element.nodeName !== 'TEXTAREA'\r\n    }\r\n\r\n    isMenuOffScreen(coordinates, menuDimensions) {\r\n        let windowObject = this.getWindowSelection();\r\n        let windowWidth = windowObject.innerWidth\r\n        let windowHeight = windowObject.innerHeight\r\n        let doc = document.documentElement\r\n        let windowLeft = (windowObject.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0)\r\n        let windowTop = (windowObject.pageYOffset || doc.scrollTop) - (doc.clientTop || 0)\r\n\r\n        let menuTop = typeof coordinates.top === 'number' ? coordinates.top : windowTop + windowHeight - coordinates.bottom - menuDimensions.height\r\n        let menuRight = typeof coordinates.right === 'number' ? coordinates.right : coordinates.left + menuDimensions.width\r\n        let menuBottom = typeof coordinates.bottom === 'number' ? coordinates.bottom : coordinates.top + menuDimensions.height\r\n        let menuLeft = typeof coordinates.left === 'number' ? coordinates.left : windowLeft + windowWidth - coordinates.right - menuDimensions.width\r\n\r\n        return {\r\n            top: menuTop < Math.floor(windowTop),\r\n            right: menuRight > Math.ceil(windowLeft + windowWidth),\r\n            bottom: menuBottom > Math.ceil(windowTop + windowHeight),\r\n            left: menuLeft < Math.floor(windowLeft)\r\n        }\r\n    }\r\n\r\n    getMenuDimensions() {\r\n        // Width of the menu depends of its contents and position\r\n        // We must check what its width would be without any obstruction\r\n        // This way, we can achieve good positioning for flipping the menu\r\n        let dimensions = {\r\n            width: null,\r\n            height: null\r\n        }\r\n\r\n        this.tribute.menu.style.cssText = `top: 0px;\r\n                                 left: 0px;\r\n                                 position: fixed;\r\n                                 zIndex: 10000;\r\n                                 display: block;\r\n                                 visibility; hidden;`\r\n       dimensions.width = this.tribute.menu.offsetWidth\r\n       dimensions.height = this.tribute.menu.offsetHeight\r\n\r\n       this.tribute.menu.style.cssText = `display: none;`\r\n\r\n       return dimensions\r\n    }\r\n\r\n    getTextAreaOrInputUnderlinePosition(element, position, flipped) {\r\n        let properties = ['direction', 'boxSizing', 'width', 'height', 'overflowX',\r\n            'overflowY', 'borderTopWidth', 'borderRightWidth',\r\n            'borderBottomWidth', 'borderLeftWidth', 'paddingTop',\r\n            'paddingRight', 'paddingBottom', 'paddingLeft',\r\n            'fontStyle', 'fontVariant', 'fontWeight', 'fontStretch',\r\n            'fontSize', 'fontSizeAdjust', 'lineHeight', 'fontFamily',\r\n            'textAlign', 'textTransform', 'textIndent',\r\n            'textDecoration', 'letterSpacing', 'wordSpacing'\r\n        ]\r\n\r\n        let isFirefox = (this.getWindowSelection().mozInnerScreenX !== null)\r\n\r\n        let div = this.getDocument().createElement('div')\r\n        div.id = 'input-textarea-caret-position-mirror-div'\r\n        this.getDocument().body.appendChild(div)\r\n\r\n        let style = div.style\r\n        let computed = this.getWindowSelection().getComputedStyle ? getComputedStyle(element) : element.currentStyle\r\n\r\n        style.whiteSpace = 'pre-wrap'\r\n        if (element.nodeName !== 'INPUT') {\r\n            style.wordWrap = 'break-word'\r\n        }\r\n\r\n        // position off-screen\r\n        style.position = 'absolute'\r\n        style.visibility = 'hidden'\r\n\r\n        // transfer the element's properties to the div\r\n        properties.forEach(prop => {\r\n            style[prop] = computed[prop]\r\n        })\r\n\r\n        if (isFirefox) {\r\n            style.width = `${(parseInt(computed.width) - 2)}px`\r\n            if (element.scrollHeight > parseInt(computed.height))\r\n                style.overflowY = 'scroll'\r\n        } else {\r\n            style.overflow = 'hidden'\r\n        }\r\n\r\n        div.textContent = element.value.substring(0, position)\r\n\r\n        if (element.nodeName === 'INPUT') {\r\n            div.textContent = div.textContent.replace(/\\s/g, ' ')\r\n        }\r\n\r\n        let span = this.getDocument().createElement('span')\r\n        span.textContent = element.value.substring(position) || '.'\r\n        div.appendChild(span)\r\n\r\n        let rect = element.getBoundingClientRect()\r\n        let doc = document.documentElement\r\n        let windowLeft = (this.getWindowSelection().pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0)\r\n        let windowTop = (this.getWindowSelection().pageYOffset || doc.scrollTop) - (doc.clientTop || 0)\r\n\r\n        let coordinates = {\r\n            top: rect.top + windowTop + span.offsetTop + parseInt(computed.borderTopWidth) + parseInt(computed.fontSize) - element.scrollTop,\r\n            left: rect.left + windowLeft + span.offsetLeft + parseInt(computed.borderLeftWidth)\r\n        }\r\n\r\n        let windowWidth = this.getWindowSelection().innerWidth\r\n        let windowHeight = this.getWindowSelection().innerHeight\r\n\r\n        let menuDimensions = this.getMenuDimensions()\r\n        let menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions)\r\n\r\n        if (menuIsOffScreen.right) {\r\n            coordinates.right = windowWidth - coordinates.left\r\n            coordinates.left = 'auto'\r\n        }\r\n\r\n        let parentHeight = this.tribute.menuContainer\r\n            ? this.tribute.menuContainer.offsetHeight\r\n            : this.getDocument().body.offsetHeight\r\n\r\n        if (menuIsOffScreen.bottom) {\r\n            let parentRect = this.tribute.menuContainer\r\n                ? this.tribute.menuContainer.getBoundingClientRect()\r\n                : this.getDocument().body.getBoundingClientRect()\r\n            let scrollStillAvailable = parentHeight - (windowHeight - parentRect.top)\r\n\r\n            coordinates.bottom = scrollStillAvailable + (windowHeight - rect.top - span.offsetTop)\r\n            coordinates.top = 'auto'\r\n        }\r\n\r\n        menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions)\r\n        if (menuIsOffScreen.left) {\r\n            coordinates.left = windowWidth > menuDimensions.width\r\n                ? windowLeft + windowWidth - menuDimensions.width\r\n                : windowLeft\r\n            delete coordinates.right\r\n        }\r\n        if (menuIsOffScreen.top) {\r\n            coordinates.top = windowHeight > menuDimensions.height\r\n                ? windowTop + windowHeight - menuDimensions.height\r\n                : windowTop\r\n            delete coordinates.bottom\r\n        }\r\n\r\n        this.getDocument().body.removeChild(div)\r\n        return coordinates\r\n    }\r\n\r\n    getContentEditableCaretPosition(selectedNodePosition) {\r\n        let markerTextChar = '﻿'\r\n        let markerEl, markerId = `sel_${new Date().getTime()}_${Math.random().toString().substr(2)}`\r\n        let range\r\n        let sel = this.getWindowSelection()\r\n        let prevRange = sel.getRangeAt(0)\r\n\r\n        range = this.getDocument().createRange()\r\n        range.setStart(sel.anchorNode, selectedNodePosition)\r\n        range.setEnd(sel.anchorNode, selectedNodePosition)\r\n\r\n        range.collapse(false)\r\n\r\n        // Create the marker element containing a single invisible character using DOM methods and insert it\r\n        markerEl = this.getDocument().createElement('span')\r\n        markerEl.id = markerId\r\n\r\n        markerEl.appendChild(this.getDocument().createTextNode(markerTextChar))\r\n        range.insertNode(markerEl)\r\n        sel.removeAllRanges()\r\n        sel.addRange(prevRange)\r\n\r\n        let rect = markerEl.getBoundingClientRect()\r\n        let doc = document.documentElement\r\n        let windowLeft = (this.getWindowSelection().pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0)\r\n        let windowTop = (this.getWindowSelection().pageYOffset || doc.scrollTop) - (doc.clientTop || 0)\r\n        let coordinates = {\r\n            left: rect.left + windowLeft,\r\n            top: rect.top + markerEl.offsetHeight + windowTop\r\n        }\r\n        let windowWidth = this.getWindowSelection().innerWidth\r\n        let windowHeight = this.getWindowSelection().innerHeight\r\n\r\n        let menuDimensions = this.getMenuDimensions()\r\n        let menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions)\r\n\r\n        if (menuIsOffScreen.right) {\r\n            coordinates.left = 'auto'\r\n            coordinates.right = windowWidth - rect.left - windowLeft\r\n        }\r\n\r\n        let parentHeight = this.tribute.menuContainer\r\n            ? this.tribute.menuContainer.offsetHeight\r\n            : this.getDocument().body.offsetHeight\r\n\r\n        if (menuIsOffScreen.bottom) {\r\n            let parentRect = this.tribute.menuContainer\r\n                ? this.tribute.menuContainer.getBoundingClientRect()\r\n                : this.getDocument().body.getBoundingClientRect()\r\n            let scrollStillAvailable = parentHeight - (windowHeight - parentRect.top)\r\n\r\n            coordinates.top = 'auto'\r\n            coordinates.bottom = scrollStillAvailable + (windowHeight - rect.top)\r\n        }\r\n\r\n        menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions)\r\n        if (menuIsOffScreen.left) {\r\n            coordinates.left = windowWidth > menuDimensions.width\r\n                ? windowLeft + windowWidth - menuDimensions.width\r\n                : windowLeft\r\n            delete coordinates.right\r\n        }\r\n        if (menuIsOffScreen.top) {\r\n            coordinates.top = windowHeight > menuDimensions.height\r\n                ? windowTop + windowHeight - menuDimensions.height\r\n                : windowTop\r\n            delete coordinates.bottom\r\n        }\r\n\r\n        markerEl.parentNode.removeChild(markerEl)\r\n        return coordinates\r\n    }\r\n\r\n    scrollIntoView(elem) {\r\n        let reasonableBuffer = 20,\r\n            clientRect\r\n        let maxScrollDisplacement = 100\r\n        let e = this.menu\r\n\r\n        if (typeof e === 'undefined') return;\r\n\r\n        while (clientRect === undefined || clientRect.height === 0) {\r\n            clientRect = e.getBoundingClientRect()\r\n\r\n            if (clientRect.height === 0) {\r\n                e = e.childNodes[0]\r\n                if (e === undefined || !e.getBoundingClientRect) {\r\n                    return\r\n                }\r\n            }\r\n        }\r\n\r\n        let elemTop = clientRect.top\r\n        let elemBottom = elemTop + clientRect.height\r\n\r\n        if (elemTop < 0) {\r\n            this.getWindowSelection().scrollTo(0, this.getWindowSelection().pageYOffset + clientRect.top - reasonableBuffer)\r\n        } else if (elemBottom > this.getWindowSelection().innerHeight) {\r\n            let maxY = this.getWindowSelection().pageYOffset + clientRect.top - reasonableBuffer\r\n\r\n            if (maxY - this.getWindowSelection().pageYOffset > maxScrollDisplacement) {\r\n                maxY = this.getWindowSelection().pageYOffset + maxScrollDisplacement\r\n            }\r\n\r\n            let targetY = this.getWindowSelection().pageYOffset - (this.getWindowSelection().innerHeight - elemBottom)\r\n\r\n            if (targetY > maxY) {\r\n                targetY = maxY\r\n            }\r\n\r\n            this.getWindowSelection().scrollTo(0, targetY)\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport default TributeRange;\r\n",
    "// Thanks to https://github.com/mattyork/fuzzy\r\nclass TributeSearch {\r\n    constructor(tribute) {\r\n        this.tribute = tribute\r\n        this.tribute.search = this\r\n    }\r\n\r\n    simpleFilter(pattern, array) {\r\n        return array.filter(string => {\r\n            return this.test(pattern, string)\r\n        })\r\n    }\r\n\r\n    test(pattern, string) {\r\n        return this.match(pattern, string) !== null\r\n    }\r\n\r\n    match(pattern, string, opts) {\r\n        opts = opts || {}\r\n        let patternIdx = 0,\r\n            result = [],\r\n            len = string.length,\r\n            totalScore = 0,\r\n            currScore = 0,\r\n            pre = opts.pre || '',\r\n            post = opts.post || '',\r\n            compareString = opts.caseSensitive && string || string.toLowerCase(),\r\n            ch, compareChar\r\n\r\n        if (opts.skip) {\r\n            return {rendered: string, score: 0}\r\n        }\r\n\r\n        pattern = opts.caseSensitive && pattern || pattern.toLowerCase()\r\n\r\n        let patternCache = this.traverse(compareString, pattern, 0, 0, [])\r\n        if (!patternCache) {\r\n            return null\r\n        }\r\n        return {\r\n            rendered: this.render(string, patternCache.cache, pre, post),\r\n            score: patternCache.score\r\n        }\r\n    }\r\n\r\n    traverse(string, pattern, stringIndex, patternIndex, patternCache) {\r\n        // if the pattern search at end\r\n        if (pattern.length === patternIndex) {\r\n\r\n            // calculate score and copy the cache containing the indices where it's found\r\n            return {\r\n                score: this.calculateScore(patternCache),\r\n                cache: patternCache.slice()\r\n            }\r\n        }\r\n\r\n        // if string at end or remaining pattern > remaining string\r\n        if (string.length === stringIndex || pattern.length - patternIndex > string.length - stringIndex) {\r\n            return undefined\r\n        }\r\n\r\n        let c = pattern[patternIndex]\r\n        let index = string.indexOf(c, stringIndex)\r\n        let best, temp\r\n\r\n        while (index > -1) {\r\n            patternCache.push(index)\r\n            temp = this.traverse(string, pattern, index + 1, patternIndex + 1, patternCache)\r\n            patternCache.pop()\r\n\r\n            // if downstream traversal failed, return best answer so far\r\n            if (!temp) {\r\n                return best\r\n            }\r\n\r\n            if (!best || best.score < temp.score) {\r\n                best = temp\r\n            }\r\n\r\n            index = string.indexOf(c, index + 1)\r\n        }\r\n\r\n        return best\r\n    }\r\n\r\n    calculateScore(patternCache) {\r\n        let score = 0\r\n        let temp = 1\r\n\r\n        patternCache.forEach((index, i) => {\r\n            if (i > 0) {\r\n                if (patternCache[i - 1] + 1 === index) {\r\n                    temp += temp + 1\r\n                }\r\n                else {\r\n                    temp = 1\r\n                }\r\n            }\r\n\r\n            score += temp\r\n        })\r\n\r\n        return score\r\n    }\r\n\r\n    render(string, indices, pre, post) {\r\n        var rendered = string.substring(0, indices[0])\r\n\r\n        indices.forEach((index, i) => {\r\n            rendered += pre + string[index] + post +\r\n                string.substring(index + 1, (indices[i + 1]) ? indices[i + 1] : string.length)\r\n        })\r\n\r\n        return rendered\r\n    }\r\n\r\n    filter(pattern, arr, opts) {\r\n        opts = opts || {}\r\n        return arr\r\n            .reduce((prev, element, idx, arr) => {\r\n                let str = element\r\n\r\n                if (opts.extract) {\r\n                    str = opts.extract(element)\r\n\r\n                    if (!str) { // take care of undefineds / nulls / etc.\r\n                        str = ''\r\n                    }\r\n                }\r\n\r\n                let rendered = this.match(pattern, str, opts)\r\n\r\n                if (rendered != null) {\r\n                    prev[prev.length] = {\r\n                        string: rendered.rendered,\r\n                        score: rendered.score,\r\n                        index: idx,\r\n                        original: element\r\n                    }\r\n                }\r\n\r\n                return prev\r\n            }, [])\r\n\r\n        .sort((a, b) => {\r\n            let compare = b.score - a.score\r\n            if (compare) return compare\r\n            return a.index - b.index\r\n        })\r\n    }\r\n}\r\n\r\nexport default TributeSearch;\r\n",
    "/**\r\n* Tribute.js\r\n* Native ES6 JavaScript @mention Plugin\r\n**/\r\n\r\nimport Tribute from \"./Tribute\";\r\n\r\nexport default Tribute;\r\n",
    "if (!Array.prototype.find) {\r\n    Array.prototype.find = function(predicate) {\r\n        if (this === null) {\r\n            throw new TypeError('Array.prototype.find called on null or undefined')\r\n        }\r\n        if (typeof predicate !== 'function') {\r\n            throw new TypeError('predicate must be a function')\r\n        }\r\n        var list = Object(this)\r\n        var length = list.length >>> 0\r\n        var thisArg = arguments[1]\r\n        var value\r\n\r\n        for (var i = 0; i < length; i++) {\r\n            value = list[i]\r\n            if (predicate.call(thisArg, value, i, list)) {\r\n                return value\r\n            }\r\n        }\r\n        return undefined\r\n    }\r\n}\r\n\r\nif (window && typeof window.CustomEvent !== \"function\") {\r\n  function CustomEvent(event, params) {\r\n    params = params || {\r\n      bubbles: false,\r\n      cancelable: false,\r\n      detail: undefined\r\n    }\r\n    var evt = document.createEvent('CustomEvent')\r\n    evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail)\r\n    return evt\r\n  }\r\n\r\n if (typeof window.Event !== 'undefined') {\r\n   CustomEvent.prototype = window.Event.prototype\r\n }\r\n\r\n  window.CustomEvent = CustomEvent\r\n}\r\n"
  ]
}