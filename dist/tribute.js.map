{
  "version": 3,
  "sources": [
    "node_modules/browser-pack/_prelude.js",
    "src/Tribute.js",
    "src/TributeEvents.js",
    "src/TributeMenuEvents.js",
    "src/TributeRange.js",
    "src/TributeSearch.js",
    "src/index.js",
    "src/utils.js"
  ],
  "names": [],
  "mappings": "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",
  "file": "generated.js",
  "sourceRoot": "",
  "sourcesContent": [
    "(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()",
    "import TributeUtils from \"./utils\";\r\nimport TributeEvents from \"./TributeEvents\";\r\nimport TributeMenuEvents from \"./TributeMenuEvents\";\r\nimport TributeRange from \"./TributeRange\";\r\nimport TributeSearch from \"./TributeSearch\";\r\n\r\nclass Tribute {\r\n    constructor({\r\n        values = null,\r\n        iframe = null,\r\n        selectClass = 'highlight',\r\n        trigger = '@',\r\n        autocompleteMode = false,\r\n        selectTemplate = null,\r\n        menuItemTemplate = null,\r\n        lookup = 'key',\r\n        fillAttr = 'value',\r\n        collection = null,\r\n        menuContainer = null,\r\n        noMatchTemplate = null,\r\n        requireLeadingSpace = true,\r\n        allowSpaces = false,\r\n        replaceTextSuffix = null,\r\n        positionMenu = true,\r\n        spaceSelectsMatch = false,\r\n        searchOpts = {},\r\n        menuItemLimit = null,\r\n    }) {\r\n        this.autocompleteMode = autocompleteMode\r\n        this.menuSelected = 0\r\n        this.current = {}\r\n        this.inputEvent = false\r\n        this.isActive = false\r\n        this.menuContainer = menuContainer\r\n        this.allowSpaces = allowSpaces\r\n        this.replaceTextSuffix = replaceTextSuffix\r\n        this.positionMenu = positionMenu\r\n        this.hasTrailingSpace = false;\r\n        this.spaceSelectsMatch = spaceSelectsMatch;\r\n\r\n        if (this.autocompleteMode) {\r\n            trigger = ''\r\n            allowSpaces = false\r\n        }\r\n\r\n        if (values) {\r\n            this.collection = [{\r\n                // symbol that starts the lookup\r\n                trigger: trigger,\r\n\r\n                // is it wrapped in an iframe\r\n                iframe: iframe,\r\n\r\n                // class applied to selected item\r\n                selectClass: selectClass,\r\n\r\n                // function called on select that retuns the content to insert\r\n                selectTemplate: (selectTemplate || Tribute.defaultSelectTemplate).bind(this),\r\n\r\n                // function called that returns content for an item\r\n                menuItemTemplate: (menuItemTemplate || Tribute.defaultMenuItemTemplate).bind(this),\r\n\r\n                // function called when menu is empty, disables hiding of menu.\r\n                noMatchTemplate: (t => {\r\n                    if (typeof t === 'function') {\r\n                        return t.bind(this)\r\n                    }\r\n\r\n                    return noMatchTemplate || function () {return ''}.bind(this)\r\n                })(noMatchTemplate),\r\n\r\n                // column to search against in the object\r\n                lookup: lookup,\r\n\r\n                // column that contains the content to insert by default\r\n                fillAttr: fillAttr,\r\n\r\n                // array of objects or a function returning an array of objects\r\n                values: values,\r\n\r\n                requireLeadingSpace: requireLeadingSpace,\r\n\r\n                searchOpts: searchOpts,\r\n\r\n                menuItemLimit: menuItemLimit,\r\n            }]\r\n        }\r\n        else if (collection) {\r\n            if (this.autocompleteMode)\r\n                console.warn('Tribute in autocomplete mode does not work for collections')\r\n            this.collection = collection.map(item => {\r\n                return {\r\n                    trigger: item.trigger || trigger,\r\n                    iframe: item.iframe || iframe,\r\n                    selectClass: item.selectClass || selectClass,\r\n                    selectTemplate: (item.selectTemplate || Tribute.defaultSelectTemplate).bind(this),\r\n                    menuItemTemplate: (item.menuItemTemplate || Tribute.defaultMenuItemTemplate).bind(this),\r\n                    // function called when menu is empty, disables hiding of menu.\r\n                    noMatchTemplate: (t => {\r\n                        if (typeof t === 'function') {\r\n                            return t.bind(this)\r\n                        }\r\n\r\n                        return null\r\n                    })(noMatchTemplate),\r\n                    lookup: item.lookup || lookup,\r\n                    fillAttr: item.fillAttr || fillAttr,\r\n                    values: item.values,\r\n                    requireLeadingSpace: item.requireLeadingSpace,\r\n                    searchOpts: item.searchOpts || searchOpts,\r\n                    menuItemLimit: item.menuItemLimit || menuItemLimit,\r\n                }\r\n            })\r\n        }\r\n        else {\r\n            throw new Error('[Tribute] No collection specified.')\r\n        }\r\n\r\n        new TributeRange(this)\r\n        new TributeEvents(this)\r\n        new TributeMenuEvents(this)\r\n        new TributeSearch(this)\r\n    }\r\n\r\n    static defaultSelectTemplate(item) {\r\n      if (typeof item === 'undefined') return null;\r\n      if (this.range.isContentEditable(this.current.element)) {\r\n          return '<span class=\"tribute-mention\">' + (this.current.collection.trigger + item.original[this.current.collection.fillAttr]) + '</span>';\r\n      }\r\n\r\n      return this.current.collection.trigger + item.original[this.current.collection.fillAttr];\r\n    }\r\n\r\n    static defaultMenuItemTemplate(matchItem) {\r\n        return matchItem.string\r\n    }\r\n\r\n    static inputTypes() {\r\n        return ['TEXTAREA', 'INPUT']\r\n    }\r\n\r\n    triggers() {\r\n        return this.collection.map(config => {\r\n            return config.trigger\r\n        })\r\n    }\r\n\r\n    attach(el) {\r\n        if (!el) {\r\n            throw new Error('[Tribute] Must pass in a DOM node or NodeList.')\r\n        }\r\n\r\n        // Check if it is a jQuery collection\r\n        if (typeof jQuery !== 'undefined' && el instanceof jQuery) {\r\n            el = el.get()\r\n        }\r\n\r\n        // Is el an Array/Array-like object?\r\n        if (el.constructor === NodeList || el.constructor === HTMLCollection || el.constructor === Array) {\r\n            let length = el.length\r\n            for (var i = 0; i < length; ++i) {\r\n                this._attach(el[i])\r\n            }\r\n        } else {\r\n            this._attach(el)\r\n        }\r\n    }\r\n\r\n    _attach(el) {\r\n        if (el.hasAttribute('data-tribute')) {\r\n            console.warn('Tribute was already bound to ' + el.nodeName)\r\n        }\r\n\r\n        this.ensureEditable(el)\r\n        this.events.bind(el)\r\n        el.setAttribute('data-tribute', true)\r\n    }\r\n\r\n    ensureEditable(element) {\r\n        if (Tribute.inputTypes().indexOf(element.nodeName) === -1) {\r\n            if (element.contentEditable) {\r\n                element.contentEditable = true\r\n            } else {\r\n                throw new Error('[Tribute] Cannot bind to ' + element.nodeName)\r\n            }\r\n        }\r\n    }\r\n\r\n    createMenu() {\r\n        let wrapper = this.range.getDocument().createElement('div'),\r\n            ul = this.range.getDocument().createElement('ul')\r\n\r\n        wrapper.className = 'tribute-container'\r\n        wrapper.appendChild(ul)\r\n\r\n        if (this.menuContainer) {\r\n            return this.menuContainer.appendChild(wrapper)\r\n        }\r\n\r\n        return this.range.getDocument().body.appendChild(wrapper)\r\n    }\r\n\r\n    showMenuFor(element, scrollTo) {\r\n        // Only proceed if menu isn't already shown for the current element & mentionText\r\n        if (this.isActive && this.current.element === element && this.current.mentionText === this.currentMentionTextSnapshot) {\r\n          return\r\n        }\r\n        this.currentMentionTextSnapshot = this.current.mentionText\r\n\r\n        // create the menu if it doesn't exist.\r\n        if (!this.menu) {\r\n            this.menu = this.createMenu()\r\n            element.tributeMenu = this.menu\r\n            this.menuEvents.bind(this.menu)\r\n        }\r\n\r\n        this.isActive = true\r\n        this.menuSelected = 0\r\n\r\n        if (!this.current.mentionText) {\r\n            this.current.mentionText = ''\r\n        }\r\n\r\n        const processValues = (values) => {\r\n            // Tribute may not be active any more by the time the value callback returns\r\n            if (!this.isActive) {\r\n                return\r\n            }\r\n\r\n            let items = this.search.filter(this.current.mentionText, values, {\r\n                pre: this.current.collection.searchOpts.pre || '<span>',\r\n                post: this.current.collection.searchOpts.post || '</span>',\r\n                skip: this.current.collection.searchOpts.skip,\r\n                extract: (el) => {\r\n                    if (typeof this.current.collection.lookup === 'string') {\r\n                        return el[this.current.collection.lookup]\r\n                    } else if (typeof this.current.collection.lookup === 'function') {\r\n                        return this.current.collection.lookup(el, this.current.mentionText)\r\n                    } else {\r\n                        throw new Error('Invalid lookup attribute, lookup must be string or function.')\r\n                    }\r\n                }\r\n            })\r\n\r\n            this.current.filteredItems = items\r\n\r\n\r\n            let ul = this.menu.querySelector('ul')\r\n\r\n            this.range.positionMenuAtCaret(scrollTo)\r\n\r\n            if (!items.length) {\r\n                let noMatchEvent = new CustomEvent('tribute-no-match', { detail: this.menu })\r\n                this.current.element.dispatchEvent(noMatchEvent)\r\n                if ( typeof this.current.collection.noMatchTemplate === 'function' && !this.current.collection.noMatchTemplate() || !this.current.collection.noMatchTemplate) {\r\n                    this.hideMenu()\r\n                } else {\r\n                    typeof this.current.collection.noMatchTemplate === 'function' ? ul.innerHTML = this.current.collection.noMatchTemplate() : ul.innerHTML = this.current.collection.noMatchTemplate\r\n                }\r\n\r\n                return\r\n            }\r\n\r\n            if (this.current.collection.menuItemLimit) {\r\n                items = items.slice(0, this.current.collection.menuItemLimit)\r\n            }\r\n\r\n            ul.innerHTML = ''\r\n            let fragment = this.range.getDocument().createDocumentFragment()\r\n\r\n            items.forEach((item, index) => {\r\n                let li = this.range.getDocument().createElement('li')\r\n                li.setAttribute('data-index', index)\r\n                li.addEventListener('mousemove', (e) => {\r\n                    let [li, index] = this._findLiTarget(e.target)\r\n                    if (e.movementY !== 0) {\r\n                        this.events.setActiveLi(index)\r\n                    }\r\n                })\r\n                if (this.menuSelected === index) {\r\n                  li.className = this.current.collection.selectClass\r\n                }\r\n                li.innerHTML = this.current.collection.menuItemTemplate(item)\r\n                fragment.appendChild(li)\r\n            })\r\n            ul.appendChild(fragment)\r\n        }\r\n\r\n        if (typeof this.current.collection.values === 'function') {\r\n            this.current.collection.values(this.current.mentionText, processValues)\r\n        } else {\r\n            processValues(this.current.collection.values)\r\n        }\r\n    }\r\n\r\n    _findLiTarget(el) {\r\n        if (!el) return []\r\n        const index = el.getAttribute('data-index');\r\n        return !index ?\r\n            this._findLiTarget(el.parentNode) :\r\n            [el, index]\r\n    }\r\n\r\n    showMenuForCollection(element, collectionIndex) {\r\n        if (element !== document.activeElement) {\r\n            this.placeCaretAtEnd(element)\r\n        }\r\n\r\n        this.current.collection = this.collection[collectionIndex || 0]\r\n        this.current.externalTrigger = true\r\n        this.current.element = element\r\n\r\n        if (element.isContentEditable)\r\n            this.insertTextAtCursor(this.current.collection.trigger)\r\n        else\r\n            this.insertAtCaret(element, this.current.collection.trigger)\r\n\r\n        this.showMenuFor(element)\r\n    }\r\n\r\n    // TODO: make sure this works for inputs/textareas\r\n    placeCaretAtEnd(el) {\r\n        el.focus();\r\n        if (typeof window.getSelection != \"undefined\"\r\n                && typeof document.createRange != \"undefined\") {\r\n            var range = document.createRange();\r\n            range.selectNodeContents(el);\r\n            range.collapse(false);\r\n            var sel = window.getSelection();\r\n            sel.removeAllRanges();\r\n            sel.addRange(range);\r\n        } else if (typeof document.body.createTextRange != \"undefined\") {\r\n            var textRange = document.body.createTextRange();\r\n            textRange.moveToElementText(el);\r\n            textRange.collapse(false);\r\n            textRange.select();\r\n        }\r\n    }\r\n\r\n    // for contenteditable\r\n    insertTextAtCursor(text) {\r\n        var sel, range, html;\r\n        sel = window.getSelection();\r\n        range = sel.getRangeAt(0);\r\n        range.deleteContents();\r\n        var textNode = document.createTextNode(text);\r\n        range.insertNode(textNode);\r\n        range.selectNodeContents(textNode)\r\n        range.collapse(false)\r\n        sel.removeAllRanges()\r\n        sel.addRange(range)\r\n    }\r\n\r\n    // for regular inputs\r\n    insertAtCaret(textarea, text) {\r\n        var scrollPos = textarea.scrollTop;\r\n        var caretPos = textarea.selectionStart;\r\n\r\n        var front = (textarea.value).substring(0, caretPos);\r\n        var back = (textarea.value).substring(textarea.selectionEnd, textarea.value.length);\r\n        textarea.value = front + text + back;\r\n        caretPos = caretPos + text.length;\r\n        textarea.selectionStart = caretPos;\r\n        textarea.selectionEnd = caretPos;\r\n        textarea.focus();\r\n        textarea.scrollTop = scrollPos;\r\n    }\r\n\r\n    hideMenu() {\r\n        if (this.menu) {\r\n            this.menu.style.cssText = 'display: none;'\r\n            this.isActive = false\r\n            this.menuSelected = 0\r\n            this.current = {}\r\n        }\r\n    }\r\n\r\n    selectItemAtIndex(index, originalEvent) {\r\n        index = parseInt(index)\r\n        if (typeof index !== 'number' || isNaN(index)) return\r\n        let item = this.current.filteredItems[index]\r\n        let content = this.current.collection.selectTemplate(item)\r\n        if (content !== null) this.replaceText(content, originalEvent, item)\r\n    }\r\n\r\n    replaceText(content, originalEvent, item) {\r\n        this.range.replaceTriggerText(content, true, true, originalEvent, item)\r\n    }\r\n\r\n    _append(collection, newValues, replace) {\r\n        if (typeof collection.values === 'function') {\r\n            throw new Error('Unable to append to values, as it is a function.')\r\n        } else if (!replace) {\r\n            collection.values = collection.values.concat(newValues)\r\n        } else {\r\n            collection.values = newValues\r\n        }\r\n    }\r\n\r\n    append(collectionIndex, newValues, replace) {\r\n        let index = parseInt(collectionIndex)\r\n        if (typeof index !== 'number') throw new Error('please provide an index for the collection to update.')\r\n\r\n        let collection = this.collection[index]\r\n\r\n        this._append(collection, newValues, replace)\r\n    }\r\n\r\n    appendCurrent(newValues, replace) {\r\n        if (this.isActive) {\r\n            this._append(this.current.collection, newValues, replace)\r\n        } else {\r\n            throw new Error('No active state. Please use append instead and pass an index.')\r\n        }\r\n    }\r\n\r\n    detach(el) {\r\n        if (!el) {\r\n            throw new Error('[Tribute] Must pass in a DOM node or NodeList.')\r\n        }\r\n\r\n        // Check if it is a jQuery collection\r\n        if (typeof jQuery !== 'undefined' && el instanceof jQuery) {\r\n            el = el.get()\r\n        }\r\n\r\n        // Is el an Array/Array-like object?\r\n        if (el.constructor === NodeList || el.constructor === HTMLCollection || el.constructor === Array) {\r\n            let length = el.length\r\n            for (var i = 0; i < length; ++i) {\r\n                this._detach(el[i])\r\n            }\r\n        } else {\r\n            this._detach(el)\r\n        }\r\n    }\r\n\r\n    _detach(el) {\r\n        this.events.unbind(el)\r\n        if (el.tributeMenu) {\r\n            this.menuEvents.unbind(el.tributeMenu)\r\n        }\r\n\r\n        setTimeout(() => {\r\n            el.removeAttribute('data-tribute')\r\n            this.isActive = false\r\n            if (el.tributeMenu) {\r\n                el.tributeMenu.remove()\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\nexport default Tribute;\r\n",
    "class TributeEvents {\r\n    constructor(tribute) {\r\n        this.tribute = tribute\r\n        this.tribute.events = this\r\n    }\r\n\r\n    static keys() {\r\n        return [{\r\n            key: 9,\r\n            value: 'TAB'\r\n        }, {\r\n            key: 8,\r\n            value: 'DELETE'\r\n        }, {\r\n            key: 13,\r\n            value: 'ENTER'\r\n        }, {\r\n            key: 27,\r\n            value: 'ESCAPE'\r\n        }, {\r\n            key: 32,\r\n            value: 'SPACE'\r\n        }, {\r\n            key: 38,\r\n            value: 'UP'\r\n        }, {\r\n            key: 40,\r\n            value: 'DOWN'\r\n        }]\r\n    }\r\n\r\n    bind(element) {\r\n        element.boundKeydown = this.keydown.bind(element, this);\r\n        element.boundKeyup = this.keyup.bind(element, this);\r\n        element.boundInput = this.input.bind(element, this);\r\n\r\n        element.addEventListener('keydown',\r\n            element.boundKeydown, false)\r\n        element.addEventListener('keyup',\r\n            element.boundKeyup, false)\r\n        element.addEventListener('input',\r\n            element.boundInput, false)\r\n    }\r\n\r\n    unbind(element) {\r\n        element.removeEventListener('keydown',\r\n            element.boundKeydown, false)\r\n        element.removeEventListener('keyup',\r\n            element.boundKeyup, false)\r\n        element.removeEventListener('input',\r\n            element.boundInput, false)\r\n\r\n        delete element.boundKeydown\r\n        delete element.boundKeyup\r\n        delete element.boundInput\r\n    }\r\n\r\n    keydown(instance, event) {\r\n        if (instance.shouldDeactivate(event)) {\r\n            instance.tribute.isActive = false\r\n            instance.tribute.hideMenu()\r\n        }\r\n\r\n        let element = this\r\n        instance.commandEvent = false\r\n\r\n        TributeEvents.keys().forEach(o => {\r\n            if (o.key === event.keyCode) {\r\n                instance.commandEvent = true\r\n                instance.callbacks()[o.value.toLowerCase()](event, element)\r\n            }\r\n        })\r\n    }\r\n\r\n    input(instance, event) {\r\n        instance.inputEvent = true\r\n        instance.keyup.call(this, instance, event)\r\n    }\r\n\r\n    click(instance, event) {\r\n        let tribute = instance.tribute\r\n        if (tribute.menu && tribute.menu.contains(event.target)) {\r\n            let li = event.target\r\n            event.preventDefault()\r\n            event.stopPropagation()\r\n            while (li.nodeName.toLowerCase() !== 'li') {\r\n                li = li.parentNode\r\n                if (!li || li === tribute.menu) {\r\n                    throw new Error('cannot find the <li> container for the click')\r\n                }\r\n            }\r\n            tribute.selectItemAtIndex(li.getAttribute('data-index'), event)\r\n            tribute.hideMenu()\r\n\r\n        // TODO: should fire with externalTrigger and target is outside of menu\r\n        } else if (tribute.current.element && !tribute.current.externalTrigger) {\r\n            tribute.current.externalTrigger = false\r\n            setTimeout(() => tribute.hideMenu())\r\n        }\r\n    }\r\n\r\n    keyup(instance, event) {\r\n        if (instance.inputEvent) {\r\n            instance.inputEvent = false\r\n        }\r\n        instance.updateSelection(this)\r\n\r\n        if (event.keyCode === 27) return\r\n\r\n        if (!instance.tribute.allowSpaces && instance.tribute.hasTrailingSpace) {\r\n            instance.tribute.hasTrailingSpace = false;\r\n            instance.commandEvent = true;\r\n            instance.callbacks()[\"space\"](event, this);\r\n            return\r\n        }\r\n\r\n        if (!instance.tribute.isActive) {\r\n            if (instance.tribute.autocompleteMode) {\r\n                instance.callbacks().triggerChar(event, this, '')\r\n            } else {\r\n                let keyCode = instance.getKeyCode(instance, this, event)\r\n    \r\n                if (isNaN(keyCode) || !keyCode) return\r\n    \r\n                let trigger = instance.tribute.triggers().find(trigger => {\r\n                    return trigger.charCodeAt(0) === keyCode\r\n                })\r\n    \r\n                if (typeof trigger !== 'undefined') {\r\n                    instance.callbacks().triggerChar(event, this, trigger)\r\n                }\r\n            }\r\n        }\r\n\r\n        if ((instance.tribute.current.trigger || instance.tribute.autocompleteMode)\r\n            && instance.commandEvent === false\r\n            || instance.tribute.isActive && event.keyCode === 8) {\r\n          instance.tribute.showMenuFor(this, true)\r\n        }\r\n    }\r\n\r\n    shouldDeactivate(event) {\r\n        if (!this.tribute.isActive) return false\r\n\r\n        if (this.tribute.current.mentionText.length === 0) {\r\n            let eventKeyPressed = false\r\n            TributeEvents.keys().forEach(o => {\r\n                if (event.keyCode === o.key) eventKeyPressed = true\r\n            })\r\n\r\n            return !eventKeyPressed\r\n        }\r\n\r\n        return false\r\n    }\r\n\r\n    getKeyCode(instance, el, event) {\r\n        let char\r\n        let tribute = instance.tribute\r\n        let info = tribute.range.getTriggerInfo(false, tribute.hasTrailingSpace, true, tribute.allowSpaces, tribute.autocompleteMode)\r\n\r\n        if (info) {\r\n            return info.mentionTriggerChar.charCodeAt(0)\r\n        } else {\r\n            return false\r\n        }\r\n    }\r\n\r\n    updateSelection(el) {\r\n        this.tribute.current.element = el\r\n        let info = this.tribute.range.getTriggerInfo(false, this.tribute.hasTrailingSpace, true, this.tribute.allowSpaces, this.tribute.autocompleteMode)\r\n\r\n        if (info) {\r\n            this.tribute.current.selectedPath = info.mentionSelectedPath\r\n            this.tribute.current.mentionText = info.mentionText\r\n            this.tribute.current.selectedOffset = info.mentionSelectedOffset\r\n        }\r\n    }\r\n\r\n    callbacks() {\r\n        return {\r\n            triggerChar: (e, el, trigger) => {\r\n                let tribute = this.tribute\r\n                tribute.current.trigger = trigger\r\n\r\n                let collectionItem = tribute.collection.find(item => {\r\n                    return item.trigger === trigger\r\n                })\r\n\r\n                tribute.current.collection = collectionItem\r\n                if (tribute.inputEvent) tribute.showMenuFor(el, true)\r\n            },\r\n            enter: (e, el) => {\r\n                // choose selection\r\n                if (this.tribute.isActive && this.tribute.current.filteredItems) {\r\n                    e.preventDefault()\r\n                    e.stopPropagation()\r\n                    setTimeout(() => {\r\n                        this.tribute.selectItemAtIndex(this.tribute.menuSelected, e)\r\n                        this.tribute.hideMenu()\r\n                    }, 0)\r\n                }\r\n            },\r\n            escape: (e, el) => {\r\n                if (this.tribute.isActive) {\r\n                    e.preventDefault()\r\n                    e.stopPropagation()\r\n                    this.tribute.isActive = false\r\n                    this.tribute.hideMenu()\r\n                }\r\n            },\r\n            tab: (e, el) => {\r\n                // choose first match\r\n                this.callbacks().enter(e, el)\r\n            },\r\n            space: (e, el) => {\r\n                if (this.tribute.isActive) {\r\n                    if (this.tribute.spaceSelectsMatch) {\r\n                        this.callbacks().enter(e, el)\r\n                    } else if (!this.tribute.allowSpaces) {\r\n                        e.stopPropagation();\r\n                        setTimeout(() => {\r\n                            this.tribute.hideMenu();\r\n                            this.tribute.isActive = false;\r\n                        }, 0);\r\n                    }\r\n                }\r\n            },\r\n            up: (e, el) => {\r\n                // navigate up ul\r\n                if (this.tribute.isActive && this.tribute.current.filteredItems) {\r\n                    e.preventDefault()\r\n                    e.stopPropagation()\r\n                    let count = this.tribute.current.filteredItems.length,\r\n                        selected = this.tribute.menuSelected\r\n\r\n                    if (count > selected && selected > 0) {\r\n                        this.tribute.menuSelected--\r\n                        this.setActiveLi()\r\n                    } else if (selected === 0) {\r\n                      this.tribute.menuSelected = count - 1\r\n                      this.setActiveLi()\r\n                      this.tribute.menu.scrollTop = this.tribute.menu.scrollHeight\r\n                    }\r\n                }\r\n            },\r\n            down: (e, el) => {\r\n                // navigate down ul\r\n                if (this.tribute.isActive && this.tribute.current.filteredItems) {\r\n                    e.preventDefault()\r\n                    e.stopPropagation()\r\n                    let count = this.tribute.current.filteredItems.length - 1,\r\n                        selected = this.tribute.menuSelected\r\n\r\n                    if (count > selected) {\r\n                        this.tribute.menuSelected++\r\n                        this.setActiveLi()\r\n                    } else if (count === selected) {\r\n                        this.tribute.menuSelected = 0\r\n                        this.setActiveLi()\r\n                        this.tribute.menu.scrollTop = 0\r\n                    }\r\n                }\r\n            },\r\n            delete: (e, el) => {\r\n                if (this.tribute.isActive && this.tribute.current.mentionText.length < 1) {\r\n                    this.tribute.hideMenu()\r\n                } else if (this.tribute.isActive) {\r\n                    this.tribute.showMenuFor(el)\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    setActiveLi(index) {\r\n        let lis = this.tribute.menu.querySelectorAll('li'),\r\n            length = lis.length >>> 0\r\n\r\n        if (index) this.tribute.menuSelected = parseInt(index);\r\n\r\n        for (let i = 0; i < length; i++) {\r\n            let li = lis[i]\r\n            if (i === this.tribute.menuSelected) {\r\n                li.classList.add(this.tribute.current.collection.selectClass);\r\n\r\n                let liClientRect = li.getBoundingClientRect();\r\n                let menuClientRect = this.tribute.menu.getBoundingClientRect();\r\n\r\n                if (liClientRect.bottom > menuClientRect.bottom) {\r\n                    let scrollDistance = liClientRect.bottom - menuClientRect.bottom;\r\n                    this.tribute.menu.scrollTop += scrollDistance\r\n                } else if (liClientRect.top < menuClientRect.top) {\r\n                    let scrollDistance = menuClientRect.top - liClientRect.top;\r\n                    this.tribute.menu.scrollTop -= scrollDistance\r\n                }\r\n\r\n            } else {\r\n                li.classList.remove(this.tribute.current.collection.selectClass);\r\n            }\r\n        }\r\n    }\r\n\r\n    getFullHeight(elem, includeMargin) {\r\n      let height = elem.getBoundingClientRect().height\r\n\r\n      if (includeMargin) {\r\n        let style = elem.currentStyle || window.getComputedStyle(elem)\r\n        return height + parseFloat(style.marginTop) + parseFloat(style.marginBottom)\r\n      }\r\n\r\n      return height\r\n    }\r\n\r\n}\r\n\r\nexport default TributeEvents;\r\n",
    "class TributeMenuEvents {\r\n    constructor(tribute) {\r\n        this.tribute = tribute\r\n        this.tribute.menuEvents = this\r\n        this.menu = this.tribute.menu\r\n    }\r\n\r\n    bind(menu) {\r\n        this.menuClickEvent = this.tribute.events.click.bind(null, this)\r\n        this.menuContainerScrollEvent = this.debounce(() => {\r\n            if (this.tribute.isActive) {\r\n                this.tribute.showMenuFor(this.tribute.current.element, false)\r\n            }\r\n        }, 300, false)\r\n        this.windowResizeEvent = this.debounce(() => {\r\n            if (this.tribute.isActive) {\r\n                this.tribute.range.positionMenuAtCaret(true)\r\n            }\r\n        }, 300, false)\r\n\r\n        // fixes IE11 issues with mousedown\r\n        this.tribute.range.getDocument().addEventListener('MSPointerDown',\r\n            this.menuClickEvent, false)\r\n        this.tribute.range.getDocument().addEventListener('mousedown',\r\n            this.menuClickEvent, false)\r\n        window.addEventListener('resize', this.windowResizeEvent)\r\n\r\n        if (this.menuContainer) {\r\n            this.menuContainer.addEventListener('scroll', this.menuContainerScrollEvent, false)\r\n        } else {\r\n            window.addEventListener('scroll', this.menuContainerScrollEvent)\r\n        }\r\n\r\n    }\r\n\r\n    unbind(menu) {\r\n        this.tribute.range.getDocument().removeEventListener('mousedown',\r\n            this.menuClickEvent, false)\r\n        this.tribute.range.getDocument().removeEventListener('MSPointerDown',\r\n            this.menuClickEvent, false)\r\n        window.removeEventListener('resize', this.windowResizeEvent)\r\n\r\n        if (this.menuContainer) {\r\n            this.menuContainer.removeEventListener('scroll', this.menuContainerScrollEvent, false)\r\n        } else {\r\n            window.removeEventListener('scroll', this.menuContainerScrollEvent)\r\n        }\r\n    }\r\n\r\n    debounce(func, wait, immediate) {\r\n        var timeout\r\n        return () => {\r\n            var context = this,\r\n                args = arguments\r\n            var later = () => {\r\n                timeout = null\r\n                if (!immediate) func.apply(context, args)\r\n            }\r\n            var callNow = immediate && !timeout\r\n            clearTimeout(timeout)\r\n            timeout = setTimeout(later, wait)\r\n            if (callNow) func.apply(context, args)\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport default TributeMenuEvents;\r\n",
    "// Thanks to https://github.com/jeff-collins/ment.io\r\nclass TributeRange {\r\n    constructor(tribute) {\r\n        this.tribute = tribute\r\n        this.tribute.range = this\r\n    }\r\n\r\n    getDocument() {\r\n        let iframe\r\n        if (this.tribute.current.collection) {\r\n            iframe = this.tribute.current.collection.iframe\r\n        }\r\n\r\n        if (!iframe) {\r\n            return document\r\n        }\r\n\r\n        return iframe.contentWindow.document\r\n    }\r\n\r\n    positionMenuAtCaret(scrollTo) {\r\n        let context = this.tribute.current,\r\n            coordinates\r\n\r\n        let info = this.getTriggerInfo(false, this.tribute.hasTrailingSpace, true, this.tribute.allowSpaces, this.tribute.autocompleteMode)\r\n\r\n        if (typeof info !== 'undefined') {\r\n\r\n            if(!this.tribute.positionMenu){\r\n                this.tribute.menu.style.cssText = `display: block;`\r\n                return\r\n            }\r\n\r\n            if (!this.isContentEditable(context.element)) {\r\n                coordinates = this.getTextAreaOrInputUnderlinePosition(this.tribute.current.element,\r\n                    info.mentionPosition)\r\n            }\r\n            else {\r\n                coordinates = this.getContentEditableCaretPosition(info.mentionPosition)\r\n            }\r\n\r\n\r\n            this.tribute.menu.style.cssText = `top: ${coordinates.top}px;\r\n                                     left: ${coordinates.left}px;\r\n                                     right: ${coordinates.right}px;\r\n                                     bottom: ${coordinates.bottom}px;\r\n                                     position: absolute;\r\n                                     z-index: 10000;\r\n                                     display: block;`\r\n\r\n            if (coordinates.left === 'auto') {\r\n                this.tribute.menu.style.left = 'auto'\r\n            }\r\n\r\n            if (coordinates.top === 'auto') {\r\n                this.tribute.menu.style.top = 'auto'\r\n            }\r\n\r\n            if (scrollTo) this.scrollIntoView()\r\n\r\n            window.setTimeout(() => {\r\n                let menuDimensions = {\r\n                   width: this.tribute.menu.offsetWidth,\r\n                   height: this.tribute.menu.offsetHeight\r\n                }\r\n                let menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions)\r\n\r\n                let menuIsOffScreenHorizontally = window.innerWidth > menuDimensions.width && (menuIsOffScreen.left || menuIsOffScreen.right)\r\n                let menuIsOffScreenVertically = window.innerHeight > menuDimensions.height && (menuIsOffScreen.top || menuIsOffScreen.bottom)\r\n                if (menuIsOffScreenHorizontally || menuIsOffScreenVertically) {\r\n                    this.tribute.menu.style.cssText = 'display: none'\r\n                    this.positionMenuAtCaret(scrollTo)\r\n                }\r\n            }, 0)\r\n\r\n        } else {\r\n            this.tribute.menu.style.cssText = 'display: none'\r\n        }\r\n    }\r\n\r\n    selectElement(targetElement, path, offset) {\r\n        let range\r\n        let elem = targetElement\r\n\r\n        if (path) {\r\n            for (var i = 0; i < path.length; i++) {\r\n                elem = elem.childNodes[path[i]]\r\n                if (elem === undefined) {\r\n                    return\r\n                }\r\n                while (elem.length < offset) {\r\n                    offset -= elem.length\r\n                    elem = elem.nextSibling\r\n                }\r\n                if (elem.childNodes.length === 0 && !elem.length) {\r\n                    elem = elem.previousSibling\r\n                }\r\n            }\r\n        }\r\n        let sel = this.getWindowSelection()\r\n\r\n        range = this.getDocument().createRange()\r\n        range.setStart(elem, offset)\r\n        range.setEnd(elem, offset)\r\n        range.collapse(true)\r\n\r\n        try {\r\n            sel.removeAllRanges()\r\n        } catch (error) {}\r\n\r\n        sel.addRange(range)\r\n        targetElement.focus()\r\n    }\r\n\r\n    replaceTriggerText(text, requireLeadingSpace, hasTrailingSpace, originalEvent, item) {\r\n        let info = this.getTriggerInfo(true, hasTrailingSpace, requireLeadingSpace, this.tribute.allowSpaces, this.tribute.autocompleteMode)\r\n\r\n        if (info !== undefined) {\r\n            let context = this.tribute.current\r\n            let replaceEvent = new CustomEvent('tribute-replaced', {\r\n                detail: {\r\n                    item: item,\r\n                    instance: context,\r\n                    context: info,\r\n                    event: originalEvent,\r\n                }\r\n            })\r\n\r\n            if (!this.isContentEditable(context.element)) {\r\n                let myField = this.tribute.current.element\r\n                let textSuffix = typeof this.tribute.replaceTextSuffix == 'string'\r\n                    ? this.tribute.replaceTextSuffix\r\n                    : ' '\r\n                text += textSuffix\r\n                let startPos = info.mentionPosition\r\n                let endPos = info.mentionPosition + info.mentionText.length + textSuffix.length\r\n                myField.value = myField.value.substring(0, startPos) + text +\r\n                    myField.value.substring(endPos, myField.value.length)\r\n                myField.selectionStart = startPos + text.length\r\n                myField.selectionEnd = startPos + text.length\r\n            } else {\r\n                // add a space to the end of the pasted text\r\n                let textSuffix = typeof this.tribute.replaceTextSuffix == 'string'\r\n                    ? this.tribute.replaceTextSuffix\r\n                    : '\\xA0'\r\n                text += textSuffix\r\n                this.pasteHtml(text, info.mentionPosition,\r\n                    info.mentionPosition + info.mentionText.length + !this.tribute.autocompleteMode)\r\n            }\r\n\r\n            context.element.dispatchEvent(replaceEvent)\r\n        }\r\n    }\r\n\r\n    pasteHtml(html, startPos, endPos) {\r\n        let range, sel\r\n        sel = this.getWindowSelection()\r\n        range = this.getDocument().createRange()\r\n        range.setStart(sel.anchorNode, startPos)\r\n        range.setEnd(sel.anchorNode, endPos)\r\n        range.deleteContents()\r\n\r\n        let el = this.getDocument().createElement('div')\r\n        el.innerHTML = html\r\n        let frag = this.getDocument().createDocumentFragment(),\r\n            node, lastNode\r\n        while ((node = el.firstChild)) {\r\n            lastNode = frag.appendChild(node)\r\n        }\r\n        range.insertNode(frag)\r\n\r\n        // Preserve the selection\r\n        if (lastNode) {\r\n            range = range.cloneRange()\r\n            range.setStartAfter(lastNode)\r\n            range.collapse(true)\r\n            sel.removeAllRanges()\r\n            sel.addRange(range)\r\n        }\r\n    }\r\n\r\n    getWindowSelection() {\r\n        if (this.tribute.collection.iframe) {\r\n            return this.tribute.collection.iframe.contentWindow.getSelection()\r\n        }\r\n\r\n        return window.getSelection()\r\n    }\r\n\r\n    getNodePositionInParent(element) {\r\n        if (element.parentNode === null) {\r\n            return 0\r\n        }\r\n\r\n        for (var i = 0; i < element.parentNode.childNodes.length; i++) {\r\n            let node = element.parentNode.childNodes[i]\r\n\r\n            if (node === element) {\r\n                return i\r\n            }\r\n        }\r\n    }\r\n\r\n    getContentEditableSelectedPath(ctx) {\r\n        let sel = this.getWindowSelection()\r\n        let selected = sel.anchorNode\r\n        let path = []\r\n        let offset\r\n\r\n        if (selected != null) {\r\n            let i\r\n            let ce = selected.contentEditable\r\n            while (selected !== null && ce !== 'true') {\r\n                i = this.getNodePositionInParent(selected)\r\n                path.push(i)\r\n                selected = selected.parentNode\r\n                if (selected !== null) {\r\n                    ce = selected.contentEditable\r\n                }\r\n            }\r\n            path.reverse()\r\n\r\n            // getRangeAt may not exist, need alternative\r\n            offset = sel.getRangeAt(0).startOffset\r\n\r\n            return {\r\n                selected: selected,\r\n                path: path,\r\n                offset: offset\r\n            }\r\n        }\r\n    }\r\n\r\n    getTextPrecedingCurrentSelection() {\r\n        let context = this.tribute.current,\r\n            text = ''\r\n\r\n        if (!this.isContentEditable(context.element)) {\r\n            let textComponent = this.tribute.current.element;\r\n            if (textComponent) {\r\n                let startPos = textComponent.selectionStart\r\n                if (textComponent.value && startPos >= 0) {\r\n                    text = textComponent.value.substring(0, startPos)\r\n                }\r\n            }\r\n\r\n        } else {\r\n            let selectedElem = this.getWindowSelection().anchorNode\r\n\r\n            if (selectedElem != null) {\r\n                let workingNodeContent = selectedElem.textContent\r\n                let selectStartOffset = this.getWindowSelection().getRangeAt(0).startOffset\r\n\r\n                if (workingNodeContent && selectStartOffset >= 0) {\r\n                    text = workingNodeContent.substring(0, selectStartOffset)\r\n                }\r\n            }\r\n        }\r\n\r\n        return text\r\n    }\r\n\r\n    getLastWordInText(text) {\r\n        text = text.replace(/\\u00A0/g, ' '); // https://stackoverflow.com/questions/29850407/how-do-i-replace-unicode-character-u00a0-with-a-space-in-javascript\r\n        let wordsArray = text.split(/\\s+/);\r\n        let worldsCount = wordsArray.length - 1\r\n        return wordsArray[worldsCount].trim()\r\n    }\r\n\r\n    getTriggerInfo(menuAlreadyActive, hasTrailingSpace, requireLeadingSpace, allowSpaces, isAutocomplete) {\r\n        let ctx = this.tribute.current\r\n        let selected, path, offset\r\n\r\n        if (!this.isContentEditable(ctx.element)) {\r\n            selected = this.tribute.current.element\r\n        } else {\r\n            let selectionInfo = this.getContentEditableSelectedPath(ctx)\r\n\r\n            if (selectionInfo) {\r\n                selected = selectionInfo.selected\r\n                path = selectionInfo.path\r\n                offset = selectionInfo.offset\r\n            }\r\n        }\r\n\r\n        let effectiveRange = this.getTextPrecedingCurrentSelection()\r\n        let lastWordOfEffectiveRange = this.getLastWordInText(effectiveRange)\r\n\r\n        if (isAutocomplete) {\r\n            return {\r\n                mentionPosition: effectiveRange.length - lastWordOfEffectiveRange.length,\r\n                mentionText: lastWordOfEffectiveRange,\r\n                mentionSelectedElement: selected,\r\n                mentionSelectedPath: path,\r\n                mentionSelectedOffset: offset\r\n            }\r\n        }\r\n\r\n        if (effectiveRange !== undefined && effectiveRange !== null) {\r\n            let mostRecentTriggerCharPos = -1\r\n            let triggerChar\r\n\r\n            this.tribute.collection.forEach(config => {\r\n                let c = config.trigger\r\n                let idx = config.requireLeadingSpace ?\r\n                    this.lastIndexWithLeadingSpace(effectiveRange, c) :\r\n                    effectiveRange.lastIndexOf(c)\r\n\r\n                if (idx > mostRecentTriggerCharPos) {\r\n                    mostRecentTriggerCharPos = idx\r\n                    triggerChar = c\r\n                    requireLeadingSpace = config.requireLeadingSpace\r\n                }\r\n            })\r\n\r\n            if (mostRecentTriggerCharPos >= 0 &&\r\n                (\r\n                    mostRecentTriggerCharPos === 0 ||\r\n                    !requireLeadingSpace ||\r\n                    /[\\xA0\\s]/g.test(\r\n                        effectiveRange.substring(\r\n                            mostRecentTriggerCharPos - 1,\r\n                            mostRecentTriggerCharPos)\r\n                    )\r\n                )\r\n            ) {\r\n                let currentTriggerSnippet = effectiveRange.substring(mostRecentTriggerCharPos + 1,\r\n                    effectiveRange.length)\r\n\r\n                triggerChar = effectiveRange.substring(mostRecentTriggerCharPos, mostRecentTriggerCharPos + 1)\r\n                let firstSnippetChar = currentTriggerSnippet.substring(0, 1)\r\n                let leadingSpace = currentTriggerSnippet.length > 0 &&\r\n                    (\r\n                        firstSnippetChar === ' ' ||\r\n                        firstSnippetChar === '\\xA0'\r\n                    )\r\n                if (hasTrailingSpace) {\r\n                    currentTriggerSnippet = currentTriggerSnippet.trim()\r\n                }\r\n\r\n                let regex = allowSpaces ? /[^\\S ]/g : /[\\xA0\\s]/g;\r\n\r\n                this.tribute.hasTrailingSpace = regex.test(currentTriggerSnippet);\r\n\r\n                if (!leadingSpace && (menuAlreadyActive || !(regex.test(currentTriggerSnippet)))) {\r\n                    return {\r\n                        mentionPosition: mostRecentTriggerCharPos,\r\n                        mentionText: currentTriggerSnippet,\r\n                        mentionSelectedElement: selected,\r\n                        mentionSelectedPath: path,\r\n                        mentionSelectedOffset: offset,\r\n                        mentionTriggerChar: triggerChar\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    lastIndexWithLeadingSpace (str, char) {\r\n        let reversedStr = str.split('').reverse().join('')\r\n        let index = -1\r\n\r\n        for (let cidx = 0, len = str.length; cidx < len; cidx++) {\r\n            let firstChar = cidx === str.length - 1\r\n            let leadingSpace = /\\s/.test(reversedStr[cidx + 1])\r\n            let match = char === reversedStr[cidx]\r\n\r\n            if (match && (firstChar || leadingSpace)) {\r\n                index = str.length - 1 - cidx\r\n                break\r\n            }\r\n        }\r\n\r\n        return index\r\n    }\r\n\r\n    isContentEditable(element) {\r\n        return element.nodeName !== 'INPUT' && element.nodeName !== 'TEXTAREA'\r\n    }\r\n\r\n    isMenuOffScreen(coordinates, menuDimensions) {\r\n        let windowWidth = window.innerWidth\r\n        let windowHeight = window.innerHeight\r\n        let doc = document.documentElement\r\n        let windowLeft = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0)\r\n        let windowTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0)\r\n\r\n        let menuTop = typeof coordinates.top === 'number' ? coordinates.top : windowTop + windowHeight - coordinates.bottom - menuDimensions.height\r\n        let menuRight = typeof coordinates.right === 'number' ? coordinates.right : coordinates.left + menuDimensions.width\r\n        let menuBottom = typeof coordinates.bottom === 'number' ? coordinates.bottom : coordinates.top + menuDimensions.height\r\n        let menuLeft = typeof coordinates.left === 'number' ? coordinates.left : windowLeft + windowWidth - coordinates.right - menuDimensions.width\r\n\r\n        return {\r\n            top: menuTop < Math.floor(windowTop),\r\n            right: menuRight > Math.ceil(windowLeft + windowWidth),\r\n            bottom: menuBottom > Math.ceil(windowTop + windowHeight),\r\n            left: menuLeft < Math.floor(windowLeft)\r\n        }\r\n    }\r\n\r\n    getMenuDimensions() {\r\n        // Width of the menu depends of its contents and position\r\n        // We must check what its width would be without any obstruction\r\n        // This way, we can achieve good positioning for flipping the menu\r\n        let dimensions = {\r\n            width: null,\r\n            height: null\r\n        }\r\n\r\n        this.tribute.menu.style.cssText = `top: 0px;\r\n                                 left: 0px;\r\n                                 position: fixed;\r\n                                 display: block;\r\n                                 visibility; hidden;`\r\n       dimensions.width = this.tribute.menu.offsetWidth\r\n       dimensions.height = this.tribute.menu.offsetHeight\r\n\r\n       this.tribute.menu.style.cssText = `display: none;`\r\n\r\n       return dimensions\r\n    }\r\n\r\n    getTextAreaOrInputUnderlinePosition(element, position, flipped) {\r\n        let properties = ['direction', 'boxSizing', 'width', 'height', 'overflowX',\r\n            'overflowY', 'borderTopWidth', 'borderRightWidth',\r\n            'borderBottomWidth', 'borderLeftWidth', 'paddingTop',\r\n            'paddingRight', 'paddingBottom', 'paddingLeft',\r\n            'fontStyle', 'fontVariant', 'fontWeight', 'fontStretch',\r\n            'fontSize', 'fontSizeAdjust', 'lineHeight', 'fontFamily',\r\n            'textAlign', 'textTransform', 'textIndent',\r\n            'textDecoration', 'letterSpacing', 'wordSpacing'\r\n        ]\r\n\r\n        let isFirefox = (window.mozInnerScreenX !== null)\r\n\r\n        let div = this.getDocument().createElement('div')\r\n        div.id = 'input-textarea-caret-position-mirror-div'\r\n        this.getDocument().body.appendChild(div)\r\n\r\n        let style = div.style\r\n        let computed = window.getComputedStyle ? getComputedStyle(element) : element.currentStyle\r\n\r\n        style.whiteSpace = 'pre-wrap'\r\n        if (element.nodeName !== 'INPUT') {\r\n            style.wordWrap = 'break-word'\r\n        }\r\n\r\n        // position off-screen\r\n        style.position = 'absolute'\r\n        style.visibility = 'hidden'\r\n\r\n        // transfer the element's properties to the div\r\n        properties.forEach(prop => {\r\n            style[prop] = computed[prop]\r\n        })\r\n\r\n        if (isFirefox) {\r\n            style.width = `${(parseInt(computed.width) - 2)}px`\r\n            if (element.scrollHeight > parseInt(computed.height))\r\n                style.overflowY = 'scroll'\r\n        } else {\r\n            style.overflow = 'hidden'\r\n        }\r\n\r\n        div.textContent = element.value.substring(0, position)\r\n\r\n        if (element.nodeName === 'INPUT') {\r\n            div.textContent = div.textContent.replace(/\\s/g, ' ')\r\n        }\r\n\r\n        let span = this.getDocument().createElement('span')\r\n        span.textContent = element.value.substring(position) || '.'\r\n        div.appendChild(span)\r\n\r\n        let rect = element.getBoundingClientRect()\r\n        let doc = document.documentElement\r\n        let windowLeft = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0)\r\n        let windowTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0)\r\n\r\n        let coordinates = {\r\n            top: rect.top + windowTop + span.offsetTop + parseInt(computed.borderTopWidth) + parseInt(computed.fontSize) - element.scrollTop,\r\n            left: rect.left + windowLeft + span.offsetLeft + parseInt(computed.borderLeftWidth)\r\n        }\r\n\r\n        let windowWidth = window.innerWidth\r\n        let windowHeight = window.innerHeight\r\n\r\n        let menuDimensions = this.getMenuDimensions()\r\n        let menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions)\r\n\r\n        if (menuIsOffScreen.right) {\r\n            coordinates.right = windowWidth - coordinates.left\r\n            coordinates.left = 'auto'\r\n        }\r\n\r\n        let parentHeight = this.tribute.menuContainer\r\n            ? this.tribute.menuContainer.offsetHeight\r\n            : this.getDocument().body.offsetHeight\r\n\r\n        if (menuIsOffScreen.bottom) {\r\n            let parentRect = this.tribute.menuContainer\r\n                ? this.tribute.menuContainer.getBoundingClientRect()\r\n                : this.getDocument().body.getBoundingClientRect()\r\n            let scrollStillAvailable = parentHeight - (windowHeight - parentRect.top)\r\n\r\n            coordinates.bottom = scrollStillAvailable + (windowHeight - rect.top - span.offsetTop)\r\n            coordinates.top = 'auto'\r\n        }\r\n\r\n        menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions)\r\n        if (menuIsOffScreen.left) {\r\n            coordinates.left = windowWidth > menuDimensions.width\r\n                ? windowLeft + windowWidth - menuDimensions.width\r\n                : windowLeft\r\n            delete coordinates.right\r\n        }\r\n        if (menuIsOffScreen.top) {\r\n            coordinates.top = windowHeight > menuDimensions.height\r\n                ? windowTop + windowHeight - menuDimensions.height\r\n                : windowTop\r\n            delete coordinates.bottom\r\n        }\r\n\r\n        this.getDocument().body.removeChild(div)\r\n        return coordinates\r\n    }\r\n\r\n    getContentEditableCaretPosition(selectedNodePosition) {\r\n        let markerTextChar = '﻿'\r\n        let markerEl, markerId = `sel_${new Date().getTime()}_${Math.random().toString().substr(2)}`\r\n        let range\r\n        let sel = this.getWindowSelection()\r\n        let prevRange = sel.getRangeAt(0)\r\n\r\n        range = this.getDocument().createRange()\r\n        range.setStart(sel.anchorNode, selectedNodePosition)\r\n        range.setEnd(sel.anchorNode, selectedNodePosition)\r\n\r\n        range.collapse(false)\r\n\r\n        // Create the marker element containing a single invisible character using DOM methods and insert it\r\n        markerEl = this.getDocument().createElement('span')\r\n        markerEl.id = markerId\r\n\r\n        markerEl.appendChild(this.getDocument().createTextNode(markerTextChar))\r\n        range.insertNode(markerEl)\r\n        sel.removeAllRanges()\r\n        sel.addRange(prevRange)\r\n\r\n        let rect = markerEl.getBoundingClientRect()\r\n        let doc = document.documentElement\r\n        let windowLeft = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0)\r\n        let windowTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0)\r\n        let coordinates = {\r\n            left: rect.left + windowLeft,\r\n            top: rect.top + markerEl.offsetHeight + windowTop\r\n        }\r\n        let windowWidth = window.innerWidth\r\n        let windowHeight = window.innerHeight\r\n\r\n        let menuDimensions = this.getMenuDimensions()\r\n        let menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions)\r\n\r\n        if (menuIsOffScreen.right) {\r\n            coordinates.left = 'auto'\r\n            coordinates.right = windowWidth - rect.left - windowLeft\r\n        }\r\n\r\n        let parentHeight = this.tribute.menuContainer\r\n            ? this.tribute.menuContainer.offsetHeight\r\n            : this.getDocument().body.offsetHeight\r\n\r\n        if (menuIsOffScreen.bottom) {\r\n            let parentRect = this.tribute.menuContainer\r\n                ? this.tribute.menuContainer.getBoundingClientRect()\r\n                : this.getDocument().body.getBoundingClientRect()\r\n            let scrollStillAvailable = parentHeight - (windowHeight - parentRect.top)\r\n\r\n            coordinates.top = 'auto'\r\n            coordinates.bottom = scrollStillAvailable + (windowHeight - rect.top)\r\n        }\r\n\r\n        menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions)\r\n        if (menuIsOffScreen.left) {\r\n            coordinates.left = windowWidth > menuDimensions.width\r\n                ? windowLeft + windowWidth - menuDimensions.width\r\n                : windowLeft\r\n            delete coordinates.right\r\n        }\r\n        if (menuIsOffScreen.top) {\r\n            coordinates.top = windowHeight > menuDimensions.height\r\n                ? windowTop + windowHeight - menuDimensions.height\r\n                : windowTop\r\n            delete coordinates.bottom\r\n        }\r\n\r\n        markerEl.parentNode.removeChild(markerEl)\r\n        return coordinates\r\n    }\r\n\r\n    scrollIntoView(elem) {\r\n        let reasonableBuffer = 20,\r\n            clientRect\r\n        let maxScrollDisplacement = 100\r\n        let e = this.menu\r\n\r\n        if (typeof e === 'undefined') return;\r\n\r\n        while (clientRect === undefined || clientRect.height === 0) {\r\n            clientRect = e.getBoundingClientRect()\r\n\r\n            if (clientRect.height === 0) {\r\n                e = e.childNodes[0]\r\n                if (e === undefined || !e.getBoundingClientRect) {\r\n                    return\r\n                }\r\n            }\r\n        }\r\n\r\n        let elemTop = clientRect.top\r\n        let elemBottom = elemTop + clientRect.height\r\n\r\n        if (elemTop < 0) {\r\n            window.scrollTo(0, window.pageYOffset + clientRect.top - reasonableBuffer)\r\n        } else if (elemBottom > window.innerHeight) {\r\n            let maxY = window.pageYOffset + clientRect.top - reasonableBuffer\r\n\r\n            if (maxY - window.pageYOffset > maxScrollDisplacement) {\r\n                maxY = window.pageYOffset + maxScrollDisplacement\r\n            }\r\n\r\n            let targetY = window.pageYOffset - (window.innerHeight - elemBottom)\r\n\r\n            if (targetY > maxY) {\r\n                targetY = maxY\r\n            }\r\n\r\n            window.scrollTo(0, targetY)\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport default TributeRange;\r\n",
    "// Thanks to https://github.com/mattyork/fuzzy\r\nclass TributeSearch {\r\n    constructor(tribute) {\r\n        this.tribute = tribute\r\n        this.tribute.search = this\r\n    }\r\n\r\n    simpleFilter(pattern, array) {\r\n        return array.filter(string => {\r\n            return this.test(pattern, string)\r\n        })\r\n    }\r\n\r\n    test(pattern, string) {\r\n        return this.match(pattern, string) !== null\r\n    }\r\n\r\n    match(pattern, string, opts) {\r\n        opts = opts || {}\r\n        let patternIdx = 0,\r\n            result = [],\r\n            len = string.length,\r\n            totalScore = 0,\r\n            currScore = 0,\r\n            pre = opts.pre || '',\r\n            post = opts.post || '',\r\n            compareString = opts.caseSensitive && string || string.toLowerCase(),\r\n            ch, compareChar\r\n\r\n        if (opts.skip) {\r\n            return {rendered: string, score: 0}\r\n        }\r\n\r\n        pattern = opts.caseSensitive && pattern || pattern.toLowerCase()\r\n\r\n        let patternCache = this.traverse(compareString, pattern, 0, 0, [])\r\n        if (!patternCache) {\r\n            return null\r\n        }\r\n        return {\r\n            rendered: this.render(string, patternCache.cache, pre, post),\r\n            score: patternCache.score\r\n        }\r\n    }\r\n\r\n    traverse(string, pattern, stringIndex, patternIndex, patternCache) {\r\n        // if the pattern search at end\r\n        if (pattern.length === patternIndex) {\r\n\r\n            // calculate score and copy the cache containing the indices where it's found\r\n            return {\r\n                score: this.calculateScore(patternCache),\r\n                cache: patternCache.slice()\r\n            }\r\n        }\r\n\r\n        // if string at end or remaining pattern > remaining string\r\n        if (string.length === stringIndex || pattern.length - patternIndex > string.length - stringIndex) {\r\n            return undefined\r\n        }\r\n\r\n        let c = pattern[patternIndex]\r\n        let index = string.indexOf(c, stringIndex)\r\n        let best, temp\r\n\r\n        while (index > -1) {\r\n            patternCache.push(index)\r\n            temp = this.traverse(string, pattern, index + 1, patternIndex + 1, patternCache)\r\n            patternCache.pop()\r\n\r\n            // if downstream traversal failed, return best answer so far\r\n            if (!temp) {\r\n                return best\r\n            }\r\n\r\n            if (!best || best.score < temp.score) {\r\n                best = temp\r\n            }\r\n\r\n            index = string.indexOf(c, index + 1)\r\n        }\r\n\r\n        return best\r\n    }\r\n\r\n    calculateScore(patternCache) {\r\n        let score = 0\r\n        let temp = 1\r\n\r\n        patternCache.forEach((index, i) => {\r\n            if (i > 0) {\r\n                if (patternCache[i - 1] + 1 === index) {\r\n                    temp += temp + 1\r\n                }\r\n                else {\r\n                    temp = 1\r\n                }\r\n            }\r\n\r\n            score += temp\r\n        })\r\n\r\n        return score\r\n    }\r\n\r\n    render(string, indices, pre, post) {\r\n        var rendered = string.substring(0, indices[0])\r\n\r\n        indices.forEach((index, i) => {\r\n            rendered += pre + string[index] + post +\r\n                string.substring(index + 1, (indices[i + 1]) ? indices[i + 1] : string.length)\r\n        })\r\n\r\n        return rendered\r\n    }\r\n\r\n    filter(pattern, arr, opts) {\r\n        opts = opts || {}\r\n        return arr\r\n            .reduce((prev, element, idx, arr) => {\r\n                let str = element\r\n\r\n                if (opts.extract) {\r\n                    str = opts.extract(element)\r\n\r\n                    if (!str) { // take care of undefineds / nulls / etc.\r\n                        str = ''\r\n                    }\r\n                }\r\n\r\n                let rendered = this.match(pattern, str, opts)\r\n\r\n                if (rendered != null) {\r\n                    prev[prev.length] = {\r\n                        string: rendered.rendered,\r\n                        score: rendered.score,\r\n                        index: idx,\r\n                        original: element\r\n                    }\r\n                }\r\n\r\n                return prev\r\n            }, [])\r\n\r\n        .sort((a, b) => {\r\n            let compare = b.score - a.score\r\n            if (compare) return compare\r\n            return a.index - b.index\r\n        })\r\n    }\r\n}\r\n\r\nexport default TributeSearch;\r\n",
    "/**\r\n* Tribute.js\r\n* Native ES6 JavaScript @mention Plugin\r\n**/\r\n\r\nimport Tribute from \"./Tribute\";\r\n\r\nexport default Tribute;\r\n",
    "if (!Array.prototype.find) {\r\n    Array.prototype.find = function(predicate) {\r\n        if (this === null) {\r\n            throw new TypeError('Array.prototype.find called on null or undefined')\r\n        }\r\n        if (typeof predicate !== 'function') {\r\n            throw new TypeError('predicate must be a function')\r\n        }\r\n        var list = Object(this)\r\n        var length = list.length >>> 0\r\n        var thisArg = arguments[1]\r\n        var value\r\n\r\n        for (var i = 0; i < length; i++) {\r\n            value = list[i]\r\n            if (predicate.call(thisArg, value, i, list)) {\r\n                return value\r\n            }\r\n        }\r\n        return undefined\r\n    }\r\n}\r\n\r\nif (window && typeof window.CustomEvent !== \"function\") {\r\n  function CustomEvent(event, params) {\r\n    params = params || {\r\n      bubbles: false,\r\n      cancelable: false,\r\n      detail: undefined\r\n    }\r\n    var evt = document.createEvent('CustomEvent')\r\n    evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail)\r\n    return evt\r\n  }\r\n\r\n if (typeof window.Event !== 'undefined') {\r\n   CustomEvent.prototype = window.Event.prototype\r\n }\r\n\r\n  window.CustomEvent = CustomEvent\r\n}"
  ]
}