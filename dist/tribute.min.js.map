{"version":3,"sources":["tribute.min.js"],"names":["f","exports","module","define","amd","window","global","self","this","Tribute","r","e","n","t","o","i","c","require","u","a","Error","code","p","call","length","1","Object","defineProperty","value","_slicedToArray","arr","Array","isArray","Symbol","iterator","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","err","sliceIterator","TypeError","_createClass","Constructor","protoProps","staticProps","defineProperties","prototype","target","props","descriptor","enumerable","configurable","writable","key","_interopRequireDefault","_TributeEvents2","_TributeMenuEvents2","_TributeRange2","_TributeSearch2","obj","__esModule","default","collection","map","config","trigger","el","jQuery","get","constructor","NodeList","HTMLCollection","_attach","hasAttribute","console","warn","nodeName","ensureEditable","events","bind","setAttribute","element","inputTypes","indexOf","contentEditable","wrapper","range","getDocument","createElement","ul","className","appendChild","menuContainer","body","scrollTo","_this2","isActive","current","mentionText","currentMentionTextSnapshot","menu","createMenu","tributeMenu","menuEvents","menuSelected","processValues","values","items","search","filter","pre","searchOpts","post","skip","extract","lookup","filteredItems","querySelector","positionMenuAtCaret","noMatchEvent","CustomEvent","detail","dispatchEvent","noMatchTemplate","hideMenu","innerHTML","menuItemLimit","slice","fragment","createDocumentFragment","forEach","item","index","li","addEventListener","_findLiTarget2","_findLiTarget","_findLiTarget3","movementY","setActiveLi","selectClass","menuItemTemplate","getAttribute","parentNode","collectionIndex","document","activeElement","placeCaretAtEnd","externalTrigger","isContentEditable","insertTextAtCursor","insertAtCaret","showMenuFor","focus","getSelection","createRange","selectNodeContents","collapse","sel","removeAllRanges","addRange","createTextRange","textRange","moveToElementText","select","text","getRangeAt","deleteContents","textNode","createTextNode","insertNode","textarea","scrollPos","scrollTop","caretPos","selectionStart","front","substring","back","selectionEnd","style","cssText","originalEvent","parseInt","isNaN","content","selectTemplate","replaceText","replaceTriggerText","newValues","replace","concat","_append","_detach","_this3","unbind","setTimeout","removeAttribute","remove","original","fillAttr","matchItem","string","_ref","_this","_ref$values","_ref$iframe","iframe","_ref$selectClass","_ref$trigger","_ref$autocompleteMode","autocompleteMode","_ref$selectTemplate","_ref$menuItemTemplate","_ref$lookup","_ref$fillAttr","_ref$collection","_ref$menuContainer","_ref$noMatchTemplate","_ref$requireLeadingSp","requireLeadingSpace","_ref$allowSpaces","allowSpaces","_ref$replaceTextSuffi","replaceTextSuffix","_ref$positionMenu","positionMenu","_ref$spaceSelectsMatc","spaceSelectsMatch","_ref$searchOpts","_ref$menuItemLimit","instance","_classCallCheck","inputEvent","hasTrailingSpace","defaultSelectTemplate","defaultMenuItemTemplate","./TributeEvents","./TributeMenuEvents","./TributeRange","./TributeSearch","./utils","2","TributeEvents","boundKeydown","keydown","boundKeyup","keyup","boundInput","input","removeEventListener","event","shouldDeactivate","tribute","commandEvent","keys","keyCode","callbacks","toLowerCase","log","contains","preventDefault","stopPropagation","selectItemAtIndex","updateSelection","triggerChar","getKeyCode","triggers","find","charCodeAt","eventKeyPressed","info","getTriggerInfo","mentionTriggerChar","selectedPath","mentionSelectedPath","selectedOffset","mentionSelectedOffset","collectionItem","enter","escape","tab","space","up","count","selected","scrollHeight","down","delete","lis","querySelectorAll","classList","add","liClientRect","getBoundingClientRect","menuClientRect","bottom","scrollDistance","top","_scrollDistance","elem","includeMargin","height","currentStyle","getWindowSelection","getComputedStyle","parseFloat","marginTop","marginBottom","3","TributeMenuEvents","menuClickEvent","click","menuContainerScrollEvent","debounce","windowResizeEvent","getWindow","func","wait","immediate","timeout","_arguments","arguments","context","args","callNow","clearTimeout","apply","4","TributeRange","ownerDocument","doc","ownerWindow","defaultView","parentWindow","coordinates","getContentEditableCaretPosition","mentionPosition","getTextAreaOrInputUnderlinePosition","left","right","scrollIntoView","menuDimensions","width","offsetWidth","offsetHeight","menuIsOffScreen","isMenuOffScreen","menuIsOffScreenHorizontally","innerWidth","menuIsOffScreenVertically","innerHeight","targetElement","path","offset","childNodes","nextSibling","previousSibling","setStart","setEnd","error","replaceEvent","pasteHtml","myField","textSuffix","startPos","endPos","html","anchorNode","frag","node","lastNode","firstChild","cloneRange","setStartAfter","ctx","ce","getNodePositionInParent","reverse","startOffset","selectedElem","workingNodeContent","textContent","selectStartOffset","textComponent","wordsArray","split","trim","menuAlreadyActive","isAutocomplete","selectionInfo","getContentEditableSelectedPath","effectiveRange","getTextPrecedingCurrentSelection","lastWordOfEffectiveRange","getLastWordInText","mentionSelectedElement","mostRecentTriggerCharPos","idx","lastIndexWithLeadingSpace","lastIndexOf","test","currentTriggerSnippet","firstSnippetChar","leadingSpace","regex","str","char","reversedStr","join","cidx","len","firstChar","windowObject","windowWidth","windowHeight","documentElement","windowLeft","pageXOffset","scrollLeft","clientLeft","windowTop","pageYOffset","clientTop","menuTop","menuRight","menuBottom","menuLeft","Math","floor","ceil","dimensions","position","flipped","isFirefox","mozInnerScreenX","div","id","computed","whiteSpace","wordWrap","visibility","prop","overflowY","overflow","span","rect","offsetTop","borderTopWidth","fontSize","offsetLeft","borderLeftWidth","getMenuDimensions","parentHeight","scrollStillAvailable","removeChild","selectedNodePosition","markerEl","markerId","Date","getTime","random","toString","substr","prevRange","clientRect","elemTop","elemBottom","maxY","targetY","5","TributeSearch","pattern","array","match","opts","compareString","caseSensitive","rendered","score","patternCache","traverse","render","cache","stringIndex","patternIndex","calculateScore","best","temp","pop","indices","reduce","prev","sort","b","compare","6","_Tribute","_Tribute2","./Tribute","7","predicate","list","thisArg","params","bubbles","cancelable","evt","createEvent","initCustomEvent","Event"],"mappings":"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","file":"tribute.min.js","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.Tribute = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _utils = require(\"./utils\");\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nvar _TributeEvents = require(\"./TributeEvents\");\n\nvar _TributeEvents2 = _interopRequireDefault(_TributeEvents);\n\nvar _TributeMenuEvents = require(\"./TributeMenuEvents\");\n\nvar _TributeMenuEvents2 = _interopRequireDefault(_TributeMenuEvents);\n\nvar _TributeRange = require(\"./TributeRange\");\n\nvar _TributeRange2 = _interopRequireDefault(_TributeRange);\n\nvar _TributeSearch = require(\"./TributeSearch\");\n\nvar _TributeSearch2 = _interopRequireDefault(_TributeSearch);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Tribute = function () {\n    function Tribute(_ref) {\n        var _this = this;\n\n        var _ref$values = _ref.values,\n            values = _ref$values === undefined ? null : _ref$values,\n            _ref$iframe = _ref.iframe,\n            iframe = _ref$iframe === undefined ? null : _ref$iframe,\n            _ref$selectClass = _ref.selectClass,\n            selectClass = _ref$selectClass === undefined ? 'highlight' : _ref$selectClass,\n            _ref$trigger = _ref.trigger,\n            trigger = _ref$trigger === undefined ? '@' : _ref$trigger,\n            _ref$autocompleteMode = _ref.autocompleteMode,\n            autocompleteMode = _ref$autocompleteMode === undefined ? false : _ref$autocompleteMode,\n            _ref$selectTemplate = _ref.selectTemplate,\n            selectTemplate = _ref$selectTemplate === undefined ? null : _ref$selectTemplate,\n            _ref$menuItemTemplate = _ref.menuItemTemplate,\n            menuItemTemplate = _ref$menuItemTemplate === undefined ? null : _ref$menuItemTemplate,\n            _ref$lookup = _ref.lookup,\n            lookup = _ref$lookup === undefined ? 'key' : _ref$lookup,\n            _ref$fillAttr = _ref.fillAttr,\n            fillAttr = _ref$fillAttr === undefined ? 'value' : _ref$fillAttr,\n            _ref$collection = _ref.collection,\n            collection = _ref$collection === undefined ? null : _ref$collection,\n            _ref$menuContainer = _ref.menuContainer,\n            menuContainer = _ref$menuContainer === undefined ? null : _ref$menuContainer,\n            _ref$noMatchTemplate = _ref.noMatchTemplate,\n            noMatchTemplate = _ref$noMatchTemplate === undefined ? null : _ref$noMatchTemplate,\n            _ref$requireLeadingSp = _ref.requireLeadingSpace,\n            requireLeadingSpace = _ref$requireLeadingSp === undefined ? true : _ref$requireLeadingSp,\n            _ref$allowSpaces = _ref.allowSpaces,\n            allowSpaces = _ref$allowSpaces === undefined ? false : _ref$allowSpaces,\n            _ref$replaceTextSuffi = _ref.replaceTextSuffix,\n            replaceTextSuffix = _ref$replaceTextSuffi === undefined ? null : _ref$replaceTextSuffi,\n            _ref$positionMenu = _ref.positionMenu,\n            positionMenu = _ref$positionMenu === undefined ? true : _ref$positionMenu,\n            _ref$spaceSelectsMatc = _ref.spaceSelectsMatch,\n            spaceSelectsMatch = _ref$spaceSelectsMatc === undefined ? false : _ref$spaceSelectsMatc,\n            _ref$searchOpts = _ref.searchOpts,\n            searchOpts = _ref$searchOpts === undefined ? {} : _ref$searchOpts,\n            _ref$menuItemLimit = _ref.menuItemLimit,\n            menuItemLimit = _ref$menuItemLimit === undefined ? null : _ref$menuItemLimit;\n\n        _classCallCheck(this, Tribute);\n\n        this.autocompleteMode = autocompleteMode;\n        this.menuSelected = 0;\n        this.current = {};\n        this.inputEvent = false;\n        this.isActive = false;\n        this.menuContainer = menuContainer;\n        this.allowSpaces = allowSpaces;\n        this.replaceTextSuffix = replaceTextSuffix;\n        this.positionMenu = positionMenu;\n        this.hasTrailingSpace = false;\n        this.spaceSelectsMatch = spaceSelectsMatch;\n\n        if (this.autocompleteMode) {\n            trigger = '';\n            allowSpaces = false;\n        }\n\n        if (values) {\n            this.collection = [{\n                // symbol that starts the lookup\n                trigger: trigger,\n\n                // is it wrapped in an iframe\n                iframe: iframe,\n\n                // class applied to selected item\n                selectClass: selectClass,\n\n                // function called on select that retuns the content to insert\n                selectTemplate: (selectTemplate || Tribute.defaultSelectTemplate).bind(this),\n\n                // function called that returns content for an item\n                menuItemTemplate: (menuItemTemplate || Tribute.defaultMenuItemTemplate).bind(this),\n\n                // function called when menu is empty, disables hiding of menu.\n                noMatchTemplate: function (t) {\n                    if (typeof t === 'function') {\n                        return t.bind(_this);\n                    }\n\n                    return noMatchTemplate || function () {\n                        return '';\n                    }.bind(_this);\n                }(noMatchTemplate),\n\n                // column to search against in the object\n                lookup: lookup,\n\n                // column that contains the content to insert by default\n                fillAttr: fillAttr,\n\n                // array of objects or a function returning an array of objects\n                values: values,\n\n                requireLeadingSpace: requireLeadingSpace,\n\n                searchOpts: searchOpts,\n\n                menuItemLimit: menuItemLimit\n            }];\n        } else if (collection) {\n            if (this.autocompleteMode) console.warn('Tribute in autocomplete mode does not work for collections');\n            this.collection = collection.map(function (item) {\n                return {\n                    trigger: item.trigger || trigger,\n                    iframe: item.iframe || iframe,\n                    selectClass: item.selectClass || selectClass,\n                    selectTemplate: (item.selectTemplate || Tribute.defaultSelectTemplate).bind(_this),\n                    menuItemTemplate: (item.menuItemTemplate || Tribute.defaultMenuItemTemplate).bind(_this),\n                    // function called when menu is empty, disables hiding of menu.\n                    noMatchTemplate: function (t) {\n                        if (typeof t === 'function') {\n                            return t.bind(_this);\n                        }\n\n                        return null;\n                    }(noMatchTemplate),\n                    lookup: item.lookup || lookup,\n                    fillAttr: item.fillAttr || fillAttr,\n                    values: item.values,\n                    requireLeadingSpace: item.requireLeadingSpace,\n                    searchOpts: item.searchOpts || searchOpts,\n                    menuItemLimit: item.menuItemLimit || menuItemLimit\n                };\n            });\n        } else {\n            throw new Error('[Tribute] No collection specified.');\n        }\n\n        new _TributeRange2.default(this);\n        new _TributeEvents2.default(this);\n        new _TributeMenuEvents2.default(this);\n        new _TributeSearch2.default(this);\n    }\n\n    _createClass(Tribute, [{\n        key: \"triggers\",\n        value: function triggers() {\n            return this.collection.map(function (config) {\n                return config.trigger;\n            });\n        }\n    }, {\n        key: \"attach\",\n        value: function attach(el) {\n            if (!el) {\n                throw new Error('[Tribute] Must pass in a DOM node or NodeList.');\n            }\n\n            // Check if it is a jQuery collection\n            if (typeof jQuery !== 'undefined' && el instanceof jQuery) {\n                el = el.get();\n            }\n\n            // Is el an Array/Array-like object?\n            if (el.constructor === NodeList || el.constructor === HTMLCollection || el.constructor === Array) {\n                var length = el.length;\n                for (var i = 0; i < length; ++i) {\n                    this._attach(el[i]);\n                }\n            } else {\n                this._attach(el);\n            }\n        }\n    }, {\n        key: \"_attach\",\n        value: function _attach(el) {\n            if (el.hasAttribute('data-tribute')) {\n                console.warn('Tribute was already bound to ' + el.nodeName);\n            }\n\n            this.ensureEditable(el);\n            this.events.bind(el);\n            el.setAttribute('data-tribute', true);\n        }\n    }, {\n        key: \"ensureEditable\",\n        value: function ensureEditable(element) {\n            if (Tribute.inputTypes().indexOf(element.nodeName) === -1) {\n                if (element.contentEditable) {\n                    element.contentEditable = true;\n                } else {\n                    throw new Error('[Tribute] Cannot bind to ' + element.nodeName);\n                }\n            }\n        }\n    }, {\n        key: \"createMenu\",\n        value: function createMenu() {\n            var wrapper = this.range.getDocument().createElement('div'),\n                ul = this.range.getDocument().createElement('ul');\n\n            wrapper.className = 'tribute-container';\n            wrapper.appendChild(ul);\n\n            if (this.menuContainer) {\n                return this.menuContainer.appendChild(wrapper);\n            }\n\n            return this.range.getDocument().body.appendChild(wrapper);\n        }\n    }, {\n        key: \"showMenuFor\",\n        value: function showMenuFor(element, scrollTo) {\n            var _this2 = this;\n\n            // Only proceed if menu isn't already shown for the current element & mentionText\n            if (this.isActive && this.current.element === element && this.current.mentionText === this.currentMentionTextSnapshot) {\n                return;\n            }\n            this.currentMentionTextSnapshot = this.current.mentionText;\n\n            // create the menu if it doesn't exist.\n            if (!this.menu) {\n                this.menu = this.createMenu();\n                element.tributeMenu = this.menu;\n                this.menuEvents.bind(this.menu);\n            }\n\n            this.isActive = true;\n            this.menuSelected = 0;\n\n            if (!this.current.mentionText) {\n                this.current.mentionText = '';\n            }\n\n            var processValues = function processValues(values) {\n                // Tribute may not be active any more by the time the value callback returns\n                if (!_this2.isActive) {\n                    return;\n                }\n\n                var items = _this2.search.filter(_this2.current.mentionText, values, {\n                    pre: _this2.current.collection.searchOpts.pre || '<span>',\n                    post: _this2.current.collection.searchOpts.post || '</span>',\n                    skip: _this2.current.collection.searchOpts.skip,\n                    extract: function extract(el) {\n                        if (typeof _this2.current.collection.lookup === 'string') {\n                            return el[_this2.current.collection.lookup];\n                        } else if (typeof _this2.current.collection.lookup === 'function') {\n                            return _this2.current.collection.lookup(el, _this2.current.mentionText);\n                        } else {\n                            throw new Error('Invalid lookup attribute, lookup must be string or function.');\n                        }\n                    }\n                });\n\n                _this2.current.filteredItems = items;\n\n                var ul = _this2.menu.querySelector('ul');\n\n                _this2.range.positionMenuAtCaret(scrollTo);\n\n                if (!items.length) {\n                    var noMatchEvent = new CustomEvent('tribute-no-match', { detail: _this2.menu });\n                    _this2.current.element.dispatchEvent(noMatchEvent);\n                    if (typeof _this2.current.collection.noMatchTemplate === 'function' && !_this2.current.collection.noMatchTemplate() || !_this2.current.collection.noMatchTemplate) {\n                        _this2.hideMenu();\n                    } else {\n                        typeof _this2.current.collection.noMatchTemplate === 'function' ? ul.innerHTML = _this2.current.collection.noMatchTemplate() : ul.innerHTML = _this2.current.collection.noMatchTemplate;\n                    }\n\n                    return;\n                }\n\n                if (_this2.current.collection.menuItemLimit) {\n                    items = items.slice(0, _this2.current.collection.menuItemLimit);\n                }\n\n                ul.innerHTML = '';\n                var fragment = _this2.range.getDocument().createDocumentFragment();\n\n                items.forEach(function (item, index) {\n                    var li = _this2.range.getDocument().createElement('li');\n                    li.setAttribute('data-index', index);\n                    li.addEventListener('mousemove', function (e) {\n                        var _findLiTarget2 = _this2._findLiTarget(e.target),\n                            _findLiTarget3 = _slicedToArray(_findLiTarget2, 2),\n                            li = _findLiTarget3[0],\n                            index = _findLiTarget3[1];\n\n                        if (e.movementY !== 0) {\n                            _this2.events.setActiveLi(index);\n                        }\n                    });\n                    if (_this2.menuSelected === index) {\n                        li.className = _this2.current.collection.selectClass;\n                    }\n                    li.innerHTML = _this2.current.collection.menuItemTemplate(item);\n                    fragment.appendChild(li);\n                });\n                ul.appendChild(fragment);\n            };\n\n            if (typeof this.current.collection.values === 'function') {\n                this.current.collection.values(this.current.mentionText, processValues);\n            } else {\n                processValues(this.current.collection.values);\n            }\n        }\n    }, {\n        key: \"_findLiTarget\",\n        value: function _findLiTarget(el) {\n            if (!el) return [];\n            var index = el.getAttribute('data-index');\n            return !index ? this._findLiTarget(el.parentNode) : [el, index];\n        }\n    }, {\n        key: \"showMenuForCollection\",\n        value: function showMenuForCollection(element, collectionIndex) {\n            if (element !== document.activeElement) {\n                this.placeCaretAtEnd(element);\n            }\n\n            this.current.collection = this.collection[collectionIndex || 0];\n            this.current.externalTrigger = true;\n            this.current.element = element;\n\n            if (element.isContentEditable) this.insertTextAtCursor(this.current.collection.trigger);else this.insertAtCaret(element, this.current.collection.trigger);\n\n            this.showMenuFor(element);\n        }\n\n        // TODO: make sure this works for inputs/textareas\n\n    }, {\n        key: \"placeCaretAtEnd\",\n        value: function placeCaretAtEnd(el) {\n            el.focus();\n            if (typeof window.getSelection != \"undefined\" && typeof document.createRange != \"undefined\") {\n                var range = document.createRange();\n                range.selectNodeContents(el);\n                range.collapse(false);\n                var sel = window.getSelection();\n                sel.removeAllRanges();\n                sel.addRange(range);\n            } else if (typeof document.body.createTextRange != \"undefined\") {\n                var textRange = document.body.createTextRange();\n                textRange.moveToElementText(el);\n                textRange.collapse(false);\n                textRange.select();\n            }\n        }\n\n        // for contenteditable\n\n    }, {\n        key: \"insertTextAtCursor\",\n        value: function insertTextAtCursor(text) {\n            var sel, range, html;\n            sel = window.getSelection();\n            range = sel.getRangeAt(0);\n            range.deleteContents();\n            var textNode = document.createTextNode(text);\n            range.insertNode(textNode);\n            range.selectNodeContents(textNode);\n            range.collapse(false);\n            sel.removeAllRanges();\n            sel.addRange(range);\n        }\n\n        // for regular inputs\n\n    }, {\n        key: \"insertAtCaret\",\n        value: function insertAtCaret(textarea, text) {\n            var scrollPos = textarea.scrollTop;\n            var caretPos = textarea.selectionStart;\n\n            var front = textarea.value.substring(0, caretPos);\n            var back = textarea.value.substring(textarea.selectionEnd, textarea.value.length);\n            textarea.value = front + text + back;\n            caretPos = caretPos + text.length;\n            textarea.selectionStart = caretPos;\n            textarea.selectionEnd = caretPos;\n            textarea.focus();\n            textarea.scrollTop = scrollPos;\n        }\n    }, {\n        key: \"hideMenu\",\n        value: function hideMenu() {\n            if (this.menu) {\n                this.menu.style.cssText = 'display: none;';\n                this.isActive = false;\n                this.menuSelected = 0;\n                this.current = {};\n            }\n        }\n    }, {\n        key: \"selectItemAtIndex\",\n        value: function selectItemAtIndex(index, originalEvent) {\n            index = parseInt(index);\n            if (typeof index !== 'number' || isNaN(index)) return;\n            var item = this.current.filteredItems[index];\n            var content = this.current.collection.selectTemplate(item);\n            if (content !== null) this.replaceText(content, originalEvent, item);\n        }\n    }, {\n        key: \"replaceText\",\n        value: function replaceText(content, originalEvent, item) {\n            this.range.replaceTriggerText(content, true, true, originalEvent, item);\n        }\n    }, {\n        key: \"_append\",\n        value: function _append(collection, newValues, replace) {\n            if (typeof collection.values === 'function') {\n                throw new Error('Unable to append to values, as it is a function.');\n            } else if (!replace) {\n                collection.values = collection.values.concat(newValues);\n            } else {\n                collection.values = newValues;\n            }\n        }\n    }, {\n        key: \"append\",\n        value: function append(collectionIndex, newValues, replace) {\n            var index = parseInt(collectionIndex);\n            if (typeof index !== 'number') throw new Error('please provide an index for the collection to update.');\n\n            var collection = this.collection[index];\n\n            this._append(collection, newValues, replace);\n        }\n    }, {\n        key: \"appendCurrent\",\n        value: function appendCurrent(newValues, replace) {\n            if (this.isActive) {\n                this._append(this.current.collection, newValues, replace);\n            } else {\n                throw new Error('No active state. Please use append instead and pass an index.');\n            }\n        }\n    }, {\n        key: \"detach\",\n        value: function detach(el) {\n            if (!el) {\n                throw new Error('[Tribute] Must pass in a DOM node or NodeList.');\n            }\n\n            // Check if it is a jQuery collection\n            if (typeof jQuery !== 'undefined' && el instanceof jQuery) {\n                el = el.get();\n            }\n\n            // Is el an Array/Array-like object?\n            if (el.constructor === NodeList || el.constructor === HTMLCollection || el.constructor === Array) {\n                var length = el.length;\n                for (var i = 0; i < length; ++i) {\n                    this._detach(el[i]);\n                }\n            } else {\n                this._detach(el);\n            }\n        }\n    }, {\n        key: \"_detach\",\n        value: function _detach(el) {\n            var _this3 = this;\n\n            this.events.unbind(el);\n            if (el.tributeMenu) {\n                this.menuEvents.unbind(el.tributeMenu);\n            }\n\n            setTimeout(function () {\n                el.removeAttribute('data-tribute');\n                _this3.isActive = false;\n                if (el.tributeMenu) {\n                    el.tributeMenu.remove();\n                }\n            });\n        }\n    }], [{\n        key: \"defaultSelectTemplate\",\n        value: function defaultSelectTemplate(item) {\n            if (typeof item === 'undefined') return null;\n            if (this.range.isContentEditable(this.current.element)) {\n                return '<span class=\"tribute-mention\">' + (this.current.collection.trigger + item.original[this.current.collection.fillAttr]) + '</span>';\n            }\n\n            return this.current.collection.trigger + item.original[this.current.collection.fillAttr];\n        }\n    }, {\n        key: \"defaultMenuItemTemplate\",\n        value: function defaultMenuItemTemplate(matchItem) {\n            return matchItem.string;\n        }\n    }, {\n        key: \"inputTypes\",\n        value: function inputTypes() {\n            return ['TEXTAREA', 'INPUT'];\n        }\n    }]);\n\n    return Tribute;\n}();\n\nexports.default = Tribute;\nmodule.exports = exports.default;\n\n},{\"./TributeEvents\":2,\"./TributeMenuEvents\":3,\"./TributeRange\":4,\"./TributeSearch\":5,\"./utils\":7}],2:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar TributeEvents = function () {\n    function TributeEvents(tribute) {\n        _classCallCheck(this, TributeEvents);\n\n        this.tribute = tribute;\n        this.tribute.events = this;\n    }\n\n    _createClass(TributeEvents, [{\n        key: 'bind',\n        value: function bind(element) {\n            element.boundKeydown = this.keydown.bind(element, this);\n            element.boundKeyup = this.keyup.bind(element, this);\n            element.boundInput = this.input.bind(element, this);\n\n            element.addEventListener('keydown', element.boundKeydown, false);\n            element.addEventListener('keyup', element.boundKeyup, false);\n            element.addEventListener('input', element.boundInput, false);\n        }\n    }, {\n        key: 'unbind',\n        value: function unbind(element) {\n            element.removeEventListener('keydown', element.boundKeydown, false);\n            element.removeEventListener('keyup', element.boundKeyup, false);\n            element.removeEventListener('input', element.boundInput, false);\n\n            delete element.boundKeydown;\n            delete element.boundKeyup;\n            delete element.boundInput;\n        }\n    }, {\n        key: 'keydown',\n        value: function keydown(instance, event) {\n            if (instance.shouldDeactivate(event)) {\n                instance.tribute.isActive = false;\n                instance.tribute.hideMenu();\n            }\n\n            var element = this;\n            instance.commandEvent = false;\n\n            TributeEvents.keys().forEach(function (o) {\n                if (o.key === event.keyCode) {\n                    instance.commandEvent = true;\n                    instance.callbacks()[o.value.toLowerCase()](event, element);\n                }\n            });\n        }\n    }, {\n        key: 'input',\n        value: function input(instance, event) {\n            instance.inputEvent = true;\n            instance.keyup.call(this, instance, event);\n        }\n    }, {\n        key: 'click',\n        value: function click(instance, event) {\n            console.log('clickity');\n            var tribute = instance.tribute;\n            if (tribute.menu && tribute.menu.contains(event.target)) {\n                var li = event.target;\n                event.preventDefault();\n                event.stopPropagation();\n                while (li.nodeName.toLowerCase() !== 'li') {\n                    li = li.parentNode;\n                    if (!li || li === tribute.menu) {\n                        throw new Error('cannot find the <li> container for the click');\n                    }\n                }\n                tribute.selectItemAtIndex(li.getAttribute('data-index'), event);\n                tribute.hideMenu();\n\n                // TODO: should fire with externalTrigger and target is outside of menu\n            } else if (tribute.current.element && !tribute.current.externalTrigger) {\n                tribute.current.externalTrigger = false;\n                setTimeout(function () {\n                    return tribute.hideMenu();\n                });\n            }\n        }\n    }, {\n        key: 'keyup',\n        value: function keyup(instance, event) {\n            if (instance.inputEvent) {\n                instance.inputEvent = false;\n            }\n            instance.updateSelection(this);\n\n            if (event.keyCode === 27) return;\n\n            if (!instance.tribute.allowSpaces && instance.tribute.hasTrailingSpace) {\n                instance.tribute.hasTrailingSpace = false;\n                instance.commandEvent = true;\n                instance.callbacks()[\"space\"](event, this);\n                return;\n            }\n\n            if (!instance.tribute.isActive) {\n                if (instance.tribute.autocompleteMode) {\n                    instance.callbacks().triggerChar(event, this, '');\n                } else {\n                    var keyCode = instance.getKeyCode(instance, this, event);\n\n                    if (isNaN(keyCode) || !keyCode) return;\n\n                    var trigger = instance.tribute.triggers().find(function (trigger) {\n                        return trigger.charCodeAt(0) === keyCode;\n                    });\n\n                    if (typeof trigger !== 'undefined') {\n                        instance.callbacks().triggerChar(event, this, trigger);\n                    }\n                }\n            }\n\n            if ((instance.tribute.current.trigger || instance.tribute.autocompleteMode) && instance.commandEvent === false || instance.tribute.isActive && event.keyCode === 8) {\n                instance.tribute.showMenuFor(this, true);\n            }\n        }\n    }, {\n        key: 'shouldDeactivate',\n        value: function shouldDeactivate(event) {\n            if (!this.tribute.isActive) return false;\n\n            if (this.tribute.current.mentionText.length === 0) {\n                var eventKeyPressed = false;\n                TributeEvents.keys().forEach(function (o) {\n                    if (event.keyCode === o.key) eventKeyPressed = true;\n                });\n\n                return !eventKeyPressed;\n            }\n\n            return false;\n        }\n    }, {\n        key: 'getKeyCode',\n        value: function getKeyCode(instance, el, event) {\n            var char = void 0;\n            var tribute = instance.tribute;\n            var info = tribute.range.getTriggerInfo(false, tribute.hasTrailingSpace, true, tribute.allowSpaces, tribute.autocompleteMode);\n\n            if (info) {\n                return info.mentionTriggerChar.charCodeAt(0);\n            } else {\n                return false;\n            }\n        }\n    }, {\n        key: 'updateSelection',\n        value: function updateSelection(el) {\n            this.tribute.current.element = el;\n            var info = this.tribute.range.getTriggerInfo(false, this.tribute.hasTrailingSpace, true, this.tribute.allowSpaces, this.tribute.autocompleteMode);\n\n            if (info) {\n                this.tribute.current.selectedPath = info.mentionSelectedPath;\n                this.tribute.current.mentionText = info.mentionText;\n                this.tribute.current.selectedOffset = info.mentionSelectedOffset;\n            }\n        }\n    }, {\n        key: 'callbacks',\n        value: function callbacks() {\n            var _this = this;\n\n            return {\n                triggerChar: function triggerChar(e, el, trigger) {\n                    var tribute = _this.tribute;\n                    tribute.current.trigger = trigger;\n\n                    var collectionItem = tribute.collection.find(function (item) {\n                        return item.trigger === trigger;\n                    });\n\n                    tribute.current.collection = collectionItem;\n                    if (tribute.inputEvent) tribute.showMenuFor(el, true);\n                },\n                enter: function enter(e, el) {\n                    // choose selection\n                    if (_this.tribute.isActive && _this.tribute.current.filteredItems) {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        setTimeout(function () {\n                            _this.tribute.selectItemAtIndex(_this.tribute.menuSelected, e);\n                            _this.tribute.hideMenu();\n                        }, 0);\n                    }\n                },\n                escape: function escape(e, el) {\n                    if (_this.tribute.isActive) {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        _this.tribute.isActive = false;\n                        _this.tribute.hideMenu();\n                    }\n                },\n                tab: function tab(e, el) {\n                    // choose first match\n                    _this.callbacks().enter(e, el);\n                },\n                space: function space(e, el) {\n                    if (_this.tribute.isActive) {\n                        if (_this.tribute.spaceSelectsMatch) {\n                            _this.callbacks().enter(e, el);\n                        } else if (!_this.tribute.allowSpaces) {\n                            e.stopPropagation();\n                            setTimeout(function () {\n                                _this.tribute.hideMenu();\n                                _this.tribute.isActive = false;\n                            }, 0);\n                        }\n                    }\n                },\n                up: function up(e, el) {\n                    // navigate up ul\n                    if (_this.tribute.isActive && _this.tribute.current.filteredItems) {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        var count = _this.tribute.current.filteredItems.length,\n                            selected = _this.tribute.menuSelected;\n\n                        if (count > selected && selected > 0) {\n                            _this.tribute.menuSelected--;\n                            _this.setActiveLi();\n                        } else if (selected === 0) {\n                            _this.tribute.menuSelected = count - 1;\n                            _this.setActiveLi();\n                            _this.tribute.menu.scrollTop = _this.tribute.menu.scrollHeight;\n                        }\n                    }\n                },\n                down: function down(e, el) {\n                    // navigate down ul\n                    if (_this.tribute.isActive && _this.tribute.current.filteredItems) {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        var count = _this.tribute.current.filteredItems.length - 1,\n                            selected = _this.tribute.menuSelected;\n\n                        if (count > selected) {\n                            _this.tribute.menuSelected++;\n                            _this.setActiveLi();\n                        } else if (count === selected) {\n                            _this.tribute.menuSelected = 0;\n                            _this.setActiveLi();\n                            _this.tribute.menu.scrollTop = 0;\n                        }\n                    }\n                },\n                delete: function _delete(e, el) {\n                    if (_this.tribute.isActive && _this.tribute.current.mentionText.length < 1) {\n                        _this.tribute.hideMenu();\n                    } else if (_this.tribute.isActive) {\n                        _this.tribute.showMenuFor(el);\n                    }\n                }\n            };\n        }\n    }, {\n        key: 'setActiveLi',\n        value: function setActiveLi(index) {\n            var lis = this.tribute.menu.querySelectorAll('li'),\n                length = lis.length >>> 0;\n\n            if (index) this.tribute.menuSelected = parseInt(index);\n\n            for (var i = 0; i < length; i++) {\n                var li = lis[i];\n                if (i === this.tribute.menuSelected) {\n                    li.classList.add(this.tribute.current.collection.selectClass);\n\n                    var liClientRect = li.getBoundingClientRect();\n                    var menuClientRect = this.tribute.menu.getBoundingClientRect();\n\n                    if (liClientRect.bottom > menuClientRect.bottom) {\n                        var scrollDistance = liClientRect.bottom - menuClientRect.bottom;\n                        this.tribute.menu.scrollTop += scrollDistance;\n                    } else if (liClientRect.top < menuClientRect.top) {\n                        var _scrollDistance = menuClientRect.top - liClientRect.top;\n                        this.tribute.menu.scrollTop -= _scrollDistance;\n                    }\n                } else {\n                    li.classList.remove(this.tribute.current.collection.selectClass);\n                }\n            }\n        }\n    }, {\n        key: 'getFullHeight',\n        value: function getFullHeight(elem, includeMargin) {\n            var height = elem.getBoundingClientRect().height;\n\n            if (includeMargin) {\n                var style = elem.currentStyle || this.getWindowSelection().getComputedStyle(elem);\n                return height + parseFloat(style.marginTop) + parseFloat(style.marginBottom);\n            }\n\n            return height;\n        }\n    }], [{\n        key: 'keys',\n        value: function keys() {\n            return [{\n                key: 9,\n                value: 'TAB'\n            }, {\n                key: 8,\n                value: 'DELETE'\n            }, {\n                key: 13,\n                value: 'ENTER'\n            }, {\n                key: 27,\n                value: 'ESCAPE'\n            }, {\n                key: 32,\n                value: 'SPACE'\n            }, {\n                key: 38,\n                value: 'UP'\n            }, {\n                key: 40,\n                value: 'DOWN'\n            }];\n        }\n    }]);\n\n    return TributeEvents;\n}();\n\nexports.default = TributeEvents;\nmodule.exports = exports.default;\n\n},{}],3:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar TributeMenuEvents = function () {\n    function TributeMenuEvents(tribute) {\n        _classCallCheck(this, TributeMenuEvents);\n\n        this.tribute = tribute;\n        this.tribute.menuEvents = this;\n        this.menu = this.tribute.menu;\n    }\n\n    _createClass(TributeMenuEvents, [{\n        key: 'bind',\n        value: function bind(menu) {\n            var _this = this;\n\n            this.menuClickEvent = this.tribute.events.click.bind(null, this);\n            this.menuContainerScrollEvent = this.debounce(function () {\n                if (_this.tribute.isActive) {\n                    _this.tribute.showMenuFor(_this.tribute.current.element, false);\n                }\n            }, 300, false);\n            this.windowResizeEvent = this.debounce(function () {\n                if (_this.tribute.isActive) {\n                    _this.tribute.range.positionMenuAtCaret(true);\n                }\n            }, 300, false);\n\n            // fixes IE11 issues with mousedown\n            this.tribute.menuContainer.addEventListener('MSPointerDown', this.menuClickEvent, false);\n            this.tribute.menuContainer.addEventListener('mousedown', this.menuClickEvent, false);\n\n            this.tribute.range.getWindow().addEventListener('resize', this.windowResizeEvent);\n\n            if (this.menuContainer) {\n                this.menuContainer.addEventListener('scroll', this.menuContainerScrollEvent, false);\n            } else {\n                this.tribute.range.getWindow().addEventListener('scroll', this.menuContainerScrollEvent);\n            }\n        }\n    }, {\n        key: 'unbind',\n        value: function unbind(menu) {\n            this.tribute.range.getDocument().removeEventListener('mousedown', this.menuClickEvent, false);\n            this.tribute.range.getDocument().removeEventListener('MSPointerDown', this.menuClickEvent, false);\n            this.tribute.range.getWindow().removeEventListener('resize', this.windowResizeEvent);\n\n            if (this.menuContainer) {\n                this.menuContainer.removeEventListener('scroll', this.menuContainerScrollEvent, false);\n            } else {\n                this.tribute.range.getWindow().removeEventListener('scroll', this.menuContainerScrollEvent);\n            }\n        }\n    }, {\n        key: 'debounce',\n        value: function debounce(func, wait, immediate) {\n            var _this2 = this,\n                _arguments = arguments;\n\n            var timeout;\n            return function () {\n                var context = _this2,\n                    args = _arguments;\n                var later = function later() {\n                    timeout = null;\n                    if (!immediate) func.apply(context, args);\n                };\n                var callNow = immediate && !timeout;\n                clearTimeout(timeout);\n                timeout = setTimeout(later, wait);\n                if (callNow) func.apply(context, args);\n            };\n        }\n    }]);\n\n    return TributeMenuEvents;\n}();\n\nexports.default = TributeMenuEvents;\nmodule.exports = exports.default;\n\n},{}],4:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// Thanks to https://github.com/jeff-collins/ment.io\nvar TributeRange = function () {\n    function TributeRange(tribute) {\n        _classCallCheck(this, TributeRange);\n\n        this.tribute = tribute;\n        this.tribute.range = this;\n    }\n\n    _createClass(TributeRange, [{\n        key: 'getDocument',\n        value: function getDocument() {\n            var ownerDocument = this.tribute.current.element.ownerDocument;\n\n\n            if (ownerDocument) {\n                return ownerDocument;\n            }\n\n            return document;\n        }\n    }, {\n        key: 'getWindowSelection',\n        value: function getWindowSelection() {\n            var ownerWindow = this.getWindow();\n\n            return ownerWindow.getSelection();\n        }\n    }, {\n        key: 'getWindow',\n        value: function getWindow() {\n            var doc = this.getDocument();\n            var ownerWindow = doc.defaultView ? doc.defaultView : doc.parentWindow;\n\n            if (ownerWindow) {\n                return ownerWindow;\n            }\n\n            return window;\n        }\n    }, {\n        key: 'positionMenuAtCaret',\n        value: function positionMenuAtCaret(scrollTo) {\n            var _this = this;\n\n            var context = this.tribute.current,\n                coordinates = void 0;\n\n            var info = this.getTriggerInfo(false, this.tribute.hasTrailingSpace, true, this.tribute.allowSpaces, this.tribute.autocompleteMode);\n\n            if (typeof info !== 'undefined') {\n\n                if (!this.tribute.positionMenu) {\n                    this.tribute.menu.style.cssText = 'display: block;';\n                    return;\n                }\n\n                if (!this.isContentEditable(context.element)) {\n                    coordinates = this.getTextAreaOrInputUnderlinePosition(this.tribute.current.element, info.mentionPosition);\n                } else {\n                    coordinates = this.getContentEditableCaretPosition(info.mentionPosition);\n                }\n\n                this.tribute.menu.style.cssText = 'top: ' + coordinates.top + 'px;\\n                                     left: ' + coordinates.left + 'px;\\n                                     right: ' + coordinates.right + 'px;\\n                                     bottom: ' + coordinates.bottom + 'px;\\n                                     position: absolute;\\n                                     z-index: 10000;\\n                                     display: block;';\n\n                if (coordinates.left === 'auto') {\n                    this.tribute.menu.style.left = 'auto';\n                }\n\n                if (coordinates.top === 'auto') {\n                    this.tribute.menu.style.top = 'auto';\n                }\n\n                if (scrollTo) this.scrollIntoView();\n\n                setTimeout(function () {\n                    var menuDimensions = {\n                        width: _this.tribute.menu.offsetWidth,\n                        height: _this.tribute.menu.offsetHeight\n                    };\n                    var menuIsOffScreen = _this.isMenuOffScreen(coordinates, menuDimensions);\n\n                    var menuIsOffScreenHorizontally = _this.getWindowSelection().innerWidth > menuDimensions.width && (menuIsOffScreen.left || menuIsOffScreen.right);\n                    var menuIsOffScreenVertically = _this.getWindowSelection().innerHeight > menuDimensions.height && (menuIsOffScreen.top || menuIsOffScreen.bottom);\n                    if (menuIsOffScreenHorizontally || menuIsOffScreenVertically) {\n                        _this.tribute.menu.style.cssText = 'display: none';\n                        _this.positionMenuAtCaret(scrollTo);\n                    }\n                }, 0);\n            } else {\n                this.tribute.menu.style.cssText = 'display: none';\n            }\n        }\n    }, {\n        key: 'selectElement',\n        value: function selectElement(targetElement, path, offset) {\n            var range = void 0;\n            var elem = targetElement;\n\n            if (path) {\n                for (var i = 0; i < path.length; i++) {\n                    elem = elem.childNodes[path[i]];\n                    if (elem === undefined) {\n                        return;\n                    }\n                    while (elem.length < offset) {\n                        offset -= elem.length;\n                        elem = elem.nextSibling;\n                    }\n                    if (elem.childNodes.length === 0 && !elem.length) {\n                        elem = elem.previousSibling;\n                    }\n                }\n            }\n            var sel = this.getWindowSelection();\n\n            range = this.getDocument().createRange();\n            range.setStart(elem, offset);\n            range.setEnd(elem, offset);\n            range.collapse(true);\n\n            try {\n                sel.removeAllRanges();\n            } catch (error) {}\n\n            sel.addRange(range);\n            targetElement.focus();\n        }\n    }, {\n        key: 'replaceTriggerText',\n        value: function replaceTriggerText(text, requireLeadingSpace, hasTrailingSpace, originalEvent, item) {\n            var info = this.getTriggerInfo(true, hasTrailingSpace, requireLeadingSpace, this.tribute.allowSpaces, this.tribute.autocompleteMode);\n\n            if (info !== undefined) {\n                var context = this.tribute.current;\n                var replaceEvent = new CustomEvent('tribute-replaced', {\n                    detail: {\n                        item: item,\n                        instance: context,\n                        context: info,\n                        event: originalEvent\n                    }\n                });\n\n                if (!this.isContentEditable(context.element)) {\n                    var myField = this.tribute.current.element;\n                    var textSuffix = typeof this.tribute.replaceTextSuffix == 'string' ? this.tribute.replaceTextSuffix : ' ';\n                    text += textSuffix;\n                    var startPos = info.mentionPosition;\n                    var endPos = info.mentionPosition + info.mentionText.length + textSuffix.length;\n                    myField.value = myField.value.substring(0, startPos) + text + myField.value.substring(endPos, myField.value.length);\n                    myField.selectionStart = startPos + text.length;\n                    myField.selectionEnd = startPos + text.length;\n                } else {\n                    // add a space to the end of the pasted text\n                    var _textSuffix = typeof this.tribute.replaceTextSuffix == 'string' ? this.tribute.replaceTextSuffix : '\\xA0';\n                    text += _textSuffix;\n                    this.pasteHtml(text, info.mentionPosition, info.mentionPosition + info.mentionText.length + !this.tribute.autocompleteMode);\n                }\n\n                context.element.dispatchEvent(replaceEvent);\n            }\n        }\n    }, {\n        key: 'pasteHtml',\n        value: function pasteHtml(html, startPos, endPos) {\n            var range = void 0,\n                sel = void 0;\n            sel = this.getWindowSelection();\n            range = this.getDocument().createRange();\n            range.setStart(sel.anchorNode, startPos);\n            range.setEnd(sel.anchorNode, endPos);\n            range.deleteContents();\n\n            var el = this.getDocument().createElement('div');\n            el.innerHTML = html;\n            var frag = this.getDocument().createDocumentFragment(),\n                node = void 0,\n                lastNode = void 0;\n            while (node = el.firstChild) {\n                lastNode = frag.appendChild(node);\n            }\n            range.insertNode(frag);\n\n            // Preserve the selection\n            if (lastNode) {\n                range = range.cloneRange();\n                range.setStartAfter(lastNode);\n                range.collapse(true);\n                sel.removeAllRanges();\n                sel.addRange(range);\n            }\n        }\n    }, {\n        key: 'getNodePositionInParent',\n        value: function getNodePositionInParent(element) {\n            if (element.parentNode === null) {\n                return 0;\n            }\n\n            for (var i = 0; i < element.parentNode.childNodes.length; i++) {\n                var node = element.parentNode.childNodes[i];\n\n                if (node === element) {\n                    return i;\n                }\n            }\n        }\n    }, {\n        key: 'getContentEditableSelectedPath',\n        value: function getContentEditableSelectedPath(ctx) {\n            var sel = this.getWindowSelection();\n            var selected = sel.anchorNode;\n            var path = [];\n            var offset = void 0;\n\n            if (selected != null) {\n                var i = void 0;\n                var ce = selected.contentEditable;\n                while (selected !== null && ce !== 'true') {\n                    i = this.getNodePositionInParent(selected);\n                    path.push(i);\n                    selected = selected.parentNode;\n                    if (selected !== null) {\n                        ce = selected.contentEditable;\n                    }\n                }\n                path.reverse();\n\n                // getRangeAt may not exist, need alternative\n                offset = sel.getRangeAt(0).startOffset;\n\n                return {\n                    selected: selected,\n                    path: path,\n                    offset: offset\n                };\n            }\n        }\n    }, {\n        key: 'getTextPrecedingCurrentSelection',\n        value: function getTextPrecedingCurrentSelection() {\n            var context = this.tribute.current,\n                text = '';\n\n            if (!this.isContentEditable(context.element)) {\n                var textComponent = this.tribute.current.element;\n                if (textComponent) {\n                    var startPos = textComponent.selectionStart;\n                    if (textComponent.value && startPos >= 0) {\n                        text = textComponent.value.substring(0, startPos);\n                    }\n                }\n            } else {\n                var selectedElem = this.getWindowSelection().anchorNode;\n\n                if (selectedElem != null) {\n                    var workingNodeContent = selectedElem.textContent;\n                    var selectStartOffset = this.getWindowSelection().getRangeAt(0).startOffset;\n\n                    if (workingNodeContent && selectStartOffset >= 0) {\n                        text = workingNodeContent.substring(0, selectStartOffset);\n                    }\n                }\n            }\n\n            return text;\n        }\n    }, {\n        key: 'getLastWordInText',\n        value: function getLastWordInText(text) {\n            text = text.replace(/\\u00A0/g, ' '); // https://stackoverflow.com/questions/29850407/how-do-i-replace-unicode-character-u00a0-with-a-space-in-javascript\n            var wordsArray = text.split(' ');\n            var worldsCount = wordsArray.length - 1;\n            return wordsArray[worldsCount].trim();\n        }\n    }, {\n        key: 'getTriggerInfo',\n        value: function getTriggerInfo(menuAlreadyActive, hasTrailingSpace, requireLeadingSpace, allowSpaces, isAutocomplete) {\n            var _this2 = this;\n\n            var ctx = this.tribute.current;\n            var selected = void 0,\n                path = void 0,\n                offset = void 0;\n\n            if (!this.isContentEditable(ctx.element)) {\n                selected = this.tribute.current.element;\n            } else {\n                var selectionInfo = this.getContentEditableSelectedPath(ctx);\n\n                if (selectionInfo) {\n                    selected = selectionInfo.selected;\n                    path = selectionInfo.path;\n                    offset = selectionInfo.offset;\n                }\n            }\n\n            var effectiveRange = this.getTextPrecedingCurrentSelection();\n            var lastWordOfEffectiveRange = this.getLastWordInText(effectiveRange);\n\n            if (isAutocomplete) {\n                return {\n                    mentionPosition: effectiveRange.length - lastWordOfEffectiveRange.length,\n                    mentionText: lastWordOfEffectiveRange,\n                    mentionSelectedElement: selected,\n                    mentionSelectedPath: path,\n                    mentionSelectedOffset: offset\n                };\n            }\n\n            if (effectiveRange !== undefined && effectiveRange !== null) {\n                var mostRecentTriggerCharPos = -1;\n                var triggerChar = void 0;\n\n                this.tribute.collection.forEach(function (config) {\n                    var c = config.trigger;\n                    var idx = config.requireLeadingSpace ? _this2.lastIndexWithLeadingSpace(effectiveRange, c) : effectiveRange.lastIndexOf(c);\n\n                    if (idx > mostRecentTriggerCharPos) {\n                        mostRecentTriggerCharPos = idx;\n                        triggerChar = c;\n                        requireLeadingSpace = config.requireLeadingSpace;\n                    }\n                });\n\n                if (mostRecentTriggerCharPos >= 0 && (mostRecentTriggerCharPos === 0 || !requireLeadingSpace || /[\\xA0\\s]/g.test(effectiveRange.substring(mostRecentTriggerCharPos - 1, mostRecentTriggerCharPos)))) {\n                    var currentTriggerSnippet = effectiveRange.substring(mostRecentTriggerCharPos + 1, effectiveRange.length);\n\n                    triggerChar = effectiveRange.substring(mostRecentTriggerCharPos, mostRecentTriggerCharPos + 1);\n                    var firstSnippetChar = currentTriggerSnippet.substring(0, 1);\n                    var leadingSpace = currentTriggerSnippet.length > 0 && (firstSnippetChar === ' ' || firstSnippetChar === '\\xA0');\n                    if (hasTrailingSpace) {\n                        currentTriggerSnippet = currentTriggerSnippet.trim();\n                    }\n\n                    var regex = allowSpaces ? /[^\\S ]/g : /[\\xA0\\s]/g;\n\n                    this.tribute.hasTrailingSpace = regex.test(currentTriggerSnippet);\n\n                    if (!leadingSpace && (menuAlreadyActive || !regex.test(currentTriggerSnippet))) {\n                        return {\n                            mentionPosition: mostRecentTriggerCharPos,\n                            mentionText: currentTriggerSnippet,\n                            mentionSelectedElement: selected,\n                            mentionSelectedPath: path,\n                            mentionSelectedOffset: offset,\n                            mentionTriggerChar: triggerChar\n                        };\n                    }\n                }\n            }\n        }\n    }, {\n        key: 'lastIndexWithLeadingSpace',\n        value: function lastIndexWithLeadingSpace(str, char) {\n            var reversedStr = str.split('').reverse().join('');\n            var index = -1;\n\n            for (var cidx = 0, len = str.length; cidx < len; cidx++) {\n                var firstChar = cidx === str.length - 1;\n                var leadingSpace = /\\s/.test(reversedStr[cidx + 1]);\n                var match = char === reversedStr[cidx];\n\n                if (match && (firstChar || leadingSpace)) {\n                    index = str.length - 1 - cidx;\n                    break;\n                }\n            }\n\n            return index;\n        }\n    }, {\n        key: 'isContentEditable',\n        value: function isContentEditable(element) {\n            return element.nodeName !== 'INPUT' && element.nodeName !== 'TEXTAREA';\n        }\n    }, {\n        key: 'isMenuOffScreen',\n        value: function isMenuOffScreen(coordinates, menuDimensions) {\n            var windowObject = this.getWindowSelection();\n            var windowWidth = windowObject.innerWidth;\n            var windowHeight = windowObject.innerHeight;\n            var doc = document.documentElement;\n            var windowLeft = (windowObject.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\n            var windowTop = (windowObject.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\n\n            var menuTop = typeof coordinates.top === 'number' ? coordinates.top : windowTop + windowHeight - coordinates.bottom - menuDimensions.height;\n            var menuRight = typeof coordinates.right === 'number' ? coordinates.right : coordinates.left + menuDimensions.width;\n            var menuBottom = typeof coordinates.bottom === 'number' ? coordinates.bottom : coordinates.top + menuDimensions.height;\n            var menuLeft = typeof coordinates.left === 'number' ? coordinates.left : windowLeft + windowWidth - coordinates.right - menuDimensions.width;\n\n            return {\n                top: menuTop < Math.floor(windowTop),\n                right: menuRight > Math.ceil(windowLeft + windowWidth),\n                bottom: menuBottom > Math.ceil(windowTop + windowHeight),\n                left: menuLeft < Math.floor(windowLeft)\n            };\n        }\n    }, {\n        key: 'getMenuDimensions',\n        value: function getMenuDimensions() {\n            // Width of the menu depends of its contents and position\n            // We must check what its width would be without any obstruction\n            // This way, we can achieve good positioning for flipping the menu\n            var dimensions = {\n                width: null,\n                height: null\n            };\n\n            this.tribute.menu.style.cssText = 'top: 0px;\\n                                 left: 0px;\\n                                 position: fixed;\\n                                 zIndex: 10000;\\n                                 display: block;\\n                                 visibility; hidden;';\n            dimensions.width = this.tribute.menu.offsetWidth;\n            dimensions.height = this.tribute.menu.offsetHeight;\n\n            this.tribute.menu.style.cssText = 'display: none;';\n\n            return dimensions;\n        }\n    }, {\n        key: 'getTextAreaOrInputUnderlinePosition',\n        value: function getTextAreaOrInputUnderlinePosition(element, position, flipped) {\n            var properties = ['direction', 'boxSizing', 'width', 'height', 'overflowX', 'overflowY', 'borderTopWidth', 'borderRightWidth', 'borderBottomWidth', 'borderLeftWidth', 'paddingTop', 'paddingRight', 'paddingBottom', 'paddingLeft', 'fontStyle', 'fontVariant', 'fontWeight', 'fontStretch', 'fontSize', 'fontSizeAdjust', 'lineHeight', 'fontFamily', 'textAlign', 'textTransform', 'textIndent', 'textDecoration', 'letterSpacing', 'wordSpacing'];\n\n            var isFirefox = this.getWindowSelection().mozInnerScreenX !== null;\n\n            var div = this.getDocument().createElement('div');\n            div.id = 'input-textarea-caret-position-mirror-div';\n            this.getDocument().body.appendChild(div);\n\n            var style = div.style;\n            var computed = this.getWindowSelection().getComputedStyle ? getComputedStyle(element) : element.currentStyle;\n\n            style.whiteSpace = 'pre-wrap';\n            if (element.nodeName !== 'INPUT') {\n                style.wordWrap = 'break-word';\n            }\n\n            // position off-screen\n            style.position = 'absolute';\n            style.visibility = 'hidden';\n\n            // transfer the element's properties to the div\n            properties.forEach(function (prop) {\n                style[prop] = computed[prop];\n            });\n\n            if (isFirefox) {\n                style.width = parseInt(computed.width) - 2 + 'px';\n                if (element.scrollHeight > parseInt(computed.height)) style.overflowY = 'scroll';\n            } else {\n                style.overflow = 'hidden';\n            }\n\n            div.textContent = element.value.substring(0, position);\n\n            if (element.nodeName === 'INPUT') {\n                div.textContent = div.textContent.replace(/\\s/g, ' ');\n            }\n\n            var span = this.getDocument().createElement('span');\n            span.textContent = element.value.substring(position) || '.';\n            div.appendChild(span);\n\n            var rect = element.getBoundingClientRect();\n            var doc = document.documentElement;\n            var windowLeft = (this.getWindowSelection().pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\n            var windowTop = (this.getWindowSelection().pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\n\n            var coordinates = {\n                top: rect.top + windowTop + span.offsetTop + parseInt(computed.borderTopWidth) + parseInt(computed.fontSize) - element.scrollTop,\n                left: rect.left + windowLeft + span.offsetLeft + parseInt(computed.borderLeftWidth)\n            };\n\n            var windowWidth = this.getWindowSelection().innerWidth;\n            var windowHeight = this.getWindowSelection().innerHeight;\n\n            var menuDimensions = this.getMenuDimensions();\n            var menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions);\n\n            if (menuIsOffScreen.right) {\n                coordinates.right = windowWidth - coordinates.left;\n                coordinates.left = 'auto';\n            }\n\n            var parentHeight = this.tribute.menuContainer ? this.tribute.menuContainer.offsetHeight : this.getDocument().body.offsetHeight;\n\n            if (menuIsOffScreen.bottom) {\n                var parentRect = this.tribute.menuContainer ? this.tribute.menuContainer.getBoundingClientRect() : this.getDocument().body.getBoundingClientRect();\n                var scrollStillAvailable = parentHeight - (windowHeight - parentRect.top);\n\n                coordinates.bottom = scrollStillAvailable + (windowHeight - rect.top - span.offsetTop);\n                coordinates.top = 'auto';\n            }\n\n            menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions);\n            if (menuIsOffScreen.left) {\n                coordinates.left = windowWidth > menuDimensions.width ? windowLeft + windowWidth - menuDimensions.width : windowLeft;\n                delete coordinates.right;\n            }\n            if (menuIsOffScreen.top) {\n                coordinates.top = windowHeight > menuDimensions.height ? windowTop + windowHeight - menuDimensions.height : windowTop;\n                delete coordinates.bottom;\n            }\n\n            this.getDocument().body.removeChild(div);\n            return coordinates;\n        }\n    }, {\n        key: 'getContentEditableCaretPosition',\n        value: function getContentEditableCaretPosition(selectedNodePosition) {\n            var markerTextChar = '﻿';\n            var markerEl = void 0,\n                markerId = 'sel_' + new Date().getTime() + '_' + Math.random().toString().substr(2);\n            var range = void 0;\n            var sel = this.getWindowSelection();\n            var prevRange = sel.getRangeAt(0);\n\n            range = this.getDocument().createRange();\n            range.setStart(sel.anchorNode, selectedNodePosition);\n            range.setEnd(sel.anchorNode, selectedNodePosition);\n\n            range.collapse(false);\n\n            // Create the marker element containing a single invisible character using DOM methods and insert it\n            markerEl = this.getDocument().createElement('span');\n            markerEl.id = markerId;\n\n            markerEl.appendChild(this.getDocument().createTextNode(markerTextChar));\n            range.insertNode(markerEl);\n            sel.removeAllRanges();\n            sel.addRange(prevRange);\n\n            var rect = markerEl.getBoundingClientRect();\n            var doc = document.documentElement;\n            var windowLeft = (this.getWindowSelection().pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\n            var windowTop = (this.getWindowSelection().pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\n            var coordinates = {\n                left: rect.left + windowLeft,\n                top: rect.top + markerEl.offsetHeight + windowTop\n            };\n            var windowWidth = this.getWindowSelection().innerWidth;\n            var windowHeight = this.getWindowSelection().innerHeight;\n\n            var menuDimensions = this.getMenuDimensions();\n            var menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions);\n\n            if (menuIsOffScreen.right) {\n                coordinates.left = 'auto';\n                coordinates.right = windowWidth - rect.left - windowLeft;\n            }\n\n            var parentHeight = this.tribute.menuContainer ? this.tribute.menuContainer.offsetHeight : this.getDocument().body.offsetHeight;\n\n            if (menuIsOffScreen.bottom) {\n                var parentRect = this.tribute.menuContainer ? this.tribute.menuContainer.getBoundingClientRect() : this.getDocument().body.getBoundingClientRect();\n                var scrollStillAvailable = parentHeight - (windowHeight - parentRect.top);\n\n                coordinates.top = 'auto';\n                coordinates.bottom = scrollStillAvailable + (windowHeight - rect.top);\n            }\n\n            menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions);\n            if (menuIsOffScreen.left) {\n                coordinates.left = windowWidth > menuDimensions.width ? windowLeft + windowWidth - menuDimensions.width : windowLeft;\n                delete coordinates.right;\n            }\n            if (menuIsOffScreen.top) {\n                coordinates.top = windowHeight > menuDimensions.height ? windowTop + windowHeight - menuDimensions.height : windowTop;\n                delete coordinates.bottom;\n            }\n\n            markerEl.parentNode.removeChild(markerEl);\n            return coordinates;\n        }\n    }, {\n        key: 'scrollIntoView',\n        value: function scrollIntoView(elem) {\n            var reasonableBuffer = 20,\n                clientRect = void 0;\n            var maxScrollDisplacement = 100;\n            var e = this.menu;\n\n            if (typeof e === 'undefined') return;\n\n            while (clientRect === undefined || clientRect.height === 0) {\n                clientRect = e.getBoundingClientRect();\n\n                if (clientRect.height === 0) {\n                    e = e.childNodes[0];\n                    if (e === undefined || !e.getBoundingClientRect) {\n                        return;\n                    }\n                }\n            }\n\n            var elemTop = clientRect.top;\n            var elemBottom = elemTop + clientRect.height;\n\n            if (elemTop < 0) {\n                this.getWindowSelection().scrollTo(0, this.getWindowSelection().pageYOffset + clientRect.top - reasonableBuffer);\n            } else if (elemBottom > this.getWindowSelection().innerHeight) {\n                var maxY = this.getWindowSelection().pageYOffset + clientRect.top - reasonableBuffer;\n\n                if (maxY - this.getWindowSelection().pageYOffset > maxScrollDisplacement) {\n                    maxY = this.getWindowSelection().pageYOffset + maxScrollDisplacement;\n                }\n\n                var targetY = this.getWindowSelection().pageYOffset - (this.getWindowSelection().innerHeight - elemBottom);\n\n                if (targetY > maxY) {\n                    targetY = maxY;\n                }\n\n                this.getWindowSelection().scrollTo(0, targetY);\n            }\n        }\n    }]);\n\n    return TributeRange;\n}();\n\nexports.default = TributeRange;\nmodule.exports = exports.default;\n\n},{}],5:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// Thanks to https://github.com/mattyork/fuzzy\nvar TributeSearch = function () {\n    function TributeSearch(tribute) {\n        _classCallCheck(this, TributeSearch);\n\n        this.tribute = tribute;\n        this.tribute.search = this;\n    }\n\n    _createClass(TributeSearch, [{\n        key: 'simpleFilter',\n        value: function simpleFilter(pattern, array) {\n            var _this = this;\n\n            return array.filter(function (string) {\n                return _this.test(pattern, string);\n            });\n        }\n    }, {\n        key: 'test',\n        value: function test(pattern, string) {\n            return this.match(pattern, string) !== null;\n        }\n    }, {\n        key: 'match',\n        value: function match(pattern, string, opts) {\n            opts = opts || {};\n            var patternIdx = 0,\n                result = [],\n                len = string.length,\n                totalScore = 0,\n                currScore = 0,\n                pre = opts.pre || '',\n                post = opts.post || '',\n                compareString = opts.caseSensitive && string || string.toLowerCase(),\n                ch = void 0,\n                compareChar = void 0;\n\n            if (opts.skip) {\n                return { rendered: string, score: 0 };\n            }\n\n            pattern = opts.caseSensitive && pattern || pattern.toLowerCase();\n\n            var patternCache = this.traverse(compareString, pattern, 0, 0, []);\n            if (!patternCache) {\n                return null;\n            }\n            return {\n                rendered: this.render(string, patternCache.cache, pre, post),\n                score: patternCache.score\n            };\n        }\n    }, {\n        key: 'traverse',\n        value: function traverse(string, pattern, stringIndex, patternIndex, patternCache) {\n            // if the pattern search at end\n            if (pattern.length === patternIndex) {\n\n                // calculate score and copy the cache containing the indices where it's found\n                return {\n                    score: this.calculateScore(patternCache),\n                    cache: patternCache.slice()\n                };\n            }\n\n            // if string at end or remaining pattern > remaining string\n            if (string.length === stringIndex || pattern.length - patternIndex > string.length - stringIndex) {\n                return undefined;\n            }\n\n            var c = pattern[patternIndex];\n            var index = string.indexOf(c, stringIndex);\n            var best = void 0,\n                temp = void 0;\n\n            while (index > -1) {\n                patternCache.push(index);\n                temp = this.traverse(string, pattern, index + 1, patternIndex + 1, patternCache);\n                patternCache.pop();\n\n                // if downstream traversal failed, return best answer so far\n                if (!temp) {\n                    return best;\n                }\n\n                if (!best || best.score < temp.score) {\n                    best = temp;\n                }\n\n                index = string.indexOf(c, index + 1);\n            }\n\n            return best;\n        }\n    }, {\n        key: 'calculateScore',\n        value: function calculateScore(patternCache) {\n            var score = 0;\n            var temp = 1;\n\n            patternCache.forEach(function (index, i) {\n                if (i > 0) {\n                    if (patternCache[i - 1] + 1 === index) {\n                        temp += temp + 1;\n                    } else {\n                        temp = 1;\n                    }\n                }\n\n                score += temp;\n            });\n\n            return score;\n        }\n    }, {\n        key: 'render',\n        value: function render(string, indices, pre, post) {\n            var rendered = string.substring(0, indices[0]);\n\n            indices.forEach(function (index, i) {\n                rendered += pre + string[index] + post + string.substring(index + 1, indices[i + 1] ? indices[i + 1] : string.length);\n            });\n\n            return rendered;\n        }\n    }, {\n        key: 'filter',\n        value: function filter(pattern, arr, opts) {\n            var _this2 = this;\n\n            opts = opts || {};\n            return arr.reduce(function (prev, element, idx, arr) {\n                var str = element;\n\n                if (opts.extract) {\n                    str = opts.extract(element);\n\n                    if (!str) {\n                        // take care of undefineds / nulls / etc.\n                        str = '';\n                    }\n                }\n\n                var rendered = _this2.match(pattern, str, opts);\n\n                if (rendered != null) {\n                    prev[prev.length] = {\n                        string: rendered.rendered,\n                        score: rendered.score,\n                        index: idx,\n                        original: element\n                    };\n                }\n\n                return prev;\n            }, []).sort(function (a, b) {\n                var compare = b.score - a.score;\n                if (compare) return compare;\n                return a.index - b.index;\n            });\n        }\n    }]);\n\n    return TributeSearch;\n}();\n\nexports.default = TributeSearch;\nmodule.exports = exports.default;\n\n},{}],6:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Tribute = require(\"./Tribute\");\n\nvar _Tribute2 = _interopRequireDefault(_Tribute);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _Tribute2.default; /**\n                                     * Tribute.js\n                                     * Native ES6 JavaScript @mention Plugin\n                                     **/\n\nmodule.exports = exports.default;\n\n},{\"./Tribute\":1}],7:[function(require,module,exports){\n'use strict';\n\nif (!Array.prototype.find) {\n    Array.prototype.find = function (predicate) {\n        if (this === null) {\n            throw new TypeError('Array.prototype.find called on null or undefined');\n        }\n        if (typeof predicate !== 'function') {\n            throw new TypeError('predicate must be a function');\n        }\n        var list = Object(this);\n        var length = list.length >>> 0;\n        var thisArg = arguments[1];\n        var value;\n\n        for (var i = 0; i < length; i++) {\n            value = list[i];\n            if (predicate.call(thisArg, value, i, list)) {\n                return value;\n            }\n        }\n        return undefined;\n    };\n}\n\nif (window && typeof window.CustomEvent !== \"function\") {\n    var CustomEvent = function CustomEvent(event, params) {\n        params = params || {\n            bubbles: false,\n            cancelable: false,\n            detail: undefined\n        };\n        var evt = document.createEvent('CustomEvent');\n        evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n        return evt;\n    };\n\n    if (typeof window.Event !== 'undefined') {\n        CustomEvent.prototype = window.Event.prototype;\n    }\n\n    window.CustomEvent = CustomEvent;\n}\n\n},{}]},{},[6])(6)\n});\n//# sourceMappingURL=tribute.js.map\n"]}